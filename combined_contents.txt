"""
ASGI config for goldenbay project.

It exposes the ASGI callable as a module-level variable named ``application``.

For more information on this file, see
https://docs.djangoproject.com/en/6.0/howto/deployment/asgi/
"""

import os

from django.core.asgi import get_asgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'goldenbay.settings')

application = get_asgi_application()


"""
Django settings for goldenbay project.

Generated by 'django-admin startproject' using Django 6.0.2.

For more information on this file, see
https://docs.djangoproject.com/en/6.0/topics/settings/

For the full list of settings and their values, see
https://docs.djangoproject.com/en/6.0/ref/settings/
"""

import os
from pathlib import Path
from datetime import timedelta
from dotenv import load_dotenv # Import this to read .env

# Build paths inside the project like this: BASE_DIR / 'subdir'.
BASE_DIR = Path(__file__).resolve().parent.parent

load_dotenv(os.path.join(BASE_DIR, '.env'))

# Quick-start development settings - unsuitable for production
# See https://docs.djangoproject.com/en/6.0/howto/deployment/checklist/

# SECURITY WARNING: keep the secret key used in production secret!
SECRET_KEY = os.getenv('SECRET_KEY')

# SECURITY WARNING: don't run with debug turned on in production!
DEBUG = os.getenv('DEBUG') == 'True'

ALLOWED_HOSTS = os.getenv('ALLOWED_HOSTS', '127.0.0.1,localhost').split(',')


# Application definition

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'rest_framework',
    'corsheaders',

    # Local Apps
    'core',
    'users',
    'menu',
    'reservations',
    'events',
    'blog',
    'marketing',
    'rest_framework_simplejwt',
    'ckeditor',
]

REST_FRAMEWORK = {
    'DEFAULT_AUTHENTICATION_CLASSES': (
        'rest_framework_simplejwt.authentication.JWTAuthentication',
    ),
}

SIMPLE_JWT = {
    'ACCESS_TOKEN_LIFETIME': timedelta(hours=12), # Extends login to 12 hours
    'REFRESH_TOKEN_LIFETIME': timedelta(days=7),  # Refresh token lasts 7 days
    'ROTATE_REFRESH_TOKENS': False,
    'BLACKLIST_AFTER_ROTATION': True,
    'UPDATE_LAST_LOGIN': False,

    'ALGORITHM': 'HS256',
    'SIGNING_KEY': os.getenv('SECRET_KEY'), # Uses your Django secret key
    'VERIFYING_KEY': None,
    'AUDIENCE': None,
    'ISSUER': None,
    'JWK_URL': None,
    'LEEWAY': 0,

    'AUTH_HEADER_TYPES': ('Bearer',),
    'AUTH_HEADER_NAME': 'HTTP_AUTHORIZATION',
    'USER_ID_FIELD': 'id',
    'USER_ID_CLAIM': 'user_id',
}

CKEDITOR_UPLOAD_PATH = "uploads/"

MIDDLEWARE = [
    'corsheaders.middleware.CorsMiddleware',
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

ROOT_URLCONF = 'goldenbay.urls'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]

WSGI_APPLICATION = 'goldenbay.wsgi.application'


# Database
# https://docs.djangoproject.com/en/6.0/ref/settings/#databases

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': os.getenv('DB_NAME'),
        'USER': os.getenv('DB_USER'),
        'PASSWORD': os.getenv('DB_PASSWORD'),
        'HOST': os.getenv('DB_HOST'),
        'PORT': os.getenv('DB_PORT'),
        'CONN_MAX_AGE': 60,
    }
}


# Password validation
# https://docs.djangoproject.com/en/6.0/ref/settings/#auth-password-validators

AUTH_PASSWORD_VALIDATORS = [
    {
        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',
    },
]


# Internationalization
# https://docs.djangoproject.com/en/6.0/topics/i18n/

LANGUAGE_CODE = 'en-us'
TIME_ZONE = 'Asia/Manila'
USE_I18N = True
USE_TZ = True

# --------------------------------------------------------------------
# STATIC & MEDIA FILES
# --------------------------------------------------------------------
STATIC_URL = '/static/'

# FIX: We use .parent to go up one level from 'backend' to the main folder
STATICFILES_DIRS = [
    BASE_DIR.parent / 'frontend' / 'dist'
]

STATIC_ROOT = BASE_DIR / 'staticfiles'

MEDIA_URL = '/media/'
MEDIA_ROOT = BASE_DIR / 'media'

DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'

CORS_ALLOWED_ORIGINS = [
    "http://localhost:3000", # The default port for Vite/React
    "http://127.0.0.1:3000",
    "http://localhost:5173",  # <--- ADD THIS (Vite's default port)
    "http://127.0.0.1:5173",
]

CORS_ALLOW_CREDENTIALS = True

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# üì¨ EMAIL SETTINGS (Marketing & Notifications)
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
EMAIL_HOST = os.getenv('EMAIL_HOST')
EMAIL_PORT = int(os.getenv('EMAIL_PORT', 587))
EMAIL_USE_TLS = os.getenv('EMAIL_USE_TLS') == 'True'
EMAIL_HOST_USER = os.getenv('EMAIL_HOST_USER')
EMAIL_HOST_PASSWORD = os.getenv('EMAIL_HOST_PASSWORD')
# Static files (CSS, JavaScript, Images)
# https://docs.djangoproject.com/en/6.0/howto/static-files/



from django.contrib import admin
from django.urls import path, include
from django.conf import settings
from django.conf.urls.static import static
from rest_framework_simplejwt.views import TokenObtainPairView, TokenRefreshView

urlpatterns = [
    path('admin/', admin.site.urls),
    path('api/menu/', include('menu.urls')),         # <--- We will enable these soon
    path('api/reservations/', include('reservations.urls')), 
    path('api/marketing/', include('marketing.urls')),
    # path('api/events/', include('events.urls')), 
    path('api/token/', TokenObtainPairView.as_view(), name='token_obtain_pair'),
    path('api/token/refresh/', TokenRefreshView.as_view(), name='token_refresh'),
]

# Media files for development (Images)
if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)

"""
WSGI config for goldenbay project.

It exposes the WSGI callable as a module-level variable named ``application``.

For more information on this file, see
https://docs.djangoproject.com/en/6.0/howto/deployment/wsgi/
"""

import os

from django.core.wsgi import get_wsgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'goldenbay.settings')

application = get_wsgi_application()


from django.contrib import admin


from django.apps import AppConfig


class ApiConfig(AppConfig):
    name = 'core'


from django.db import models










from django.contrib import admin
from .models import EventGallery, EventPhoto

class EventPhotoInline(admin.TabularInline):
    model = EventPhoto
    extra = 1

class EventGalleryAdmin(admin.ModelAdmin):
    inlines = [EventPhotoInline]

admin.site.register(EventGallery, EventGalleryAdmin)

from django.apps import AppConfig


class EventsConfig(AppConfig):
    name = 'events'


from django.db import models

class EventGallery(models.Model):
    event_code = models.CharField(max_length=20, unique=True)
    event_name = models.CharField(max_length=200)

    class Meta:
        verbose_name_plural = "Event Galleries"

    def __str__(self):
        return self.event_name
    
class EventPhoto(models.Model):
    gallery = models.ForeignKey(EventGallery, related_name='photos', on_delete=models.CASCADE)
    image = models.ImageField(upload_to='event_uploads/')
    uploaded_at = models.DateTimeField(auto_now_add=True)
    is_approved = models.BooleanField(default=False)

from django.shortcuts import render

# Create your views here.


from django.contrib import admin
from .models import Category, MenuItem, MenuItemPrice

class MenuItemPriceInline(admin.TabularInline):
    model = MenuItemPrice
    extra = 0 # Don't show extra empty rows by default

@admin.register(Category)
class CategoryAdmin(admin.ModelAdmin):
    list_display = ('name', 'name_zh', 'order')
    ordering = ('order',)

@admin.register(MenuItem)
class MenuItemAdmin(admin.ModelAdmin):
    list_display = ('code', 'name', 'category', 'is_available')
    list_filter = ('category', 'is_available')
    search_fields = ('name', 'code', 'name_zh')
    inlines = [MenuItemPriceInline]

from django.apps import AppConfig


class MenuConfig(AppConfig):
    name = 'menu'


from django.db import models

class Category(models.Model):
    name = models.CharField(max_length=100)
    name_zh = models.CharField(max_length=100, blank=True, null=True, verbose_name="Chinese Name")
    order = models.IntegerField(default=0)

    class Meta:
        verbose_name_plural = "Categories"
        ordering = ['order']

    def __str__(self):
        return self.name
    
class CookingMethod(models.Model):
    name = models.CharField(max_length=100)
    name_zh = models.CharField(max_length=100, blank=True, null=True)

    def __str__(self):
        return self.name
    
class MenuItem(models.Model):
    category = models.ForeignKey(Category, related_name='items', on_delete=models.CASCADE)
    code = models.CharField(max_length=20, blank=True, null=True, help_text="e.g., BA01")
    name = models.CharField(max_length=200)
    name_zh = models.CharField(max_length=200, blank=True, null=True, verbose_name="Chinese Name")
    description = models.TextField(blank=True, null=True)
    image = models.ImageField(upload_to='menu_items/', blank=True, null=True)
    is_available = models.BooleanField(default=True)
    cooking_methods = models.ManyToManyField(CookingMethod, blank=True, related_name='menu_items')
    
    created_at = models.DateTimeField(auto_now_add=True)

    def __str__(self):
        return f"{self.code} - {self.name}" if self.code else self.name

class MenuItemPrice(models.Model):
    menu_item = models.ForeignKey(MenuItem, related_name='prices', on_delete=models.CASCADE)
    size = models.CharField(max_length=50, default='Regular', help_text="e.g., S, M, L, Half, Whole")
    price = models.DecimalField(max_digits=10, decimal_places=2, null=True, blank=True)
    is_seasonal = models.BooleanField(default=False, help_text="If checked, price will show as 'Seasonal Price'")

    class Meta:
        ordering = ['price']

    def __str__(self):
        return f"{self.menu_item.name} - {self.size}"

from rest_framework import serializers
from .models import Category, MenuItem, MenuItemPrice, CookingMethod

class CookingMethodSerializer(serializers.ModelSerializer):
    class Meta:
        model = CookingMethod
        fields = ['id', 'name', 'name_zh']

class MenuItemPriceSerializer(serializers.ModelSerializer):
    class Meta:
        model = MenuItemPrice
        fields = ['id', 'size', 'price', 'is_seasonal']

class MenuItemSerializer(serializers.ModelSerializer):
    prices = MenuItemPriceSerializer(many=True, read_only=True)
    cooking_methods = CookingMethodSerializer(many=True, read_only=True) # <--- Added this
    image = serializers.SerializerMethodField()

    class Meta:
        model = MenuItem
        fields = ['id', 'code', 'name', 'name_zh', 'description', 'image', 'is_available', 'prices', 'cooking_methods']

    def get_image(self, obj):
        if obj.image:
            return obj.image.url
        return None

class CategorySerializer(serializers.ModelSerializer):
    items = MenuItemSerializer(many=True, read_only=True)

    class Meta:
        model = Category
        fields = ['id', 'name', 'name_zh', 'items']

from django.urls import path
from .views import MenuListView

urlpatterns = [
    path('', MenuListView.as_view(), name='api_menu_list'),
]

from rest_framework import generics
from django.db.models import Prefetch
from .models import Category, MenuItem
from .serializers import CategorySerializer

class MenuListView(generics.ListAPIView):
    serializer_class = CategorySerializer
    
    def get_queryset(self):
        # 1. Create a query for Items that is sorted by 'code' (Ascending: A-Z, 0-9)
        #    We also prefetch 'prices' here to ensure the nested data loads fast.
        sorted_items = MenuItem.objects.order_by('code').prefetch_related('prices')

        # 2. Fetch Categories sorted by their manual 'order'
        #    And inject our sorted_items query into the 'items' relationship
        return Category.objects.prefetch_related(
            Prefetch('items', queryset=sorted_items)
        ).all().order_by('order')

from django.contrib import admin
from .models import DiningArea, Reservation

@admin.register(DiningArea)
class DiningAreaAdmin(admin.ModelAdmin):
    list_display = ('name', 'area_type', 'capacity', 'has_ktv', 'is_active')
    list_filter = ('area_type', 'has_ktv', 'has_restroom')

@admin.register(Reservation)
class ReservationAdmin(admin.ModelAdmin):
    list_display = ('customer_name', 'date', 'session', 'dining_area', 'status')
    list_filter = ('date', 'session', 'status', 'dining_area')

from django.apps import AppConfig


class ReservationsConfig(AppConfig):
    name = 'reservations'


from django.db import models
from django.core.exceptions import ValidationError
from django.db.models.signals import post_save
from django.dispatch import receiver

class DiningArea(models.Model):
    TYPE_CHOICES = [
        ('VIP', 'VIP Room'),
        ('HALL', 'Main Dining Hall (Ala Carte)'),
    ]
    name = models.CharField(max_length=100, help_text="e.g., VIP Room 1, Main Hall")
    area_type = models.CharField(max_length=10, choices=TYPE_CHOICES)
    capacity = models.IntegerField(help_text="Max pax for this room/area")
    min_pax = models.IntegerField(default=1, help_text="Minimum pax required to book")
    description = models.TextField(blank=True, help_text="e.g., 'Ocean View'")
    
    # Primary Cover Image (Thumbnail)
    image = models.ImageField(upload_to='dining_areas/', blank=True, null=True)
    
    # Amenities Flags
    has_ktv = models.BooleanField(default=False, verbose_name="KTV")
    has_restroom = models.BooleanField(default=False, verbose_name="Private Restroom")
    has_tv = models.BooleanField(default=False, verbose_name="TV")
    has_couch = models.BooleanField(default=False, verbose_name="Lounge Area / Couch")

    is_active = models.BooleanField(default=True)

    def __str__(self):
        return f"{self.name} ({self.get_area_type_display()})"
    

class Reservation(models.Model):
    # ... (Keep existing Reservation model code exactly as is) ...
    # Just copy the existing Reservation class here to avoid breaking it.
    SESSION_CHOICES = [
        ('LUNCH', 'Lunch (11:00 AM - 2:30 PM)'),
        ('DINNER', 'Dinner (5:00 PM - 10:00 PM)'),
    ]
    STATUS_CHOICES = [
        ('PENDING', 'Pending Confirmation'),
        ('CONFIRMED', 'Confirmed'),
        ('CANCELLED', 'Cancelled'),
    ]

    # Customer Info
    customer_name = models.CharField(max_length=100)
    customer_contact = models.CharField(max_length=50, help_text="Phone or Viber")
    customer_email = models.EmailField(blank=True, null=True)
    
    # Booking Details
    dining_area = models.ForeignKey(DiningArea, on_delete=models.CASCADE, related_name='reservations')
    date = models.DateField()
    session = models.CharField(max_length=10, choices=SESSION_CHOICES)
    time = models.TimeField(help_text="Specific arrival time")
    pax = models.IntegerField()
    special_request = models.TextField(blank=True, null=True)
    
    # System Fields
    status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='PENDING')
    created_at = models.DateTimeField(auto_now_add=True)

    reminder_sent = models.BooleanField(default=False, help_text="Has the 4-hour reminder been sent?")
    
    class Meta:
        ordering = ['-date', '-time']

    def clean(self):
        if self.dining_area.area_type == 'VIP' and self.status != 'CANCELLED':
            clashing = Reservation.objects.filter(
                dining_area=self.dining_area,
                date=self.date,
                session=self.session
            ).exclude(pk=self.pk).exclude(status='CANCELLED')
            
            if clashing.exists():
                raise ValidationError(f"{self.dining_area.name} is already booked for this session.")

        if self.pax > self.dining_area.capacity:
            raise ValidationError(f"Guests exceed capacity ({self.dining_area.capacity}) for this room.")

    def save(self, *args, **kwargs):
        self.clean()
        super().save(*args, **kwargs)

    def __str__(self):
        return f"{self.customer_name} - {self.date} ({self.session})"
    
class Customer(models.Model):
    name = models.CharField(max_length=200)
    phone = models.CharField(max_length=50, unique=True) # Phone is the unique key
    email = models.EmailField(blank=True, null=True)
    
    # Socials
    wechat = models.CharField(max_length=100, blank=True, null=True)
    viber = models.CharField(max_length=100, blank=True, null=True)
    whatsapp = models.CharField(max_length=100, blank=True, null=True)
    telegram = models.CharField(max_length=100, blank=True, null=True)
    
    notes = models.TextField(blank=True, null=True, help_text="VVIP status, allergies, preferences")
    created_at = models.DateTimeField(auto_now_add=True)
    last_visit = models.DateField(auto_now=True)

    class Meta:
        ordering = ['name']

    def __str__(self):
        return f"{self.name} ({self.phone})"

# --- ADD THIS SIGNAL TO AUTO-SAVE CUSTOMERS ---
@receiver(post_save, sender=Reservation)
def save_customer_from_reservation(sender, instance, created, **kwargs):
    """
    When a Reservation is saved, automatically create or update the Customer 
    in the Phone Book based on the phone number.
    """
    if instance.customer_contact:
        # Try to find customer by phone number
        customer, created = Customer.objects.get_or_create(
            phone=instance.customer_contact,
            defaults={
                'name': instance.customer_name,
                'email': instance.customer_email
            }
        )
        
        # If customer exists, update the last visit
        if not created:
            # We rarely overwrite names automatically to prevent overriding 
            # a formal name with a nickname used in a booking, 
            # but we update the last_visit.
            customer.last_visit = instance.date
            if not customer.email and instance.customer_email:
                customer.email = instance.customer_email
            customer.save()

from rest_framework import serializers
from django.db.models import Sum
from .models import DiningArea, Reservation, Customer
from django.db import transaction

        
class DiningAreaSerializer(serializers.ModelSerializer):

    class Meta:
        model = DiningArea
        fields = [
            'id', 'name', 'area_type', 'capacity', 'description', 'image',
            'has_ktv', 'has_restroom', 'has_tv', 'has_couch',
        ]

class ReservationSerializer(serializers.ModelSerializer):
    room_name = serializers.CharField(source='dining_area.name', read_only=True)
    class Meta:
        model = Reservation
        fields = '__all__'
    
    def validate(self, data):
        # 1. Setup variables: Use incoming data, otherwise fall back to existing DB instance
        instance = self.instance # This exists if we are Updating (PATCH/PUT)

        # Helper to get field from data OR instance
        def get_field(name):
            return data.get(name, getattr(instance, name, None))

        dining_area = get_field('dining_area')
        date_val = get_field('date')
        session_val = get_field('session')
        pax_val = get_field('pax')

        # If we are just updating status (and somehow missing core data), skip complex checks
        if not (dining_area and date_val and session_val and pax_val):
            return data

        # ATOMIC TRANSACTION: Locks the room until validation is finished
        with transaction.atomic():
            # We must fetch the area object to check type
            # Note: dining_area is already a model object due to DRF internal handling
            area = DiningArea.objects.select_for_update().get(id=dining_area.id)

            if area.area_type == 'VIP':
                exists = Reservation.objects.filter(
                    dining_area=area, 
                    date=date_val, 
                    session=session_val
                ).exclude(status='CANCELLED')
                
                # If updating, exclude self from the collision check
                if instance:
                    exists = exists.exclude(id=instance.id)

                if exists.exists():
                    raise serializers.ValidationError(f"{area.name} is already booked for this session.")

            elif area.area_type == 'HALL':
                # Sum all existing bookings
                total_pax_query = Reservation.objects.filter(
                    dining_area=area, 
                    date=date_val, 
                    session=session_val
                ).exclude(status='CANCELLED')

                # If updating, exclude self from the total calculation before adding new pax
                if instance:
                    total_pax_query = total_pax_query.exclude(id=instance.id)

                total_pax = total_pax_query.aggregate(Sum('pax'))['pax__sum'] or 0
                
                if (total_pax + pax_val) > area.capacity:
                    raise serializers.ValidationError(f"Only {area.capacity - total_pax} seats left in the Hall.")

        return data
    
class CustomerSerializer(serializers.ModelSerializer):
    class Meta:
        model = Customer
        fields = '__all__'

from django.urls import path
from .views import AdminReservationDetailView, AdminReservationListView, AvailableRoomsView, CustomerDetailView, CustomerListView, DashboardStatsView, ReservationCreateView, VIPRoomListView

urlpatterns = [
    path('check/', AvailableRoomsView.as_view(), name='check_availability'),
    path('create/', ReservationCreateView.as_view(), name='create_reservation'),
    path('dashboard/', DashboardStatsView.as_view(), name='dashboard_stats'),
    path('manage/', AdminReservationListView.as_view()), 
    path('manage/<int:pk>/', AdminReservationDetailView.as_view()),
    path('customers/', CustomerListView.as_view()),
    path('customers/<int:id>/', CustomerDetailView.as_view()),
    path('rooms/', VIPRoomListView.as_view(), name='vip_room_list'),
]

import threading
import requests
import os
from django.db import transaction
from rest_framework import generics, status
from datetime import date
from rest_framework.response import Response
from rest_framework.permissions import IsAuthenticated, AllowAny
from rest_framework.views import APIView
from django.db.models import Sum, Count, Q
from .models import DiningArea, Reservation, Customer, Reservation
from .serializers import ReservationSerializer, DiningAreaSerializer, CustomerSerializer # We will create these next
from django.core.mail import send_mail
from django.conf import settings
from .utils import send_sms
from django.template.loader import render_to_string
from django.utils.html import strip_tags


class AvailableRoomsView(APIView):
    def get(self, request):
        date = request.query_params.get('date')
        session = request.query_params.get('session')

        if not date or not session:
            return Response({"error": "Date and Session required"}, status=status.HTTP_400_BAD_REQUEST)

        # 1. Get all active areas
        all_areas = DiningArea.objects.filter(is_active=True)
        
        # 2. Get bookings for this session/date
        bookings = Reservation.objects.filter(
            date=date, 
            session=session
        ).exclude(status='CANCELLED')

        # 3. Calculate Availability per Room
        results = []
        for area in all_areas:
            is_available = True
            current_pax = 0

            if area.area_type == 'VIP':
                # VIP Logic: If ANY booking exists, it's taken
                if bookings.filter(dining_area=area).exists():
                    is_available = False
            
            elif area.area_type == 'HALL':
                # Hall Logic: Check total capacity
                total_pax = bookings.filter(dining_area=area).aggregate(Sum('pax'))['pax__sum'] or 0
                current_pax = total_pax
                
                # If hall is full (e.g. 100 capacity, 98 booked), mark unavailable
                if total_pax >= area.capacity:
                    is_available = False
            
            data = DiningAreaSerializer(area).data
            data['is_available'] = is_available
            data['remaining_capacity'] = area.capacity - current_pax if area.area_type == 'HALL' else 0
            results.append(data)

        return Response(results)

def send_notifications_task(reservation_id):
    """ Fired when a NEW booking is created """
    try:
        reservation = Reservation.objects.select_related('dining_area').get(id=reservation_id)
        area_name = reservation.dining_area.name if reservation.dining_area else "Main Dining Hall"
        
        # ==========================================
        # 1. NOTIFY THE RESTAURANT ADMINS
        # ==========================================
        
        # A. Email Admin
        admin_context = {
            'name': reservation.customer_name,
            'contact': reservation.customer_contact,
            'date': reservation.date.strftime('%B %d, %Y'),
            'time': reservation.time.strftime('%I:%M %p'),
            'pax': reservation.pax,
            'area': area_name,
            'notes': reservation.special_request or 'None',
            'id': reservation.id
        }
        admin_html = render_to_string('emails/admin_notification.html', admin_context)
        admin_plain = strip_tags(admin_html)
        
        send_mail(
            subject=f'New Booking Request: {reservation.customer_name}',
            message=admin_plain,
            from_email=settings.EMAIL_HOST_USER,
            recipient_list=['marketing@goldenbay.com.ph'], 
            html_message=admin_html,
            fail_silently=False,
        )

        # B. SMS Admin(s)
        admin_numbers_str = os.getenv('ADMIN_PHONE_NUMBERS', '')
        if admin_numbers_str:
            # Split the string by commas to get a list of numbers
            admin_numbers = [num.strip() for num in admin_numbers_str.split(',') if num.strip()]
            
            admin_sms_body = f"Golden Bay Alert: New booking request from {reservation.customer_name} for {reservation.pax} pax on {reservation.date.strftime('%b %d')} at {reservation.time.strftime('%I:%M %p')}. Please check dashboard."
            
            # Send to each admin number
            for number in admin_numbers:
                send_sms(number, admin_sms_body)


        # ==========================================
        # 2. NOTIFY THE CUSTOMER
        # ==========================================
        
        # A. Email Customer (Only if they provided an email address)
        if reservation.customer_email and '@' in reservation.customer_email:
            customer_context = {
                'name': reservation.customer_name,
                'status': 'PENDING',
                'date': reservation.date.strftime('%B %d, %Y'),
                'time': reservation.time.strftime('%I:%M %p'),
                'pax': reservation.pax,
                'area': area_name,
                'id': reservation.id
            }
            customer_html = render_to_string('emails/confirmation.html', customer_context)
            customer_plain = strip_tags(customer_html)
            
            send_mail(
                subject='Reservation Request Received - Golden Bay',
                message=customer_plain,
                from_email=settings.EMAIL_HOST_USER,
                recipient_list=[reservation.customer_email],
                html_message=customer_html,
                fail_silently=False,
            )
            
        # B. SMS Customer (Only if they provided a phone number)
        # We check if the contact field contains digits. If they entered "Viber: John123", we skip SMS.
        contact_digits = ''.join(filter(str.isdigit, str(reservation.customer_contact)))
        
        if len(contact_digits) >= 10: # Ensure it looks like a valid phone number length
            sms_body = f"Golden Bay: Hi {reservation.customer_name}, we received your request for {reservation.date.strftime('%b %d')} at {reservation.time.strftime('%I:%M %p')}. Our team is reviewing it and will confirm shortly."
            send_sms(reservation.customer_contact, sms_body)

    except Exception as e:
        print(f"Error in Notification Thread: {e}")

class ReservationCreateView(generics.CreateAPIView):
    queryset = Reservation.objects.all()
    serializer_class = ReservationSerializer
    permission_classes = [AllowAny] 

    def perform_create(self, serializer):
        # 1. Save data to DB first
        reservation = serializer.save()

        # 2. Use a lambda inside on_commit to ensure the thread starts 
        # ONLY after the database has finished writing the record.
        transaction.on_commit(lambda: threading.Thread(
            target=send_notifications_task, 
            args=(reservation.id,)
        ).start())

class DashboardStatsView(APIView):
    def get(self, request):
        today = date.today()
        # Calculate Expected Revenue (Assuming avg 1500 PHP per person)
        pax_today = Reservation.objects.filter(date=today, status='CONFIRMED').aggregate(Sum('pax'))['pax__sum'] or 0
        expected_revenue = pax_today * 1500 

        return Response({
            "stats": {
                "today_count": Reservation.objects.filter(date=today).count(),
                "pending_count": Reservation.objects.filter(status='PENDING').count(),
                "vip_pax": Reservation.objects.filter(date=today, dining_area__area_type='VIP').aggregate(total=Sum('pax'))['total'] or 0,
                "revenue": f"‚Ç±{expected_revenue:,}" # Formatted revenue
            },
            "recent_bookings": ReservationSerializer(Reservation.objects.all().order_by('-created_at')[:5], many=True).data
        })
    
class AdminReservationListView(generics.ListCreateAPIView):
    # Lists all bookings (newest first) OR creates a manual one
    queryset = Reservation.objects.all().order_by('-created_at')
    serializer_class = ReservationSerializer
    permission_classes = [IsAuthenticated] # Enable this later when we add login

def send_admin_update_notifications(reservation_id, new_status):
    """ Fired when an ADMIN confirms or cancels a booking """
    try:
        reservation = Reservation.objects.get(id=reservation_id)
        area_name = reservation.dining_area.name if reservation.dining_area else "Main Dining Hall"
        
        # 1. SEND HTML EMAIL (If email exists)
        if reservation.customer_email and '@' in reservation.customer_email and new_status in ['CONFIRMED', 'CANCELLED']:
            context = {
                'name': reservation.customer_name,
                'status': new_status,
                'date': reservation.date.strftime('%B %d, %Y'),
                'time': reservation.time.strftime('%I:%M %p'),
                'pax': reservation.pax,
                'area': area_name,
                'id': reservation.id
            }
            html_message = render_to_string('emails/confirmation.html', context)
            plain_message = strip_tags(html_message)

            send_mail(
                subject=f'Reservation {new_status.capitalize()} - Golden Bay',
                message=plain_message,
                from_email=settings.EMAIL_HOST_USER,
                recipient_list=[reservation.customer_email],
                fail_silently=False,
                html_message=html_message
            )

        # 2. SEND SMS NOTIFICATION (If phone number exists)
        contact_digits = ''.join(filter(str.isdigit, str(reservation.customer_contact)))
        
        if len(contact_digits) >= 10 and new_status in ['CONFIRMED', 'CANCELLED']:
            if new_status == 'CONFIRMED':
                sms_body = f"Golden Bay: Great news {reservation.customer_name}! Your table is CONFIRMED for {reservation.date.strftime('%b %d')} at {reservation.time.strftime('%I:%M %p')}. We look forward to serving you."
            else:
                sms_body = f"Golden Bay: Hi {reservation.customer_name}, your reservation for {reservation.date.strftime('%b %d')} has been cancelled. Please contact us at (02) 8804-0332 to reschedule."
            
            send_sms(reservation.customer_contact, sms_body)
            
    except Exception as e:
        print(f"‚ö†Ô∏è Notification Error for ID {reservation_id}: {e}")

class AdminReservationDetailView(generics.RetrieveUpdateAPIView):
    queryset = Reservation.objects.all()
    serializer_class = ReservationSerializer
    permission_classes = [IsAuthenticated] 

    def update(self, request, *args, **kwargs):
        # 1. Perform the Database Update first
        response = super().update(request, *args, **kwargs)

        # 2. If DB update succeeded, trigger notifications in background
        if response.status_code == 200:
            reservation = self.get_object()
            new_status = request.data.get('status')
            
            # Fire and forget thread
            thread = threading.Thread(
                target=send_admin_update_notifications, 
                args=(reservation.id, new_status)
            )
            thread.start()

        return response
    
class CustomerListView(generics.ListCreateAPIView):
    queryset = Customer.objects.all().order_by('name')
    serializer_class = CustomerSerializer
    permission_classes = [IsAuthenticated]

class CustomerDetailView(generics.RetrieveUpdateDestroyAPIView):
    queryset = Customer.objects.all()
    serializer_class = CustomerSerializer
    permission_classes = [IsAuthenticated]
    lookup_field = 'id'

class VIPRoomListView(generics.ListAPIView):
    serializer_class = DiningAreaSerializer
    permission_classes = [AllowAny]
    pagination_class = None # Show all rooms on one page

    def get_queryset(self):
        # Filter only VIP rooms and sort them by name
        return DiningArea.objects.filter(area_type='VIP', is_active=True).order_by('name')

import requests
import os

def send_sms(to_number, body):
    api_key = os.getenv('SEMAPHORE_API_KEY')
    if not api_key:
        print(f"‚ö†Ô∏è SMS LOG (No API Key): To {to_number} - {body}")
        return
        
    # Clean the phone number (remove spaces, dashes, etc.)
    clean_number = ''.join(filter(str.isdigit, str(to_number)))
    
    # Semaphore prefers 0917 format over 63917 for local sending
    if clean_number.startswith('63') and len(clean_number) == 12:
        clean_number = '0' + clean_number[2:]

    url = "https://api.semaphore.co/api/v4/messages"
    
    data = {
        'apikey': api_key,
        'number': clean_number,
        'message': body,
    }
    
    try:
        response = requests.post(url, data=data, timeout=10)
        result = response.json()
        print(f"üì≤ SMS Sent to {clean_number}: {result}")
        return result
    except Exception as e:
        print(f"‚ùå SMS Network Error: {e}")

from django.contrib import admin
from .models import Post

@admin.register(Post)
class PostAdmin(admin.ModelAdmin):
    list_display = ('title', 'type', 'is_active', 'created_at')
    list_filter = ('type', 'is_active', 'created_at')
    search_fields = ('title', 'content')
    prepopulated_fields = {'slug': ('title',)} # Auto-fill slug from title
    date_hierarchy = 'created_at'

from django.apps import AppConfig


class MarketingConfig(AppConfig):
    name = 'marketing'


from django.db import models

class Post(models.Model):
    TYPE_CHOICES = [
        ('BLOG', 'News & Events'),
        ('PROMO', 'Promotion'),
    ]

    title = models.CharField(max_length=200)
    slug = models.SlugField(unique=True, help_text="URL friendly name (e.g., chinese-new-year-promo)")
    type = models.CharField(max_length=10, choices=TYPE_CHOICES)
    content = models.TextField()
    image = models.ImageField(upload_to='marketing_uploads/')
    
    is_active = models.BooleanField(default=True)
    created_at = models.DateTimeField(auto_now_add=True)

    class Meta:
        ordering = ['-created_at']

    def __str__(self):
        return f"[{self.type}] {self.title}"

from rest_framework import serializers
from .models import Post

class PostSerializer(serializers.ModelSerializer):
    class Meta:
        model = Post
        fields = '__all__'

from django.urls import path
from .views import AdminPostDetailView, AdminPostListCreateView, PublicPostListView, PostDetailView

urlpatterns = [
    path('', PublicPostListView.as_view()),
    path('<slug:slug>/', PostDetailView.as_view()),
    path('manage/all/', AdminPostListCreateView.as_view()),
    path('manage/<int:id>/', AdminPostDetailView.as_view()),
]

from rest_framework import generics
from .models import Post
from .serializers import PostSerializer
from rest_framework.permissions import IsAuthenticated, AllowAny
from rest_framework.parsers import MultiPartParser, FormParser

class PublicPostListView(generics.ListAPIView):
    serializer_class = PostSerializer
    permission_classes = [AllowAny]

    def get_queryset(self):
        # Allow filtering by type via URL: /api/marketing/?type=PROMO
        queryset = Post.objects.filter(is_active=True)
        post_type = self.request.query_params.get('type')
        if post_type:
            queryset = queryset.filter(type=post_type)
        return queryset

class PostDetailView(generics.RetrieveAPIView):
    queryset = Post.objects.filter(is_active=True)
    serializer_class = PostSerializer
    permission_classes = [AllowAny]
    lookup_field = 'slug'

class AdminPostListCreateView(generics.ListCreateAPIView):
    queryset = Post.objects.all().order_by('-created_at')
    serializer_class = PostSerializer
    permission_classes = [IsAuthenticated] # Secure this!
    parser_classes = [MultiPartParser, FormParser]

class AdminPostDetailView(generics.RetrieveUpdateDestroyAPIView):
    queryset = Post.objects.all()
    serializer_class = PostSerializer
    permission_classes = [IsAuthenticated]
    lookup_field = 'id'
    parser_classes = [MultiPartParser, FormParser]

from django.contrib import admin

# Register your models here.


from django.apps import AppConfig


class UsersConfig(AppConfig):
    name = 'users'


from django.db import models

# Create your models here.


from django.shortcuts import render

# Create your views here.


// src/App.jsx
import React from 'react';
import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';
import Navbar from './components/layout/Navbar';
import Footer from './components/layout/Footer';
import AdminLayout from './components/layout/AdminLayout';

// Public Pages
import HomePage from './pages/public/home/HomePage';
import MenuPage from './pages/public/menu/MenuPage';
import ReservationPage from './pages/public/reservations/ReservationPage';
import AboutPage from './pages/public/about/AboutPage'; // <--- IMPORT THIS
import LoginPage from './pages/admin/auth/LoginPage';
import NewsPage from './pages/public/marketing/NewsPage';
import SinglePostPage from './pages/public/marketing/SinglePostPage';
import EventInquiriesPage from './pages/public/events/EventInquiriesPage';

// Admin Pages
import AdminDashboardPage from './pages/admin/dashboard/AdminDashboardPage';
import BookingManager from './pages/admin/bookings/BookingManager';
import MarketingManager from './pages/admin/marketing/MarketingManager';
import PostEditor from './pages/admin/marketing/PostEditor';
import PhoneBookPage from './pages/admin/customers/PhoneBookPage';

import ProtectedRoute from './components/layout/ProtectedRoute';
import VIPRoomsPage from './pages/public/vip/VIPRoomsPage';

function App() {
  return (
    <Router>
      <div className="w-full min-h-screen font-sans bg-gray-50 text-gray-900">
        
        <Routes>
          {/* --- PUBLIC ROUTES --- */}
          <Route path="/" element={<><Navbar /><HomePage /></>} />
          <Route path="/menu" element={<><Navbar /><MenuPage /><Footer /></>} />
          <Route path="/reservations" element={<><Navbar /><ReservationPage /><Footer /></>} />
          <Route path="/events" element={<><Navbar /><EventInquiriesPage /><Footer /></>} />
          <Route path="/about" element={<><Navbar /><AboutPage /><Footer /></>} />
          <Route path="/news" element={<><Navbar /><NewsPage /><Footer /></>} />
          <Route path="/news/:slug" element={<><Navbar /><SinglePostPage /><Footer /></>} />
          <Route path="/promotions" element={<><Navbar /><NewsPage /><Footer /></>} />
          <Route path="/vip-rooms" element={<><Navbar /><VIPRoomsPage /><Footer /></>} />
          
          <Route path="/login" element={<LoginPage />} />

          {/* --- ADMIN ROUTES (NESTED) --- */}
          <Route path="/admin" element={
            <ProtectedRoute>
              <AdminLayout />
            </ProtectedRoute>
          }>
            <Route index element={<AdminDashboardPage />} />
            <Route path="bookings" element={<BookingManager />} />
            <Route path="customers" element={<PhoneBookPage />} />
            <Route path="marketing" element={<MarketingManager />} />
            <Route path="marketing/create" element={<PostEditor />} />
            <Route path="marketing/edit/:id" element={<PostEditor />} />
          </Route>
          
        </Routes>
      </div>
    </Router>
  );
}

export default App;

/* 1. Register Local Quicksand Fonts */
@font-face {
  font-family: 'Quicksand';
  src: url('./assets/fonts/Quicksand-Regular.ttf') format('truetype');
  font-weight: 400;
  font-style: normal;
}

@font-face {
  font-family: 'Quicksand';
  src: url('./assets/fonts/Quicksand-Bold.ttf') format('truetype');
  font-weight: 700;
  font-style: normal;
}

/* 2. Register Local Playfair Display (Replacing the @import) */
/* This points to the files in your 'static' folder screenshot */
@font-face {
  font-family: 'TheErupha';
  src: url('./assets/fonts/TheErupha.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'Noto Serif SC';
  src: url('./assets/fonts/NotoSerifSC-Regular.ttf') format('truetype');
  font-weight: 400;
  font-style: normal;
}

@font-face {
  font-family: 'Noto Serif SC';
  src: url('./assets/fonts/NotoSerifSC-Medium.ttf') format('truetype');
  font-weight: 500;
  font-style: normal;
}

@font-face {
  font-family: 'Noto Serif SC';
  src: url('./assets/fonts/NotoSerifSC-Bold.ttf') format('truetype');
  font-weight: 700;
  font-style: normal;
}

/* Optional: Add Light/Thin if you plan to use them for elegant subtitles */
@font-face {
  font-family: 'Noto Serif SC';
  src: url('./assets/fonts/NotoSerifSC-Light.ttf') format('truetype');
  font-weight: 300;
  font-style: normal;
}

/* 3. Global Styles */
@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  background-color: #0a0a0a;
}

body {
  margin: 0;
  padding: 0;
  font-family: 'Quicksand', sans-serif;
  color: #ffffff;
}

/* 4. Heading Specifics */
h1, h2, h3, h4 {
  font-family: 'TheErupha', serif;
  font-weight: 700; /* This triggers the PlayfairDisplay-Bold.ttf file */
}

h2 {
  font-size: 2.5rem; /* Adjust size as needed */
  letter-spacing: -0.01em; /* Gives it that tight, high-end look */
}

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Golden Bay | Luxury Seafood Dining</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>


/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  darkMode: 'class',
  theme: {
    extend: {
      colors: {
        gold: {
          400: '#D4AF37',
          500: '#C5A028',
          600: '#AA8820',
        },
        midnight: {
          900: '#0a0a0a',
          800: '#1a1a1a',
        },
        cream: {
            50: '#F9F9F9', // Very light grey/white
            100: '#F5F5F0', // Slight beige tint
        }
      },
      fontFamily: {
        sans: ['Quicksand', 'sans-serif'],
        serif: ['Playfair Display', 'serif'],
        erupha: ['"The Erupha"', 'serif'],
        chinese: ['"Noto Serif SC"', 'sans-serif'],
        },
    },
  },
  plugins: [
     require('@tailwindcss/typography'), // Ensure you have this for the blog content
  ],
}

import React from 'react';
import { Link, useLocation } from 'react-router-dom';
import { motion } from 'framer-motion';
import logo from '../../assets/images/goldenbaylogo.svg';

const Navbar = () => {
  const location = useLocation();
  const isHomePage = location.pathname === '/';

  return (
    <nav className={`fixed top-0 w-full z-50 transition-all duration-300 ${
      // Home = Transparent (Dark overlay underneath)
      // Others = White background with shadow
      isHomePage 
        ? 'bg-black/20 backdrop-blur-sm border-b border-white/5' 
        : 'bg-white/95 backdrop-blur-md border-b border-gray-200 shadow-sm'
    }`}>
      <div className="max-w-7xl mx-auto px-6 h-24 flex justify-between items-center">
        
        {/* LOGO */}
        <Link to="/" className="flex items-center">
            <img 
                src={logo} 
                alt="Golden Bay Logo" 
                // On Home: Standard. On others: Might need filter if logo is white-only.
                // Assuming logo is Gold, it works on both Black and White.
                className="h-14 w-auto hover:opacity-80 transition-opacity" 
            />
        </Link>

        {/* NAVIGATION LINKS */}
        <div className={`hidden md:flex items-center space-x-12 text-xs uppercase tracking-[0.2em] font-light
                        ${isHomePage ? 'text-gray-300' : 'text-gray-600'}`}>
          <Link to="/menu" className="hover:text-gold-500 transition-colors">Menu</Link>
          <Link to="/events" className="hover:text-gold-500 transition-colors">Events</Link>
          <Link to="/news" className="hover:text-gold-500 transition-colors">News & Promos</Link>
          <Link to="/about" className="hover:text-gold-500 transition-colors">About Us</Link>
          <Link to="/vip-rooms" className="hover:text-gold-500 transition-colors">Private Rooms</Link> {/* Added */}
          {/* Admin link hidden or kept subtle */}
           {/* <Link to="/admin" className={`${isHomePage ? 'text-white/20' : 'text-gray-300'} hover:text-gold-500 transition-colors`}>Admin</Link> */}
        </div>

        {/* CTA BUTTON */}
        <Link to="/reservations">
          <motion.button 
            whileHover={{ scale: 1.05 }}
            whileTap={{ scale: 0.95 }}
            className={`text-[11px] font-bold uppercase tracking-widest px-8 py-3 rounded-sm transition-colors
              ${isHomePage 
                ? 'bg-gold-500 text-white hover:bg-white hover:text-black' 
                : 'bg-gold-600 text-white hover:bg-black hover:text-white'
              }`}
          >
            Book a Table
          </motion.button>
        </Link>
      </div>
    </nav>
  );
};

export default Navbar;

import React, { useEffect, useState } from 'react';
import { 
    Users, 
    Calendar, 
    Clock, 
    Contact, 
    Megaphone, // Added for Marketing
    AlertCircle,
    ArrowRight
} from 'lucide-react';
import { Link } from 'react-router-dom';

const BACKEND_URL = "http://127.0.0.1:8000";

// --- PROFESSIONAL STAT CARD COMPONENT ---
const StatCard = ({ title, value, icon: Icon, colorClass, linkTo, subText }) => (
  <Link to={linkTo} className="group block h-full">
    <div className="bg-white p-6 rounded-lg border border-gray-200 shadow-sm hover:shadow-md hover:border-gold-300 transition-all duration-300 h-full flex flex-col justify-between relative overflow-hidden">
        
        {/* Background Decoration */}
        <div className={`absolute top-0 right-0 w-24 h-24 bg-${colorClass}-50 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110`}></div>

        <div className="relative z-10 flex justify-between items-start mb-4">
            <div className={`p-3 rounded-md ${colorClass === 'gold' ? 'bg-amber-100 text-amber-700' : `bg-${colorClass}-100 text-${colorClass}-700`}`}>
                <Icon size={24} />
            </div>
            {subText && <span className="text-xs font-medium text-gray-400 bg-gray-50 px-2 py-1 rounded">{subText}</span>}
        </div>

        <div className="relative z-10">
            <h3 className="text-3xl font-bold text-gray-900 font-sans tracking-tight mb-1 group-hover:text-gold-600 transition-colors">{value}</h3>
            <p className="text-sm font-medium text-gray-500 uppercase tracking-wide">{title}</p>
        </div>
    </div>
  </Link>
);

const AdminDashboardPage = () => {
  const [stats, setStats] = useState({ 
    today_count: 0, 
    pending_count: 0, 
    vip_pax: 0,
  });
  const [recentBookings, setRecentBookings] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const fetchDashboardData = async () => {
      const token = localStorage.getItem('accessToken');
      try {
        const response = await fetch(`${BACKEND_URL}/api/reservations/dashboard/`, {
          headers: { 'Authorization': `Bearer ${token}` }
        });
        
        if (response.ok) {
            const data = await response.json();
            setStats(data.stats);
            setRecentBookings(data.recent_bookings);
        }
      } catch (error) {
        console.error("Failed to fetch dashboard stats:", error);
      } finally {
        setLoading(false);
      }
    };
    fetchDashboardData();
  }, []);

  return (
    <div className="space-y-8">
      
      {/* 1. UNIFIED HEADER */}
      <div className="flex justify-between items-end border-b border-gray-200 pb-6">
         <div>
            <h1 className="text-3xl font-bold text-gray-900 font-serif">Dashboard Overview</h1>
            <p className="text-gray-500 mt-1 text-sm">Real-time insights for {new Date().toLocaleDateString('en-US', { dateStyle: 'full' })}</p>
         </div>
      </div>

      {/* 2. KEY METRICS GRID */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
          
          {/* STAT 1: RESERVATIONS */}
          <StatCard 
             title="Today's Guests" 
             value={loading ? "..." : stats.today_count} 
             icon={Users} 
             colorClass="blue" 
             linkTo="/admin/bookings"
             subText="Reservations"
          />

          {/* STAT 2: PENDING */}
          <StatCard 
             title="Pending Actions" 
             value={loading ? "..." : stats.pending_count} 
             icon={AlertCircle} 
             colorClass="red" 
             linkTo="/admin/bookings"
             subText="Urgent"
          />
          
          {/* LINK 1: PHONE BOOK */}
          <Link to="/admin/customers" className="group block h-full">
            <div className="bg-white p-6 rounded-lg border border-gray-200 shadow-sm hover:shadow-md hover:border-gold-300 transition-all duration-300 h-full flex flex-col justify-between relative overflow-hidden">
                <div className="absolute top-0 right-0 w-24 h-24 bg-orange-50 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"></div>
                <div className="relative z-10 flex justify-between items-start mb-4">
                    <div className="p-3 rounded-md bg-orange-100 text-orange-700">
                        <Contact size={24} />
                    </div>
                </div>
                <div className="relative z-10">
                    <h3 className="text-3xl font-bold text-gray-900 font-sans tracking-tight mb-1 group-hover:text-gold-600 transition-colors">CRM</h3>
                    <p className="text-sm font-medium text-gray-500 uppercase tracking-wide">Phone Book</p>
                </div>
            </div>
          </Link>

          {/* LINK 2: MARKETING (Replaced Revenue) */}
          <Link to="/admin/marketing" className="group block h-full">
            <div className="bg-white p-6 rounded-lg border border-gray-200 shadow-sm hover:shadow-md hover:border-gold-300 transition-all duration-300 h-full flex flex-col justify-between relative overflow-hidden">
                <div className="absolute top-0 right-0 w-24 h-24 bg-purple-50 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"></div>
                <div className="relative z-10 flex justify-between items-start mb-4">
                    <div className="p-3 rounded-md bg-purple-100 text-purple-700">
                        <Megaphone size={24} />
                    </div>
                </div>
                <div className="relative z-10">
                    <h3 className="text-3xl font-bold text-gray-900 font-sans tracking-tight mb-1 group-hover:text-gold-600 transition-colors">Content</h3>
                    <p className="text-sm font-medium text-gray-500 uppercase tracking-wide">News & Promos</p>
                </div>
            </div>
          </Link>
      </div>

      {/* 3. RECENT ACTIVITY TABLE */}
      <div className="bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden">
          <div className="px-6 py-5 border-b border-gray-100 flex justify-between items-center bg-gray-50/50">
             <h3 className="font-bold text-gray-900 text-lg">Recent Reservations</h3>
             <Link to="/admin/bookings" className="text-sm font-medium text-gold-600 hover:text-gold-700 flex items-center gap-1">
                View All <ArrowRight size={14} />
             </Link>
          </div>
          
          <div className="divide-y divide-gray-100">
             {loading ? (
                <div className="p-8 text-center text-gray-400 animate-pulse text-sm">Loading data...</div>
             ) : recentBookings.length === 0 ? (
                <div className="p-8 text-center text-gray-400 text-sm">No new bookings today.</div>
             ) : (
                recentBookings.map((booking) => (
                   <div key={booking.id} className="grid grid-cols-12 gap-4 px-6 py-4 hover:bg-gray-50 transition-colors items-center">
                      
                      {/* Customer */}
                      <div className="col-span-4">
                         <p className="font-bold text-gray-900 text-sm">{booking.customer_name}</p>
                         <p className="text-xs text-gray-500 font-medium">{booking.customer_contact}</p>
                      </div>

                      {/* Details */}
                      <div className="col-span-4">
                         <div className="flex items-center gap-2">
                            <span className="text-[10px] font-bold bg-gray-100 text-gray-700 px-2 py-0.5 rounded uppercase tracking-wide">{booking.time}</span>
                            <span className="text-xs text-gray-600 font-medium">{booking.pax} Pax</span>
                         </div>
                         <p className="text-xs text-gray-500 mt-1 font-medium">{booking.room_name || 'Main Hall'}</p>
                      </div>

                      {/* Status */}
                      <div className="col-span-3">
                         <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-[10px] font-bold uppercase tracking-wide border
                            ${booking.status === 'PENDING' ? 'bg-yellow-50 text-yellow-700 border-yellow-200' : 
                              booking.status === 'CONFIRMED' ? 'bg-green-50 text-green-700 border-green-200' : 
                              'bg-red-50 text-red-700 border-red-200'}`}>
                            {booking.status}
                         </span>
                      </div>

                      {/* Action */}
                      <div className="col-span-1 text-right">
                         <Link to="/admin/bookings" className="text-gray-300 hover:text-gold-600">
                            <ArrowRight size={18} />
                         </Link>
                      </div>
                   </div>
                ))
             )}
          </div>
      </div>
    </div>
  );
};

export default AdminDashboardPage;

import React from 'react';
import { motion } from 'framer-motion';
import { Link } from 'react-router-dom';
import logo from '../../../assets/images/goldenbaylogo2.svg';

const HomePage = () => {
  const containerVariants = {
    hidden: { opacity: 0 },
    visible: { opacity: 1, transition: { staggerChildren: 0.4, delayChildren: 0.2 } },
  };

  const itemVariants = {
    hidden: { opacity: 0, y: 20 },
    visible: { opacity: 1, y: 0, transition: { duration: 1, ease: "easeOut" } },
  };

  const footerVariants = {
    hidden: { opacity: 0 },
    visible: { opacity: 1, transition: { delay: 1.6, duration: 1.2 } },
  };

  return (
    // FORCE DARK BACKGROUND
    <div className="relative flex flex-col items-center justify-center h-screen bg-black overflow-hidden">
      
      {/* Background Video */}
      <video
        autoPlay
        loop
        muted
        playsInline
        className="absolute z-0 w-auto min-w-full min-h-full max-w-none object-cover pointer-events-none"
      >
        <source src="/videos/hero-background.mp4" type="video/mp4" />
      </video>

      {/* Dark Overlay - Always Dark */}
      <div className="absolute z-10 inset-0 bg-black/50"></div>

      {/* Main Content */}
      <motion.div 
        variants={containerVariants}
        initial="hidden"
        animate="visible"
        className="relative z-20 text-center flex flex-col items-center"
      >
        <motion.div variants={itemVariants}>
          <Link to="/" className="mb-4 transition-transform duration-700 hover:scale-105 block">
            <img 
              src={logo} 
              alt="Golden Bay Logo" 
              className="h-64 md:h-[28rem] w-auto drop-shadow-[0_0_30px_rgba(212,175,55,0.3)]" 
            />
          </Link>
        </motion.div>

        <motion.div variants={itemVariants}>
          <Link to="/menu">
            <button className="px-16 py-4 border border-gold-400 text-gold-400 hover:bg-gold-400 hover:text-black transition-all duration-500 tracking-[0.4em] text-sm rounded-md uppercase bg-black/20 backdrop-blur-sm">
              Enter Experience
            </button>
          </Link>
        </motion.div>
      </motion.div>

      {/* Bottom Gradient - Always Black */}
      <div className="absolute inset-x-0 bottom-0 h-40 bg-gradient-to-t from-black via-black/40 to-transparent z-10 pointer-events-none"></div>

      {/* Footer - Always Light Text */}
      <motion.footer 
        variants={footerVariants}
        initial="hidden"
        animate="visible"
        className="absolute bottom-8 w-full z-20 px-12 flex flex-col md:flex-row items-center text-gold-400 text-xs tracking-[0.3em] uppercase font-light"
      >
        <div className="md:w-1/3 mb-6 md:mb-0 order-2 md:order-1 text-center md:text-left opacity-70">
          <p className="leading-relaxed">
            Lot 3&4 Block A2, CBP, <br className="hidden md:block" /> Diosdado Macapagal Blvd, Pasay
          </p>
        </div>

        <div className="md:w-1/3 flex justify-center gap-8 mb-6 md:mb-0 order-1 md:order-2">
          <a href="https://www.instagram.com/goldenbayseafoods/" target="_blank" rel="noopener noreferrer" className="hover:text-white hover:scale-110 transition-all duration-300">Instagram</a>
          <a href="/reservations" className="hover:text-white hover:scale-110 transition-all duration-300">Reservations</a>
          <a href="/contact" className="hover:text-white hover:scale-110 transition-all duration-300">Contact</a>
        </div>

        <div className="md:w-1/3 order-3 text-center md:text-right opacity-70">
          <p>¬© {new Date().getFullYear()} Golden Bay Fresh Seafood</p>
        </div>
      </motion.footer>
    </div>
  );
};

export default HomePage;

import React, { useState, useEffect } from 'react';
import { motion } from 'framer-motion';
import { Link } from 'react-router-dom';
import logo from '../../../assets/images/goldenbaylogo.svg'; 
import heroimage from '../../../assets/images/heroimage.webp'; 
import { FaFacebookF, FaInstagram, FaYoutube } from 'react-icons/fa';

const BACKEND_URL = "http://127.0.0.1:8000";

const MenuPage = () => {
  const [menuData, setMenuData] = useState([]);
  const [activeTab, setActiveTab] = useState("All");
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    const fetchMenu = async () => {
      try {
        const response = await fetch(`${BACKEND_URL}/api/menu/`);
        if (!response.ok) throw new Error('Failed to fetch menu data');
        const data = await response.json();
        
        // FIX: Sort items naturally within each category
        const sortedData = data.map(category => {
            const sortedItems = [...category.items].sort((a, b) => {
                // If both have codes, sort by code naturally
                if (a.code && b.code) {
                    return a.code.localeCompare(b.code, undefined, { numeric: true, sensitivity: 'base' });
                }
                // Fallback to name sorting if no code
                return a.name.localeCompare(b.name);
            });
            return { ...category, items: sortedItems };
        });

        setMenuData(sortedData);
        setLoading(false);
      } catch (err) {
        console.error(err);
        setError("Unable to load menu. Please try again later.");
        setLoading(false);
      }
    };
    fetchMenu();
  }, []);

  const categories = ["All", ...menuData.map(cat => cat.name)];

  const displayedCategories = activeTab === "All" 
    ? menuData 
    : menuData.filter(cat => cat.name === activeTab);

  if (loading) {
    return (
      <div className="min-h-screen bg-cream-50 flex items-center justify-center text-gold-600 font-serif tracking-widest uppercase animate-pulse">
        Loading Exquisite Dishes...
      </div>
    );
  }

  if (error) {
    return (
      <div className="min-h-screen bg-cream-50 flex items-center justify-center text-red-500 font-sans">
        {error}
      </div>
    );
  }

  // --- HELPER COMPONENT FOR LIVE SEAFOOD ---
  const LiveSeafoodCard = ({ item }) => (
    <motion.div 
      layout
      initial={{ opacity: 0 }}
      whileInView={{ opacity: 1 }}
      className="group bg-white border border-gray-200 hover:border-gold-400/50 transition-all duration-500 rounded-sm overflow-hidden flex flex-col shadow-sm hover:shadow-lg"
    >
        {/* Standard Image Area */}
        <div className="aspect-[4/3] overflow-hidden relative bg-gray-50 border-b border-gray-100">
            {item.image ? (
                <img src={`${BACKEND_URL}${item.image}`} className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105" alt={item.name} />
            ) : (
                <div className="w-full h-full flex flex-col items-center justify-center opacity-10">
                    <img src={logo} className="h-20 w-auto grayscale" alt="placeholder" />
                </div>
            )}
            <div className="absolute top-0 right-0 bg-gold-600 text-white px-3 py-1 text-[10px] font-bold uppercase tracking-widest z-10">
                Live Catch
            </div>
        </div>

        {/* Content */}
        <div className="p-6 flex-1 flex flex-col">
            <div className="mb-4 text-center">
                <h3 className="text-2xl font-serif font-bold text-gray-900 uppercase tracking-widest">{item.name}</h3>
                <h4 className="text-lg text-gold-600 font-chinese mt-1">{item.name_zh}</h4>
                <p className="text-base text-gray-400 mt-2 uppercase tracking-widest">Seasonal Price</p>
            </div>

            <div className="h-px w-full bg-gray-100 mb-4"></div>

            {/* Cooking Methods List */}
            <div className="flex-1">
                <p className="text-xs font-bold text-gray-500 uppercase tracking-widest mb-3 text-center">Available Cooking Styles</p>
                <div className="flex flex-wrap justify-center gap-2">
                    {item.cooking_methods.map((method) => (
                        <span key={method.id} className="bg-gray-50 border border-gray-200 text-gray-600 px-3 py-1 text-xs rounded-full hover:bg-gold-50 hover:text-gold-700 hover:border-gold-200 transition-colors cursor-default">
                            {method.name}
                        </span>
                    ))}
                </div>
            </div>
        </div>
    </motion.div>
  );

  return (
    <div className="min-h-screen bg-cream-50 text-gray-900 overflow-x-hidden font-sans">
      
      {/* --- HERO SECTION --- */}
      <div className="relative h-[40vh] w-full flex items-center justify-center pt-24 bg-black">
        <div className="absolute inset-0 opacity-60">
          <img src={heroimage} className="w-full h-full object-cover" alt="Interior" />
          <div className="absolute inset-0 bg-gradient-to-b from-black/60 via-transparent to-cream-50"></div>
        </div>
        <div className="relative z-10 text-center">
          <Link to="/" className="text-xs tracking-[0.4em] uppercase mb-6 text-white hover:text-gold-400 transition-colors block">‚Üê Back to Experience</Link>
          <h1 className="text-5xl md:text-5xl font-serif tracking-widest uppercase text-white drop-shadow-md">Our Menu</h1>
          <div className="h-[1px] w-24 bg-gold-400 mt-8 mx-auto"></div>
        </div>
      </div>

      <div className="px-6 py-12 md:px-24">
        
        {/* --- CATEGORY TABS --- */}
        <div className="flex flex-wrap justify-center gap-x-8 gap-y-4 mb-20">
          {categories.map(cat => (
            <button
              key={cat}
              onClick={() => setActiveTab(cat)}
              className={`text-sm md:text-base tracking-[0.2em] uppercase transition-all duration-300 relative pb-2 ${
                activeTab === cat 
                ? "text-gold-600 font-bold" 
                : "text-gray-400 hover:text-gold-600"
              }`}
            >
              {cat}
              {activeTab === cat && (
                <motion.div layoutId="underline" className="absolute bottom-0 left-0 w-full h-[1px] bg-gold-600" />
              )}
            </button>
          ))}
        </div>

        {/* --- MENU DISPLAY --- */}
        {displayedCategories.map((category) => (
          <div key={category.id} className="mb-24">
            {/* Category Header */}
            <motion.div 
              initial={{ opacity: 0, y: 20 }}
              whileInView={{ opacity: 1, y: 0 }}
              viewport={{ once: true }}
              className="mb-10 text-center"
            >
              <h2 className="text-3xl font-serif text-gray-900 uppercase tracking-widest">{category.name}</h2>
              <h3 className="text-3xl font-chinese text-gold-600 mt-1">{category.name_zh}</h3>
            </motion.div>

            {/* Items Grid */}
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
              {category.items.map((item) => (
                (item.cooking_methods && item.cooking_methods.length > 0) 
                    ? <LiveSeafoodCard key={item.id} item={item} />
                : <motion.div
                    key={item.id}
                    layout
                    initial={{ opacity: 0 }}
                    whileInView={{ opacity: 1 }}
                    viewport={{ once: true }}
                    className="group bg-white border border-gray-200 hover:border-gold-400/50 transition-all duration-500 rounded-sm overflow-hidden flex flex-col shadow-sm hover:shadow-lg"
                  >
                    {/* Image Area */}
                    <div className="aspect-[4/3] overflow-hidden relative bg-gray-50 border-b border-gray-100">
                      {item.image ? (
                        <img 
                          src={`${BACKEND_URL}${item.image}`} 
                          className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105" 
                          alt={item.name} 
                        />
                      ) : (
                        <div className="w-full h-full flex flex-col items-center justify-center opacity-10">
                           <img src={logo} className="h-20 w-auto grayscale" alt="placeholder" />
                        </div>
                      )}
                      <div className="absolute top-0 right-0 bg-white/95 px-4 py-2 text-xs font-bold text-gray-900 border-l border-b border-gray-100 shadow-sm z-10 tracking-widest">
                        {item.code}
                      </div>
                    </div>

                    {/* Content Area */}
                    <div className="p-6 flex-1 flex flex-col">
                      <div className="mb-4">
                        <h3 className="text-xl font-bold text-gray-900 uppercase tracking-wider group-hover:text-gold-600 transition-colors leading-tight">
                          {item.name}
                        </h3>
                        <h4 className="text-xl text-gray-500 font-chinese mt-1 font-medium">{item.name_zh}</h4>
                      </div>
                      
                      {item.description && (
                          <p className="text-sm text-gray-400 font-light mb-4 line-clamp-2">{item.description}</p>
                      )}

                      <div className="mt-auto pt-4 border-t border-gray-100 space-y-2">
                        {item.prices.map((price) => (
                          <div key={price.id} className="flex justify-between items-center text-sm font-light tracking-wide">
                            <span className="text-gray-500 uppercase text-lg font-bold tracking-widest">{price.size === 'Regular' ? 'Standard' : price.size}</span>
                            <span className="text-gray-900 text-base font-bold font-serif">
                              {price.is_seasonal 
                                ? <span className="italic text-gold-600 text-sm font-sans font-normal">Market Price</span> 
                                : `‚Ç± ${parseFloat(price.price).toLocaleString()}`
                              }
                            </span>
                          </div>
                        ))}
                      </div>
                    </div>
                  </motion.div>
              ))}
            </div>
          </div>
        ))}
      </div>
    </div>
  );
};

export default MenuPage;

import React, { useState, useEffect, useRef } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import Calendar from 'react-calendar';
import 'react-calendar/dist/Calendar.css'; 
import { format } from 'date-fns';
import { Users, CheckCircle, MessageSquare } from 'lucide-react';
import wechatQr from '../../../assets/images/goldenbaylogo.svg'; 
import heroimage from '../../../assets/images/heroimage4.webp'; // Banner Image
import { Link } from 'react-router-dom';

const BACKEND_URL = "http://127.0.0.1:8000";

const ReservationPage = () => {
  // ... state ...
  const [date, setDate] = useState(new Date());
  const [session, setSession] = useState('LUNCH'); 
  const [bookingType, setBookingType] = useState('VIP'); 
  const [isWeChat, setIsWeChat] = useState(false);
  const [selectedTime, setSelectedTime] = useState(''); 
  const [rooms, setRooms] = useState([]);
  const [loading, setLoading] = useState(false);
  const [selectedRoom, setSelectedRoom] = useState(null);
  const [formData, setFormData] = useState({ name: '', contact: '', email: '', pax: 2, message: '' });
  const [submitStatus, setSubmitStatus] = useState(null); 
  const formRef = useRef(null);

  // ... keep existing functions (generateTimeSlots, useEffects, handleSubmit) ...
  const generateTimeSlots = (sessionType) => {
    const slots = [];
    const startHour = sessionType === 'LUNCH' ? 11 : 17; 
    const endHour = sessionType === 'LUNCH' ? 14 : 21;    

    for (let hour = startHour; hour <= endHour; hour++) {
      const displayHour = hour > 12 ? hour - 12 : hour;
      const ampm = hour >= 12 ? 'PM' : 'AM';
      slots.push({ value: `${hour}:00:00`, label: `${displayHour}:00 ${ampm}` });
      if (hour !== endHour) {
          slots.push({ value: `${hour}:30:00`, label: `${displayHour}:30 ${ampm}` });
      }
    }
    return slots;
  };

  useEffect(() => { setSelectedTime(''); }, [session]);

  useEffect(() => {
    const fetchAvailability = async () => {
      setLoading(true);
      setSelectedRoom(null); 
      try {
        const formattedDate = format(date, 'yyyy-MM-dd');
        const response = await fetch(`${BACKEND_URL}/api/reservations/check/?date=${formattedDate}&session=${session}`);
        const data = await response.json();
        const sortedData = data.sort((a, b) => {
            return a.name.localeCompare(b.name, undefined, { numeric: true, sensitivity: 'base' });
        });
        setRooms(sortedData);
      } catch (err) {
        console.error("API Error:", err);
      } finally {
        setLoading(false);
      }
    };
    fetchAvailability();
  }, [date, session]);

  useEffect(() => {
    if (selectedRoom) {
        setTimeout(() => {
            if (formRef.current) {
                formRef.current.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }, 100); 
    }
  }, [selectedRoom]);

  const handleSubmit = async (e) => {
    e.preventDefault();

    if (!formData.name || !formData.contact || !formData.pax) {
       alert("Please fill in all required fields.");
       return; 
    }
    
    setSubmitStatus('loading');

    const payload = {
        customer_name: formData.name,
        customer_contact: formData.contact,
        customer_email: formData.email,
        date: format(date, 'yyyy-MM-dd'),
        session: session,
        time: selectedTime, 
        pax: formData.pax,
        dining_area: selectedRoom, 
        special_request: formData.message,
        status: 'PENDING'
    };

    try {
        const res = await fetch(`${BACKEND_URL}/api/reservations/create/`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload),
        });

        if (res.ok) {
            setSubmitStatus('success');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        } else {
            const errData = await res.json();
            alert(JSON.stringify(errData)); 
            setSubmitStatus('error');
        }
    } catch (error) {
        setSubmitStatus('error');
    }
  };

  // ... keep WeChat view and Success View logic (omitted here for brevity, keep them!) ...
  if (isWeChat) {
    return (
      <div className="min-h-screen bg-cream-50 text-gray-900 flex flex-col items-center justify-center p-8 text-center pt-32">
        <h2 className="text-3xl font-serif text-gold-600 mb-6">Book via WeChat</h2>
        <div className="bg-white p-4 rounded-lg shadow-lg">
            <img src={wechatQr} alt="WeChat QR" className="w-64 h-64 object-contain" />
        </div>
        <p className="mt-6 text-gray-500 max-w-md">Scan this code to chat directly with our reservation specialist.</p>
        <button onClick={() => setIsWeChat(false)} className="mt-8 text-sm tracking-widest uppercase border-b border-gold-600 pb-1 hover:text-gold-600">
          Return to Web Booking
        </button>
      </div>
    );
  }

  if (submitStatus === 'success') {
      return (
          <div className="min-h-screen bg-cream-50 flex flex-col items-center justify-center text-gray-900 text-center p-8 pt-24">
              <div className="bg-white border border-gold-400/50 p-10 max-w-lg w-full shadow-xl">
                  <div className="flex justify-center mb-6">
                      <div className="w-20 h-20 bg-green-500/10 rounded-full flex items-center justify-center border border-green-500/50">
                        <CheckCircle className="w-10 h-10 text-green-600" />
                      </div>
                  </div>
                  <h1 className="text-3xl font-serif text-gold-600 mb-2">Request Pending</h1>
                  <p className="text-gray-500 mb-8 text-sm uppercase tracking-widest">We are reviewing your details</p>
                  <p className="text-gray-500 text-sm mb-8 leading-relaxed">
                      Please allow up to 30 minutes for confirmation.
                  </p>
                  <Link to="/" className="block w-full bg-gold-600 text-white font-bold uppercase tracking-widest py-4 hover:bg-gold-500 transition-colors">
                      Return to Home
                  </Link>
              </div>
          </div>
      )
  }

  return (
    <div className="min-h-screen bg-cream-50 text-gray-900 font-sans">
      
      {/* --- STANDARDIZED HERO BANNER --- */}
      <div className="relative h-[40vh] w-full flex items-center justify-center pt-24 bg-black">
        <div className="absolute inset-0 opacity-60">
          <img src={heroimage} className="w-full h-full object-cover" alt="Reservations" />
          <div className="absolute inset-0 bg-gradient-to-b from-black/60 via-transparent to-cream-50"></div>
        </div>
        <div className="relative z-10 text-center">
          <Link to="/" className="text-xs tracking-[0.4em] uppercase mb-6 text-white hover:text-gold-400 transition-colors block">‚Üê Back to Experience</Link>
          <h1 className="text-5xl md:text-5xl font-serif tracking-widest uppercase text-white drop-shadow-md">Reservations</h1>
          <div className="h-[1px] w-24 bg-gold-400 mt-8 mx-auto"></div>
        </div>
      </div>

      <div className="px-4 md:px-12 py-12">
         {/* ... (Keep the grid logic for the calendar and rooms exactly as before) ... */}
         {/* Just copy/paste the <div className="max-w-6xl ..."> grid content here */}
         <div className="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-12">
            
            {/* LEFT COLUMN: Controls */}
            <div className="lg:col-span-4 space-y-8">
              <div>
                <h2 className="text-2xl font-serif text-gold-600 mb-2">Details</h2>
                <p className="text-gray-500 text-sm">Select your preferred date and experience.</p>
              </div>

              <div className="bg-white p-4 rounded-sm border border-gray-200 shadow-sm">
                <style>{`
                  .react-calendar { background: transparent; border: none; font-family: inherit; width: 100%; }
                  .react-calendar__tile { color: inherit; } 
                  .react-calendar__tile--active { background: #D4AF37 !important; color: white !important; }
                  .react-calendar__tile:enabled:hover { background: #f3f4f6; }
                  .react-calendar__navigation button { color: #C5A028; font-size: 1.2rem; }
                `}</style>
                <Calendar onChange={setDate} value={date} minDate={new Date()} className="text-sm" />
              </div>

              {/* ... (Rest of left column buttons) ... */}
              <div className="flex bg-white p-1 rounded-md border border-gray-200 shadow-sm">
                {['LUNCH', 'DINNER'].map((s) => (
                    <button key={s} onClick={() => setSession(s)}
                        className={`flex-1 py-3 text-xs font-bold tracking-widest uppercase rounded-sm transition-all ${
                            session === s 
                            ? 'bg-gold-500 text-white' 
                            : 'text-gray-400 hover:text-gold-600'
                        }`}>
                        {s}
                    </button>
                ))}
              </div>
              
              <button onClick={() => setIsWeChat(true)}
                className="w-full flex items-center justify-center gap-3 py-4 border border-green-600/30 text-green-600 hover:bg-green-50 transition-all rounded-sm uppercase tracking-widest text-xs font-bold">
                <MessageSquare size={16} /> Book via WeChat
              </button>
            </div>

            {/* RIGHT COLUMN: Rooms & Form */}
            <div className="lg:col-span-8">
                 {/* ... (Keep existing room grid and form logic) ... */}
                 <div className="flex border-b border-gray-200 mb-8">
                    {['VIP', 'HALL'].map((type) => (
                        <button key={type} onClick={() => { setBookingType(type); setSelectedRoom(null); }}
                            className={`mr-8 pb-4 text-sm tracking-[0.2em] uppercase transition-all ${
                                bookingType === type 
                                ? 'text-gold-600 border-b-2 border-gold-600 font-bold' 
                                : 'text-gray-400 hover:text-gray-900'
                            }`}>
                            {type === 'VIP' ? 'VIP Private Rooms' : 'Ala Carte Dining'}
                        </button>
                    ))}
                </div>

                {loading ? (
                    <div className="h-64 flex items-center justify-center text-gray-500 animate-pulse">Checking availability...</div>
                ) : (
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-10">
                    {rooms.filter(r => {
                            if (bookingType === 'VIP') return r.area_type === 'VIP';
                            return r.area_type === 'HALL';
                        }).map((room) => (
                        <motion.div
                            key={room.id}
                            initial={{ opacity: 0, y: 10 }}
                            animate={{ opacity: 1, y: 0 }}
                            onClick={() => room.is_available && setSelectedRoom(room.id)}
                            className={`p-6 border rounded-sm cursor-pointer transition-all relative overflow-hidden shadow-sm ${
                                selectedRoom === room.id 
                                ? 'border-gold-400 bg-gold-50 shadow-md ring-1 ring-gold-400' 
                                : room.is_available 
                                    ? 'border-gray-200 hover:border-gold-400/50 bg-white' 
                                    : 'border-gray-100 bg-gray-50 opacity-60 cursor-not-allowed'
                            }`}
                        >
                            <div className="flex justify-between items-start">
                                <div>
                                    <h3 className={`font-serif text-xl ${selectedRoom === room.id ? 'text-gold-600' : 'text-gray-900'}`}>{room.name}</h3>
                                    <p className="text-gray-500 text-sm mt-1">{room.description || 'Golden Bay Experience'}</p>
                                    <div className="flex items-center gap-2 mt-4 text-xs text-gray-400 uppercase tracking-wider font-sans">
                                        <Users size={14} className="text-gold-600" /> 
                                        {room.area_type === 'HALL' 
                                            ? <span>Seats Left: <span className="text-gray-900 font-bold">{room.remaining_capacity}</span> / {room.capacity}</span>
                                            : <span>Max Capacity: {room.capacity} Pax</span>
                                        }
                                    </div>
                                </div>
                                {selectedRoom === room.id ? <CheckCircle className="text-gold-600" size={24} /> : !room.is_available ? <span className="text-red-500 text-[10px] font-bold uppercase border border-red-200 px-2 py-1 rounded bg-red-50">{room.area_type === 'VIP' ? 'Booked' : 'Full'}</span> : null}
                            </div>
                        </motion.div>
                    ))}
                </div>
                )}

                <AnimatePresence>
                    {selectedRoom && (
                        <motion.div ref={formRef}
                            initial={{ opacity: 0, height: 0 }}
                            animate={{ opacity: 1, height: 'auto' }}
                            exit={{ opacity: 0, height: 0 }}
                        >
                            <form onSubmit={handleSubmit} className="bg-white p-8 rounded-sm border-t-4 border-gold-400 shadow-xl">
                               {/* ... (Keep form content exactly as before) ... */}
                               <h3 className="text-lg font-serif text-gray-900 mb-6">Confirm Details</h3>
                               <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                   <div>
                                       <label className="block text-xs uppercase tracking-widest text-gray-500 mb-2">Full Name</label>
                                       <input required type="text" className="w-full bg-gray-50 border border-gray-200 p-3 text-gray-900 focus:border-gold-400 outline-none transition-colors" onChange={e => setFormData({...formData, name: e.target.value})} />
                                   </div>
                                   <div>
                                       <label className="block text-xs uppercase tracking-widest text-gray-500 mb-2">Contact / Viber</label>
                                       <input required type="text" className="w-full bg-gray-50 border border-gray-200 p-3 text-gray-900 focus:border-gold-400 outline-none transition-colors" onChange={e => setFormData({...formData, contact: e.target.value})} />
                                   </div>
                               </div>
                               {/* ... (rest of form inputs: Email, Pax, Time, Notes) ... */}
                               <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                    <div>
                                        <label className="block text-xs uppercase tracking-widest text-gray-500 mb-2">Email (Optional)</label>
                                        <input type="email" className="w-full bg-gray-50 border border-gray-200 p-3 text-gray-900 focus:border-gold-400 outline-none transition-colors" onChange={e => setFormData({...formData, email: e.target.value})} />
                                    </div>
                                    <div>
                                        <label className="block text-xs uppercase tracking-widest text-gray-500 mb-2">Number of Guests</label>
                                        <input required type="number" min="1" className="w-full bg-gray-50 border border-gray-200 p-3 text-gray-900 focus:border-gold-400 outline-none transition-colors" onChange={e => setFormData({...formData, pax: e.target.value})} />
                                    </div>
                                </div>
                                <div className="mb-6">
                                    <label className="block text-xs uppercase tracking-widest text-gray-500 mb-2">Arrival Time ({session})</label>
                                    <select required className="w-full bg-gray-50 border border-gray-200 p-3 text-gray-900 focus:border-gold-400 outline-none transition-colors" value={selectedTime} onChange={(e) => setSelectedTime(e.target.value)}>
                                        <option value="" disabled>Select Preferred Time</option>
                                        {generateTimeSlots(session).map((slot, index) => (
                                            <option key={index} value={slot.value}>{slot.label}</option>
                                        ))}
                                    </select>
                                </div>
                                <div className="mb-8">
                                    <label className="block text-xs uppercase tracking-widest text-gray-500 mb-2">Special Request / Menu Preferences</label>
                                    <textarea className="w-full bg-gray-50 border border-gray-200 p-3 text-gray-900 focus:border-gold-400 outline-none transition-colors h-24 resize-none" onChange={e => setFormData({...formData, message: e.target.value})}></textarea>
                                </div>

                               <button type="submit" disabled={submitStatus === 'loading'} className="w-full bg-gold-500 text-white font-bold uppercase tracking-widest py-4 hover:bg-black transition-colors disabled:opacity-50">
                                   {submitStatus === 'loading' ? 'Processing Request...' : 'Request Reservation'}
                               </button>
                            </form>
                        </motion.div>
                    )}
                </AnimatePresence>
            </div>
         </div>
      </div>
    </div>
  );
};

export default ReservationPage;

import React, { useState, useEffect } from 'react';
import { Search, Plus, Check, X, Phone } from 'lucide-react';
import ReservationForm from '../../../components/reservations/ReservationForm';

const BACKEND_URL = "http://127.0.0.1:8000";

const BookingManager = () => {
  const [bookings, setBookings] = useState([]);
  const [filter, setFilter] = useState('ALL'); 
  const [showManualForm, setShowManualForm] = useState(false);

  const fetchBookings = async () => {
    const token = localStorage.getItem('accessToken'); 
    try {
      const res = await fetch(`${BACKEND_URL}/api/reservations/manage/`, {
        headers: {
            'Authorization': `Bearer ${token}` 
        }
      });
      if (res.status === 401) window.location.href = '/login'; 
      const data = await res.json();
      setBookings(data);
    } catch (err) {
      console.error("Failed to fetch bookings", err);
    }
  };

  useEffect(() => {
    fetchBookings();
    const interval = setInterval(() => { fetchBookings(); }, 30000);
    return () => clearInterval(interval); 
  }, []);

  const updateStatus = async (id, newStatus) => {
    if (!window.confirm(`Are you sure you want to mark this as ${newStatus}?`)) return;
    const token = localStorage.getItem('accessToken'); 

    try {
      const res = await fetch(`${BACKEND_URL}/api/reservations/manage/${id}/`, {
        method: 'PATCH',
        headers: { 
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${token}` 
        },
        body: JSON.stringify({ status: newStatus })
      });
      
      if (res.status === 401) { 
          window.location.href = '/login';
          return;
      }
      if (res.ok) fetchBookings(); 
    } catch (err) {
      alert("Error updating status");
    }
  };

  const filteredBookings = bookings.filter(b => 
    filter === 'ALL' ? true : b.status === filter
  );

  const isStale = (bookingDate, status) => {
    if (status !== 'PENDING') return false;
    const created = new Date(bookingDate); 
    const now = new Date();
    const diffInHours = (now - created) / 1000 / 60 / 60;
    return diffInHours > 2; 
  };

  return (
    <div className="space-y-8">
      
      {/* 1. UNIFIED HEADER */}
      <div className="flex justify-between items-end border-b border-gray-200 pb-6">
        <div>
            <h1 className="text-3xl font-bold text-gray-900 font-serif">Booking Management</h1>
            <p className="text-gray-500 mt-1 text-sm">Manage, confirm, and track all reservations.</p>
        </div>
        <button 
          onClick={() => setShowManualForm(true)}
          className="bg-gold-600 text-white px-6 py-2.5 font-bold uppercase tracking-widest text-xs rounded shadow-md hover:bg-gold-700 transition-all flex items-center gap-2"
        >
          <Plus size={16} /> Manual Booking
        </button>
      </div>

      {/* 2. FILTERS */}
      <div className="flex gap-2">
        {['ALL', 'PENDING', 'CONFIRMED', 'CANCELLED'].map(f => (
          <button
            key={f}
            onClick={() => setFilter(f)}
            className={`text-xs font-bold uppercase tracking-widest px-4 py-2.5 rounded-sm transition-all border ${
              filter === f 
              ? 'bg-gray-900 text-white border-gray-900 shadow-md' 
              : 'bg-white text-gray-500 border-gray-200 hover:bg-gray-50 hover:text-gray-900'
            }`}
          >
            {f}
          </button>
        ))}
      </div>

      {/* 3. TABLE */}
      <div className="bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm">
        <table className="w-full text-left">
          <thead className="bg-gray-50 border-b border-gray-200 text-gray-500 uppercase tracking-widest text-xs font-semibold">
            <tr>
              <th className="p-5 font-bold">ID</th>
              <th className="p-5 font-bold">Customer</th>
              <th className="p-5 font-bold">Date / Time</th>
              <th className="p-5 font-bold">Details</th>
              <th className="p-5 font-bold">Status</th>
              <th className="p-5 font-bold text-right">Actions</th>
            </tr>
          </thead>
          <tbody className="divide-y divide-gray-100">
            {filteredBookings.map((b) => (
              <tr 
                key={b.id} 
                className={`transition-colors ${
                    isStale(b.created_at, b.status) 
                    ? 'bg-red-50' 
                    : 'hover:bg-gray-50'
                }`}
              >
                <td className="p-5 text-gray-400 font-mono text-sm">#{b.id}</td>
                
                <td className="p-5">
                  <div className="font-bold text-gray-900 text-sm">{b.customer_name}</div>
                  <div className="text-xs text-gray-500 flex gap-2 mt-1 font-medium items-center">
                    <Phone size={12} className="text-gray-400"/> {b.customer_contact}
                  </div>
                </td>

                <td className="p-5">
                  <div className="text-gold-700 font-bold text-sm">{b.date}</div>
                  <div className="text-xs font-medium text-gray-600 mt-1">{b.time} <span className="text-gray-400 font-normal">({b.session})</span></div>
                </td>

                <td className="p-5">
                  <div className="text-gray-900 font-bold text-sm">
                    {b.room_name || 'Main Dining Hall'}
                  </div>
                  <div className="text-xs text-gray-500 mt-1 font-medium">{b.pax} Guests</div>
                </td>

                <td className="p-5">
                  <span className={`px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wide border ${
                    b.status === 'PENDING' ? 'text-yellow-700 bg-yellow-50 border-yellow-200' :
                    b.status === 'CONFIRMED' ? 'text-green-700 bg-green-50 border-green-200' :
                    'text-red-700 bg-red-50 border-red-200'
                  }`}>
                    {b.status}
                  </span>
                  {isStale(b.created_at, b.status) && (
                      <div className="text-[10px] text-red-500 mt-2 font-bold uppercase tracking-wide flex items-center gap-1">
                          <span className="w-1.5 h-1.5 rounded-full bg-red-500 animate-pulse"></span> Needs Action
                      </div>
                  )}
                </td>

                <td className="p-5 text-right">
                  {b.status !== 'CANCELLED' && (
                    <div className="flex justify-end gap-2">
                      {b.status === 'PENDING' && (
                        <button 
                          onClick={() => updateStatus(b.id, 'CONFIRMED')}
                          className="bg-green-50 text-green-600 p-2 rounded border border-green-200 hover:bg-green-100 transition-colors"
                          title="Confirm Booking"
                        >
                          <Check size={16} />
                        </button>
                      )}
                      <button 
                        onClick={() => updateStatus(b.id, 'CANCELLED')}
                        className="bg-red-50 text-red-600 p-2 rounded border border-red-200 hover:bg-red-100 transition-colors"
                        title="Cancel Booking"
                      >
                        <X size={16} />
                      </button>
                    </div>
                  )}
                </td>
              </tr>
            ))}
          </tbody>
        </table>
        
        {filteredBookings.length === 0 && (
            <div className="p-12 text-center text-gray-400 text-sm">No bookings found in this category.</div>
        )}
      </div>

      {/* Manual Booking Form Modal */}
      {showManualForm && (
        <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4">
            <div className="bg-white p-8 rounded-lg w-full max-w-lg relative shadow-2xl">
                <h2 className="text-2xl font-serif text-gray-900 mb-6 font-bold">Manual Staff Entry</h2>
                
                <ReservationForm 
                    isManualEntry={true}
                    date={new Date()} 
                    session="DINNER"  
                    selectedRoom={null} 
                    onSuccess={() => {
                        alert("Booking Created!");
                        setShowManualForm(false);
                        fetchBookings(); 
                    }}
                    onCancel={() => setShowManualForm(false)}
                />
            </div>
        </div>
      )}
    </div>
  );
};

export default BookingManager;

import React, { useState, useEffect } from 'react';
import { format } from 'date-fns';

const BACKEND_URL = "http://127.0.0.1:8000";

const ReservationForm = ({ 
    selectedRoom, // Passed from visual grid (Customer Mode)
    date, 
    session, // Default session passed from parent
    selectedTime, 
    isManualEntry = false, 
    onSuccess, 
    onCancel 
}) => {
    // --- STATE ---
    const [formData, setFormData] = useState({
        name: '',
        contact: '',
        email: '',
        pax: 2,
        message: ''
    });
    
    // --- ADMIN MANUAL ENTRY STATE ---
    const [manualDate, setManualDate] = useState(date ? format(date, 'yyyy-MM-dd') : format(new Date(), 'yyyy-MM-dd'));
    const [manualSession, setManualSession] = useState(session || 'LUNCH');
    const [manualTime, setManualTime] = useState(selectedTime || '');
    const [rooms, setRooms] = useState([]); 
    const [manualRoomId, setManualRoomId] = useState(''); 
    const [submitStatus, setSubmitStatus] = useState(null);

    // --- HELPER: Generate Time Slots (Same as Customer View) ---
    const generateTimeSlots = (sessionType) => {
        const slots = [];
        const startHour = sessionType === 'LUNCH' ? 11 : 17; 
        const endHour = sessionType === 'LUNCH' ? 14 : 22;     

        for (let hour = startHour; hour <= endHour; hour++) {
            const displayHour = hour > 12 ? hour - 12 : hour;
            const ampm = hour >= 12 ? 'PM' : 'AM';
            
            // Full hour
            slots.push({ value: `${hour}:00:00`, label: `${displayHour}:00 ${ampm}` });
            
            // Half hour (don't add half hour for the very last slot if it's closing time)
            if (hour !== endHour) {
                slots.push({ value: `${hour}:30:00`, label: `${displayHour}:30 ${ampm}` });
            }
        }
        return slots;
    };

    // --- EFFECT: Fetch Rooms & Reset Time when Date/Session Changes ---
    useEffect(() => {
        if (isManualEntry) {
            const fetchRooms = async () => {
                try {
                    const res = await fetch(`${BACKEND_URL}/api/reservations/check/?date=${manualDate}&session=${manualSession}`);
                    const data = await res.json();
                    setRooms(data);
                } catch (err) {
                    console.error("Failed to load rooms", err);
                }
            };
            fetchRooms();
            
            // Reset time and room selection when session changes to prevent invalid combos
            setManualTime(''); 
            setManualRoomId('');
        }
    }, [isManualEntry, manualDate, manualSession]);


    // --- SUBMIT HANDLER ---
    const handleSubmit = async (e) => {
        e.preventDefault();
        
        if (!formData.name || !formData.contact || !formData.pax) {
            alert("Please fill in Name, Contact, and Guests.");
            return;
        }

        const finalRoomId = isManualEntry ? manualRoomId : selectedRoom;
        if (!finalRoomId) {
            alert("Please select a Room or Dining Area.");
            return;
        }

        const finalTime = isManualEntry ? manualTime : selectedTime;
        if (!finalTime) {
            alert("Please select an arrival time.");
            return;
        }

        setSubmitStatus('loading');

        const payload = {
            customer_name: formData.name,
            customer_contact: formData.contact,
            customer_email: formData.email,
            date: isManualEntry ? manualDate : format(date, 'yyyy-MM-dd'),
            session: isManualEntry ? manualSession : session,
            time: finalTime,
            pax: formData.pax,
            dining_area: finalRoomId,
            special_request: formData.message,
            status: isManualEntry ? 'CONFIRMED' : 'PENDING'
        };

        try {
            const res = await fetch(`${BACKEND_URL}/api/reservations/create/`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload),
            });

            if (res.ok) {
                setSubmitStatus('success');
                if (onSuccess) onSuccess();
            } else {
                const errData = await res.json();
                const errorMessage = errData.non_field_errors 
                    ? errData.non_field_errors[0] 
                    : "Booking failed. Please check details.";
                alert(errorMessage);
                setSubmitStatus('error');
            }
        } catch (error) {
            alert("Network error. Please try again.");
            setSubmitStatus('error');
        }
    };

    // Styling
    const inputClass = "w-full bg-white border border-gray-300 p-2.5 text-gray-900 text-sm focus:border-gold-500 focus:ring-1 focus:ring-gold-500 outline-none rounded-sm transition-all shadow-sm";
    const labelClass = "block text-[10px] font-bold uppercase tracking-widest text-gray-500 mb-1";

    return (
        <form onSubmit={handleSubmit} className="text-left">
            
            {/* --- ADMIN ONLY: LOGISTICS --- */}
            {isManualEntry && (
                <div className="bg-gray-50 p-5 rounded-md border border-gray-200 mb-6">
                    <h3 className="text-gold-600 text-xs font-bold uppercase tracking-widest mb-3 border-b border-gray-200 pb-2">
                        Logistics
                    </h3>
                    
                    {/* Row 1: Date & Session Switcher */}
                    <div className="grid grid-cols-2 gap-4 mb-4">
                        <div>
                            <label className={labelClass}>Date</label>
                            <input 
                                type="date" required
                                className={inputClass}
                                value={manualDate}
                                onChange={e => setManualDate(e.target.value)}
                            />
                        </div>
                        <div>
                            <label className={labelClass}>Session</label>
                            <div className="flex rounded-sm overflow-hidden border border-gray-300">
                                <button
                                    type="button"
                                    onClick={() => setManualSession('LUNCH')}
                                    className={`flex-1 py-2 text-xs font-bold uppercase ${manualSession === 'LUNCH' ? 'bg-gold-500 text-white' : 'bg-white text-gray-500 hover:bg-gray-100'}`}
                                >
                                    Lunch
                                </button>
                                <div className="w-[1px] bg-gray-300"></div>
                                <button
                                    type="button"
                                    onClick={() => setManualSession('DINNER')}
                                    className={`flex-1 py-2 text-xs font-bold uppercase ${manualSession === 'DINNER' ? 'bg-black text-white' : 'bg-white text-gray-500 hover:bg-gray-100'}`}
                                >
                                    Dinner
                                </button>
                            </div>
                        </div>
                    </div>

                    {/* Row 2: Time & Room */}
                    <div className="grid grid-cols-2 gap-4">
                        <div>
                            <label className={labelClass}>Arrival Time</label>
                            <select 
                                required
                                className={inputClass}
                                value={manualTime}
                                onChange={e => setManualTime(e.target.value)}
                            >
                                <option value="" disabled>-- Select Time --</option>
                                {generateTimeSlots(manualSession).map((slot, index) => (
                                    <option key={index} value={slot.value}>{slot.label}</option>
                                ))}
                            </select>
                        </div>
                        <div>
                            <label className={labelClass}>Assign Table / Room</label>
                            <select 
                                required
                                className={inputClass}
                                value={manualRoomId}
                                onChange={e => setManualRoomId(e.target.value)}
                            >
                                <option value="" disabled>-- Select Area --</option>
                                {rooms.map(room => {
                                    let label = `${room.name}`;
                                    let isDisabled = !room.is_available;

                                    if (room.area_type === 'HALL') {
                                        label += ` (Hall: ${room.remaining_capacity} seats)`;
                                    } else if (!room.is_available) {
                                        label += " [BOOKED]";
                                    } else {
                                        label += " (VIP)";
                                    }

                                    return (
                                        <option key={room.id} value={room.id} disabled={isDisabled} className={isDisabled ? 'text-gray-300' : 'text-gray-900'}>
                                            {label}
                                        </option>
                                    );
                                })}
                            </select>
                        </div>
                    </div>
                </div>
            )}

            {/* --- CUSTOMER DETAILS --- */}
            <div className="space-y-4">
                <div className="grid grid-cols-2 gap-4">
                    <div>
                        <label className={labelClass}>Customer Name</label>
                        <input required type="text" className={inputClass} 
                            placeholder="e.g. John Doe"
                            onChange={e => setFormData({...formData, name: e.target.value})} />
                    </div>
                    <div>
                        <label className={labelClass}>Contact No.</label>
                        <input required type="text" className={inputClass} 
                            placeholder="e.g. 0917..."
                            onChange={e => setFormData({...formData, contact: e.target.value})} />
                    </div>
                </div>

                <div className="grid grid-cols-2 gap-4">
                    <div>
                        <label className={labelClass}>Email (Optional)</label>
                        <input type="email" className={inputClass} 
                            placeholder="name@example.com"
                            onChange={e => setFormData({...formData, email: e.target.value})} />
                    </div>
                    <div>
                        <label className={labelClass}>Pax</label>
                        <input required type="number" min="1" className={inputClass} 
                            onChange={e => setFormData({...formData, pax: e.target.value})} />
                    </div>
                </div>

                <div>
                    <label className={labelClass}>Special Request / Notes</label>
                    <textarea className={`${inputClass} h-20 resize-none`} 
                        placeholder="Allergies, special occasion, high chair..."
                        onChange={e => setFormData({...formData, message: e.target.value})}></textarea>
                </div>
            </div>

            {/* --- ACTIONS --- */}
            <div className="flex gap-3 pt-4 border-t border-gray-100 mt-6">
                {onCancel && (
                    <button type="button" onClick={onCancel} className="flex-1 py-3 text-gray-500 hover:text-gray-900 hover:bg-gray-100 transition-colors uppercase tracking-widest text-xs font-bold rounded-sm border border-transparent">
                        Cancel
                    </button>
                )}
                <button type="submit" disabled={submitStatus === 'loading'} 
                    className="flex-1 bg-gold-600 text-white font-bold uppercase tracking-widest py-3 text-xs hover:bg-gold-700 transition-colors disabled:opacity-50 rounded-sm shadow-md">
                    {submitStatus === 'loading' ? 'Saving...' : (isManualEntry ? 'Create Booking' : 'Request Reservation')}
                </button>
            </div>
        </form>
    );
};

export default ReservationForm;

import os
from django.core.management.base import BaseCommand
from django.core.files import File
from django.conf import settings
from reservations.models import DiningArea

class Command(BaseCommand):
    help = 'Seeds the database with VIP Rooms and attaches images'

    def handle(self, *args, **options):
        self.stdout.write("Seeding Dining Areas with Images...")

        # ---------------------------------------------------------
        # IMAGE MAPPING
        # Key = Room Name (must match exactly)
        # Value = Filename in backend/seed_images/rooms/
        # ---------------------------------------------------------
        ROOM_IMAGES = {
            "MANILA VIP Room": "vip_manila.webp",
            "Main Dining Hall": "vip_manila.webp", # Reusing Manila image if no dedicated Hall image exists, or set to None
            "VIP Room 1": "vip_1.webp",
            "VIP Room 2": "vip_2.webp",
            "VIP Room 3": "vip_3.webp",
            "VIP Room 5": "vip_5.webp",
            "VIP Room 6": "vip_6.webp",
            "VIP Room 7": "vip_7.webp",
            "VIP Room 8": "vip_8.webp",
            "VIP Room 9": "vip_9.webp",
            "VIP Room 10": "vip_10.webp",
            "VIP Room 11": "vip_11.webp",
            "VIP Room 12": "vip_12.webp",
            "VIP Room 15": "vip_15.webp",
            "VIP Room 301": "vip_301.webp",
            "VIP Room 303": "vip_303.webp",
            "VIP Room 308": "vip_308.webp",
            "VIP Room 309": "vip_309.webp",
        }

        # List of areas to create/update
        areas = [
            {"name": "Main Dining Hall", "area_type": "HALL", "capacity": 250, "min_pax": 1, "description": "Perfect for casual dining."},
            {"name": "MANILA VIP Room", "area_type": "VIP", "capacity": 60, "min_pax": 1, "description": "Intimate setting for business meetings or family dinners."},
            {"name": "VIP Room 1", "area_type": "VIP", "capacity": 20, "min_pax": 1, "description": "Private dining with exclusive service and KTV."},
            {"name": "VIP Room 2", "area_type": "VIP", "capacity": 10, "min_pax": 1, "description": "Private dining with exclusive service and KTV."},
            {"name": "VIP Room 3", "area_type": "VIP", "capacity": 10, "min_pax": 1, "description": "Spacious private room with ocean view."},
            {"name": "VIP Room 5", "area_type": "VIP", "capacity": 10, "min_pax": 1, "description": "Our most luxurious room for large private gatherings."},
            {"name": "VIP Room 6", "area_type": "VIP", "capacity": 24, "min_pax": 1, "description": "Intimate setting for business meetings or family dinners."},
            {"name": "VIP Room 7", "area_type": "VIP", "capacity": 10, "min_pax": 1, "description": "Private dining with exclusive service and KTV."},
            {"name": "VIP Room 8", "area_type": "VIP", "capacity": 10, "min_pax": 1, "description": "Private dining with exclusive service and KTV."},
            {"name": "VIP Room 9", "area_type": "VIP", "capacity": 20, "min_pax": 1, "description": "Spacious private room with ocean view."},
            {"name": "VIP Room 10", "area_type": "VIP", "capacity": 18, "min_pax": 1, "description": "Our most luxurious room for large private gatherings."},
            {"name": "VIP Room 11", "area_type": "VIP", "capacity": 10, "min_pax": 1, "description": "Intimate setting for business meetings or family dinners."},
            {"name": "VIP Room 12", "area_type": "VIP", "capacity": 10, "min_pax": 1, "description": "Private dining with exclusive service and KTV."},
            {"name": "VIP Room 15", "area_type": "VIP", "capacity": 10, "min_pax": 1, "description": "Private dining with exclusive service and KTV."},
            {"name": "VIP Room 301", "area_type": "VIP", "capacity": 20, "min_pax": 1, "description": "Spacious private room with ocean view."},
            {"name": "VIP Room 303", "area_type": "VIP", "capacity": 20, "min_pax": 1, "description": "Our most luxurious room for large private gatherings."},
            {"name": "VIP Room 308", "area_type": "VIP", "capacity": 10, "min_pax": 1, "description": "Intimate setting for business meetings or family dinners."},
            {"name": "VIP Room 309", "area_type": "VIP", "capacity": 70, "min_pax": 1, "description": "Intimate setting for business meetings or family dinners."},
        ]

        DiningArea.objects.all().delete()

        BASE_IMAGE_PATH = os.path.join(settings.BASE_DIR, 'seed_images', 'rooms')

        for area_data in areas:
            room_name = area_data['name']
            
            # Create or Get the Room
            area, created = DiningArea.objects.get_or_create(
                name=room_name,
                defaults={
                    'area_type': area_data['area_type'],
                    'capacity': area_data['capacity'],
                    'min_pax': area_data['min_pax'],
                    'description': area_data['description'],
                    'is_active': True,
                    'has_ktv': True if area_data['area_type'] == 'VIP' else False, # Default logic
                    'has_restroom': True if area_data['capacity'] > 20 else False 
                }
            )

            # Image Attachment Logic
            if room_name in ROOM_IMAGES:
                filename = ROOM_IMAGES[room_name]
                file_path = os.path.join(BASE_IMAGE_PATH, filename)

                # We attach the image if:
                # 1. It was just created OR
                # 2. It currently has no image
                if (created or not area.image) and os.path.exists(file_path):
                    self.stdout.write(f"  --> Attaching image to {room_name}: {filename}")
                    with open(file_path, 'rb') as f:
                        area.image.save(filename, File(f), save=True)
                elif not os.path.exists(file_path):
                    self.stdout.write(self.style.WARNING(f"  --> Image missing for {room_name}: {file_path}"))
            
            if created:
                self.stdout.write(self.style.SUCCESS(f"Created: {area.name}"))
            else:
                self.stdout.write(f"Updated: {area.name}")

        self.stdout.write(self.style.SUCCESS('Dining Areas seeded successfully!'))

import os
import re
from decimal import Decimal
from django.core.management.base import BaseCommand
from django.db import transaction
from django.core.files import File
from django.conf import settings
from menu.models import Category, MenuItem, MenuItemPrice, CookingMethod

class Command(BaseCommand):
    help = 'Seeds the database with the GoldenBay menu (Localized Filipino-Chinese & Simplified Chinese) and Images'

    def handle(self, *args, **options):
        # ---------------------------------------------------------
        # 1. TRANSLATION MAP FOR LIVE SEAFOOD
        # ---------------------------------------------------------
        SEAFOOD_TRANSLATIONS = {
            "Mantis Shrimp": "ÂØåË¥µËôæ (Êµ∑Ëû≥ËûÇ)",
            "Live Suahe": "Ê∏∏Ê∞¥Ê≤ôËôæ",
            "Lobster": "ÁîüÁåõÈæôËôæ",
            "Lapu-Lapu": "Ê∏∏Ê∞¥Áü≥ÊñëÈ±º",
            "Rock Lobster": "Â§ßÈæôËôæ",
            "Mud Crab": "ËÇâËüπ",
            "Clams": "Ëõ§Ëúä",
            "Nylon Clams": "Ëä±Ëõ§ (Nylon Shell)",
            "Shark": "È≤®È±º"
        }

        # ---------------------------------------------------------
        # 2. IMAGE MAPPING (Code -> Relative Path from seed_images/menu/)
        # ---------------------------------------------------------
        IMAGE_MAP = {
            # --- Barbecue ---.
            "BA01": "Barbecue/roasted_cold_cuts_combination.webp",
            "BA02": "Barbecue/crispy_roasted_pork_belly.webp",
            "BA03": "Barbecue/honey_glazed_bbq_pork_asado.webp",
            "BA04": "Barbecue/soy_sauce_chicken.webp",
            "BA05": "Barbecue/white_poached_chicken.webp",
            "BA06": "Barbecue/crispy_roasted_chicken.webp",
            "BA07": "Barbecue/crispy_fried_pigeon.webp",
            "BA08": "Barbecue/roasted_suckling_pig.webp",
            "BA09": "Barbecue/roasted_goose.webp",
            "BA10": "Barbecue/peking_duck.webp",
            "BA11": "Barbecue/roasted_rice_duck.webp",
            "BA12": "Barbecue/jellyfish_with_sesame_oil.webp",
            "BA13": "Barbecue/marinated_sliced_beef_shank.webp",
            "BA14": "Barbecue/century_egg_with_pickled_ginger.webp",
            "BA15": "Barbecue/marinated_cucumber.webp",

            # --- Soup ---
            "S01": "Soup/pumpkin_seafood_soup.webp",
            "S02": "Soup/spinach_seafood_soup.webp",
            "S03": "Soup/seafood_corn_soup.webp",
            "S04": "Soup/chicken_&_asparagus_soup.webp",
            "S05": "Soup/west_lake_minced_beef_soup.webp",
            "S06": "Soup/eight_treasure_winter_melon_soup.webp",
            "S07": "Soup/shanghai_hot_&_sour_soup.webp",
            "S08": "Soup/assorted_dried_seafood_soup.webp",

            # --- Sea Cucumber ---
            "SC01": "Sea Cucumber/sea_cucumber_with_zucchini_&_shrimp_roe.webp",
            "SC02": "Sea Cucumber/braised_sea_cucumber_with_scallion.webp",
            "SC03": "Sea Cucumber/crystal_jade_sea_cucumber.webp",
            "SC04": "Sea Cucumber/sea_cucumber_with_pork_tendon_in_pot.webp",
            "SC05": "Sea Cucumber/whole_sea_cucumber_with_shrimp_roe.webp",
            "SC06": "Sea Cucumber/whole_sea_cucumber_with_shredded_pork.webp",
            "SC07": "Sea Cucumber/sea_cucumber_with_fish_maw_&_conpoy.webp",

            # --- Shark's Fin ---
            "SB01": "Sharks Fin/braised_superior_shark_fin_in_stone_pot.webp",
            "SB02": "Sharks Fin/superior_stock_shark_fin_in_stone_pot.webp",
            "SB03": "Sharks Fin/shark_fin_with_crab_meat.webp",
            "SB04": "Sharks Fin/stir_fried_shark_fin_with_egg_&_bean_sprouts.webp",
            "SB05": "Sharks Fin/birds_nest_with_honey.webp",
            "SB06": "Sharks Fin/birds_nest_with_coconut_milk.webp",

            # --- Abalone ---
            "AB01": "Abalone/braised_abalone_&_seafood_pot.webp",
            "AB02": "Abalone/sliced_abalone_with_black_mushroom.webp",
            "AB03": "Abalone/diced_abalone_with_vegetables.webp",
            "AB04": "Abalone/whole_3_head_abalone_with_sea_cucumber.webp",
            "AB05": "Abalone/whole_3_head_abalone_with_fish_maw.webp",
            "AB06": "Abalone/braised_spiky_sea_cucumber_with_abalone.webp",

            # --- Shrimp ---
            "SP01": "Shrimp/hot_prawn_salad.webp",
            "SP02": "Shrimp/sauteed_prawns_with_broccoli.webp",
            "SP03": "Shrimp/sauteed_prawns_with_pomelo_sauce.webp",
            "SP04": "Shrimp/baked_prawns_with_black_&_white_pepper.webp",
            "SP05": "Shrimp/singaporean_cereal_prawns.webp",
            "SP06": "Shrimp/steamed_prawns_with_garlic_&_vermicelli.webp",
            "SP07": "Shrimp/sauteed_prawns_&_scallops_with_xo_sauce.webp",
            "SP08": "Shrimp/fried_shrimp_balls_with_lemon_sauce.webp",

            # --- Seafood Dishes ---
            "SF01": "Seafood/sauteed_fish_fillet_with_vegetables.webp",
            "SF02": "Seafood/steamed_fish_fillet_with_garlic.webp",
            "SF03": "Seafood/eel_&_pork_tendon_with_abalone_paste.webp",
            "SF04": "Seafood/sizzling_squid_tentacles.webp",
            "SF05": "Seafood/salt_and_pepper_squid.webp",
            "SF06": "Seafood/clam_omelet_with_preserved_radish.webp",
            "SF07": "Seafood/seafood_salad_roll.webp",
            "SF08": "Seafood/diced_scallop_with_crab_roe_in_taro_ring.webp",
            "SF09": "Seafood/sauteed_scallops_with_broccoli.webp",
            "SF10": "Seafood/deep_fried_shrimp_stuffed_crab_claw.webp",
            "SF11": "Seafood/deep_fried_cheese_stuffed_shrimp_balls.webp",
            "SF12": "Seafood/steamed_lobster_meat_with_egg_white.webp",
            "SF13": "Seafood/fried_crispy_spiky_sea_cucumber_with_black_truffle.webp",
            "SF14": "Seafood/sauteed_chinese_yam_huai_shan_in_xo_sauce.webp",
            "SF15": "Seafood/pan_fried_cuttlefish_cake.webp",
            "SF16": "Seafood/scallop_with_scrambled_egg_white_and_black_truffle.webp",

            # --- Sichuan ---
            "CQ01": "Sichuan Spicy Dishes/chong_qing_spicy_fish_in_chili_oil.webp",
            "CQ02": "Sichuan Spicy Dishes/sichuan_pickled_fish.webp",
            "CQ03": "Sichuan Spicy Dishes/hot_&_sour_shredded_potato.webp",
            "CQ04": "Sichuan Spicy Dishes/sichuan_style_spicy_prawns.webp",
            "CQ05": "Sichuan Spicy Dishes/home_style_spicy_tofu.webp",
            "CQ06": "Sichuan Spicy Dishes/spicy_poached_beef_in_chili_oil.webp",
            "CQ07": "Sichuan Spicy Dishes/sauteed_sliced_beef_with_green_pepper.webp",

            # --- Pork/Chicken ---
            "P01": "Pork, Lamb, Chicken, Duck/braised_dong_po_pork.webp",
            "P02": "Pork, Lamb, Chicken, Duck/sweet_&_sour_pork.webp",
            "P03": "Pork, Lamb, Chicken, Duck/salt_&_pepper_spare_ribs.webp",
            "P04": "Pork, Lamb, Chicken, Duck/pan_fried_kurobuta_pork.webp",
            "P05": "Pork, Lamb, Chicken, Duck/braised_pork_knuckle_pata_tim.webp",
            "P06": "Pork, Lamb, Chicken, Duck/lamb_brisket_claypot.webp",
            "P07": "Pork, Lamb, Chicken, Duck/kung_pao_chicken.webp",
            "P08": "Pork, Lamb, Chicken, Duck/spare_ribs_in_special_vinegar_sauce.webp",
            "P09": "Pork, Lamb, Chicken, Duck/hong_kong_style_mala_chicken_pot.webp",
            "P10": "Pork, Lamb, Chicken, Duck/stewed_dong_po_pork_with_dried_bamboo_shoots.webp",
            "P11": "Pork, Lamb, Chicken, Duck/steamed_minced_pork_with_3_kinds_of_egg.webp",

            # --- Beef ---
            "BF01": "Beef/sauteed_beef_with_broccoli.webp",
            "BF02": "Beef/beef_with_bitter_gourd_in_black_bean_sauce.webp",
            "BF03": "Beef/chinese_style_beef_tenderloin.webp",
            "BF04": "Beef/braised_beef_brisket_in_claypot.webp",
            "BF05": "Beef/curry_beef_brisket_in_claypot.webp",
            "BF06": "Beef/sizzling_short_ribs_in_black_pepper_sauce.webp",
            "BF07": "Beef/stir_fried_beef_cubes_with_potato.webp",

            # --- Bean Curd ---
            "BC01": "Bean Curd/crispy_fried_bean_curd.webp",
            "BC02": "Bean Curd/mapo_tofu.webp",
            "BC03": "Bean Curd/braised_seafood_bean_curd_claypot.webp",
            "BC04": "Bean Curd/spinach_bean_curd_with_scallop.webp",
            "BC05": "Bean Curd/steamed_bean_curd_with_assorted_seafood.webp",
            "BC06": "Bean Curd/hakka_style_stuffed_bean_curd.webp",

            # --- Veggies ---
            "VE01": "Vegetables/sauteed_imported_vegetables_with_garlic.webp",
            "VE02": "Vegetables/fried_pumpkin_with_salted_egg.webp",
            "VE03": "Vegetables/braised_brocolli_with_black_mushroom.webp",
            "VE04": "Vegetables/vegetables_with_3_kinds_of_egg.webp",
            "VE05": "Vegetables/assorted_vegetables_with_fungus_&_beancurd.webp",
            "VE06": "Vegetables/spicy_eggplant_claypot_with_minced_pork.webp",
            "VE07": "Vegetables/dried_scallop_with_golden_mushroom_&_vegetables.webp",
            "VE08": "Vegetables/sauteed_chinese_yam_huai_shan_with_mixed_mushrooms.webp",
            "VE09": "Vegetables/golden_bay_special_vegetables.webp",
            "VE10": "Vegetables/deep_fried_minced_shrimp_with_taiwan_pechay.webp",

            # --- Rice/Noodles ---
            "RN01": "Rice & Noodles/stir_fried_beef_ho_fan.webp",
            "RN02": "Rice & Noodles/traditional_fujian_misua.webp",
            "RN03": "Rice & Noodles/pineapple_fried_rice.webp",
            "RN04": "Rice & Noodles/dried_scallop_&_egg_white_fried_rice.webp",
            "RN05": "Rice & Noodles/braised_efu_noodles_with_abalone_sauce.webp",
            "RN06": "Rice & Noodles/crispy_seafood_chow_mein.webp",
            "RN07": "Rice & Noodles/birthday_noodles.webp",
            "RN08": "Rice & Noodles/golden_bay_fried_rice.webp",
            "RN09": "Rice & Noodles/fujian_fried_rice.webp",
            "RN10": "Rice & Noodles/yang_chow_fried_rice.webp",
            "RN11": "Rice & Noodles/salted_fish_&_diced_chicken_fried_rice.webp",
            "RN12": "Rice & Noodles/sauteed_vermicelli_with_minced_pork_&_dried_shrimp.webp",
            "RN13": "Rice & Noodles/garlic_fried_rice.webp",
            "RN14": "Rice & Noodles/sauteed_noodles_with_black_truffle.webp",

            # --- Live Seafood ---
            "LS01": "Live Seafood/sea_mantis.webp",
            "LS10": "Live Seafood/suahe.webp",
            "LS19": "Live Seafood/lobster.webp",
            "LS28": "Live Seafood/lapu_lapu.webp",
            "LS37": "Live Seafood/rock_lobster.webp",
            "LS46": "Live Seafood/crab.webp",
            "LS55": "Live Seafood/clams.webp",
            "LS64": "Live Seafood/nylon_shell.webp",
            "LS73": "Live Seafood/shark.webp",

            # --- Dimsum ---
            "DM01": "Dimsum/hakaw_shrimp_dumpling.webp",
            "DM02": "Dimsum/chicken_feet.webp",
            "DM03": "Dimsum/pork_siomai.webp",
            "DM04": "Dimsum/steamed_spare_ribs.webp",
            "DM05": "Dimsum/chiu_chow_dumpling.webp",
            "DM06": "Dimsum/beef_ball_with_beancurd_stick.webp",
            "DM07": "Dimsum/bean curd_sheet_roll.webp",
            "DM08": "Dimsum/glutinous_rice_wrap_machang.webp",
            "DM09": "Dimsum/crystal_spinach_dumpling.webp",
            "DM10": "Dimsum/steamed_beef_tripe_with_black_pepper.webp",
            "DM11": "Dimsum/traditional_malay_cake.webp",
            "DM12": "Dimsum/egg_tart.webp",
            "DM13": "Dimsum/baked_bbq_asado_pie.webp",
            "DM14": "Dimsum/pan_fried_radish_cake.webp",
            "DM15": "Dimsum/xo_sauce_radish_cake.webp",
            "DM16": "Dimsum/pan_fried_rice_roll_with_xo_sauce.webp",
            "DM17": "Dimsum/pan_fried_pork_bun.webp",
            "DM18": "Dimsum/century_egg_&_pork_congee.webp",
            "DM19": "Dimsum/sliced_fish_congee.webp",
            "DM20": "Dimsum/fresh_shrimp_rice_roll.webp",
            "DM21": "Dimsum/bbq_pork_asado_rice_roll.webp",
            "DM22": "Dimsum/minced_beef_rice_roll.webp",
            "DM23": "Dimsum/plain_rice_roll.webp",
            "DM24": "Dimsum/salted_egg_yolk_custard_bun.webp",
            "DM25": "Dimsum/steamed_bbq_pork_bun_asado_pao.webp",
            "DM26": "Dimsum/birthday_bun_lotus_paste.webp",
            "DM27": "Dimsum/shanghai_xiao_long_pao.webp",
            "DM28": "Dimsum/steamed_mantou.webp",
            "DM29": "Dimsum/crispy_cheese_prawn_roll.webp",
            "DM30": "Dimsum/deep_fried_taro_puff.webp",
            "DM31": "Dimsum/ham_shui_kok_fried_glutinous_rice_dumpling.webp",
            "DM32": "Dimsum/fried_sesame_balls_buchi.webp",
            "DM33": "Dimsum/fried_mantou.webp",
            "DM34": "Dimsum/coffee_jelly.webp",
            "DM35": "Dimsum/mango_mochi_snow_lady.webp",
            "DM36": "Dimsum/hot_almond_cream_with_glutinous_balls.webp",
            "DM37": "Dimsum/hot_taro_sago.webp",
            "DM38": "Dimsum/hot_black_glutinous_rice_with_coconut_milk.webp",
        }

        # ---------------------------------------------------------
        # 3. LIVE SEAFOOD IMAGES (Base Name -> Filename)
        # ---------------------------------------------------------
        SEAFOOD_IMAGES = {
            "Mantis Shrimp": "sea_mantis.webp",
            "Live Suahe": "suahe.webp",
            "Lobster": "lobster.webp",
            "Lapu-Lapu": "lapu_lapu.webp",
            "Rock Lobster": "rock_lobster.webp",
            "Mud Crab": "crab.webp",
            "Clams": "clams.webp",
            "Nylon Clams": "nylon_shell.webp",
            "Shark": "shark.webp"
        }

        # ---------------------------------------------------------
        # 4. MENU DATA (Localized English & Simplified Chinese)
        # ---------------------------------------------------------
        menu_data = {
            "Barbecue, Appetizer / ÁÉßÁÉ§Âç§Âë≥": [
                {"code": "BA01", "en": "Roasted Cold Cuts Combination", "zh": "Èî¶Áª£ÁÉßÂë≥ÊãºÁõò", "prices": {"S": 750, "M": 1500, "L": 2250}},
                {"code": "BA02", "en": "Crispy Roasted Pork Belly (Lechon Macau)", "zh": "ÈáëÁâåÁÉßËÖ©‰ªî", "prices": {"S": 680, "M": 1360, "L": 2040}},
                {"code": "BA03", "en": "Honey Glazed BBQ Pork Asado", "zh": "ËúúÊ±ÅÁÉ§ÂèâÁÉß", "prices": {"S": 600, "M": 900, "L": 1200}},
                {"code": "BA04", "en": "Soy Chicken", "zh": "Áé´Áë∞Ë±âÊ≤πÈ∏°", "prices": {"Half": 900, "Whole": 1800}},
                {"code": "BA05", "en": "White Chicken (Hainanese Style)", "zh": "Ê∞¥Êô∂ÁôΩÂàáÈ∏°", "prices": {"Half": 900, "Whole": 1800}},
                {"code": "BA06", "en": "Crispy Roasted Chicken", "zh": "Âçó‰π≥ÂêäÁÉßÈ∏°", "prices": {"Half": 900, "Whole": 1800}},
                {"code": "BA07", "en": "Crispy Fried Pigeon", "zh": "ÈáëÁâåÁÉß‰π≥È∏Ω", "price": 750},
                {"code": "BA08", "en": "Roasted Suckling Pig", "zh": "È∏øËøêÁÉ§‰π≥Áå™", "prices": {"Half": 4000, "Whole": 7500}},
                {"code": "BA09", "en": "Roasted Goose", "zh": "ÈáëÊµ∑ÊπæÁÉßÈπÖ", "prices": {"Half": 3200, "Whole": 6000}},
                {"code": "BA10", "en": "Peking Duck", "zh": "Âåó‰∫¨ÁâáÁöÆÈ∏≠", "prices": {"Half": 1800, "Whole": 3500}},
                {"code": "BA11", "en": "Roasted Rice Duck", "zh": "ÊåÇÁÇâÁÉßÁ±≥È∏≠", "prices": {"Half": 1600, "Whole": 3000}},
                {"code": "BA12", "en": "Jellyfish with Sesame Oil", "zh": "È∫ªÊ≤πÊãåÊµ∑Ëúá", "prices": {"S": 500, "M": 1000, "L": 1500}},
                {"code": "BA13", "en": "Marinated Sliced Beef Shank", "zh": "Âç§Ê∞¥ÁâõËÖ±", "prices": {"S": 500, "M": 1000, "L": 1500}},
                {"code": "BA14", "en": "Century Egg with Pickled Ginger", "zh": "ÁöÆËõãÈÖ∏Âßú", "price": 288},
                {"code": "BA15", "en": "Marinated Cucumber", "zh": "ÂáâÊãåÈùíÁìú", "price": 288},
            ],
            "Soup / Ê±§Áæπ": [
                {"code": "S01", "en": "Pumpkin Seafood Soup", "zh": "ÈáëÁìúÊµ∑ÁöáÁæπ", "prices": {"S": 650, "M": 975, "L": 1300}},
                {"code": "S02", "en": "Spinach Seafood Soup", "zh": "Ëè†ËèúÊµ∑È≤úÁæπ", "prices": {"S": 650, "M": 975, "L": 1300}},
                {"code": "S03", "en": "Seafood Corn Soup", "zh": "Êµ∑È≤úÁ≤üÁ±≥Áæπ", "prices": {"S": 650, "M": 975, "L": 1300}},
                {"code": "S04", "en": "Chicken & Asparagus Soup", "zh": "È≤úÈú≤Á¨ãÈ∏°ÁâáÊ±§", "prices": {"S": 700, "M": 1050, "L": 1400}},
                {"code": "S05", "en": "West Lake Minced Beef Soup", "zh": "Ë•øÊπñÁâõËÇâÁæπ", "prices": {"S": 650, "M": 975, "L": 1300}},
                {"code": "S06", "en": "Eight Treasure Winter Melon Soup", "zh": "ÂÖ´ÂÆùÂÜ¨ÁìúÁ≤íÊ±§", "prices": {"S": 750, "M": 1125, "L": 1500}},
                {"code": "S07", "en": "Hot & Sour Soup", "zh": "‰∏äÊµ∑ÈÖ∏Ëæ£Áæπ", "prices": {"S": 750, "M": 1125, "L": 1500}},
                {"code": "S08", "en": "Assorted Dried Seafood Soup", "zh": "‰∏â‰∏ùÊµ∑Âë≥Áæπ", "prices": {"S": 980, "M": 1470, "L": 1960}},
            ],
            "Sea Cucumber / Êµ∑ÂèÇ": [
                {"code": "SC01", "en": "Sea Cucumber with Zucchini & Shrimp Roe", "zh": "ÁªøÁéâÁìúËôæÂ≠êÁßÉÂèÇ", "prices": {"S": 1800, "M": 2700, "L": 3600}},
                {"code": "SC02", "en": "Braised Sea Cucumber with Scallion", "zh": "Ëë±ÁÉßËôæÂ≠êÊµ∑ÂèÇ", "prices": {"S": 1800, "M": 2700, "L": 3600}},
                {"code": "SC03", "en": "Crystal Jade Sea Cucumber", "zh": "ÁôΩÁéâÁßÉÂèÇ‰º¥Áø°Áø†", "prices": {"S": 2400, "M": 3600, "L": 4800}},
                {"code": "SC04", "en": "Sea Cucumber with Pork Tendon in Pot", "zh": "Êµ∑ÂèÇËπÑÁ≠ãÁÖ≤", "prices": {"S": 2200, "M": 3300, "L": 4400}},
                {"code": "SC05", "en": "Whole Sea Cucumber with Shrimp Roe", "zh": "ËôæÂ≠êÊâ£ÂéüÊù°Êµ∑ÂèÇ", "prices": {"M": 4500, "L": 6000}},
                {"code": "SC06", "en": "Whole Sea Cucumber with Shredded Pork", "zh": "È±ºÈ¶ôËÇâ‰∏ùÊâ£ÂéüÊù°Êµ∑ÂèÇ", "prices": {"M": 4500, "L": 6000}},
                {"code": "SC07", "en": "Sea Cucumber with Fish Maw & Conpoy", "zh": "Èáë‰∏ùÊâíËä±ËÉ∂Êµ∑ÂèÇ", "prices": {"S": 3000, "M": 4500, "L": 6000}},
            ],
            "Shark Fin, Bird‚Äôs Nest / È±ºÁøÖÁáïÁ™ù": [
                {"code": "SB01", "en": "Braised Superior Shark Fin in Stone Pot", "zh": "Á∫¢ÁÉßÁü≥Á™ùÈ≤çÁøÖ", "price": 2200},
                {"code": "SB02", "en": "Superior Stock Shark Fin in Stone Pot", "zh": "ÊµìÊ±§Áü≥Á™ùÈ≤çÁøÖ", "price": 2200},
                {"code": "SB03", "en": "Shark Fin with Crab Meat", "zh": "Á∫¢ÁÉßËüπËÇâÁøÖ", "prices": {"S": 3000, "M": 4500, "L": 6000}},
                {"code": "SB04", "en": "Stir-Fried Shark Fin with Egg & Bean Sprouts", "zh": "ÊµìÁÇíÊ°ÇËä±ÁøÖ", "prices": {"S": 3000, "M": 4500, "L": 6000}},
                {"code": "SB05", "en": "Bird‚Äôs Nest with Honey", "zh": "ËúÇËúúÁÇñÁáïÁ™ù", "price": 2400},
                {"code": "SB06", "en": "Bird‚Äôs Nest with Coconut Milk", "zh": "Ê§∞Ê±ÅÁÇñÁáïÁ™ù", "price": 2400},
            ],
            "Abalone / È≤çÈ±º": [
                {"code": "AB01", "en": "Braised Abalone & Seafood Pot", "zh": "È≤çÈ±º‰∏ÄÂìÅÁÖ≤", "prices": {"S": 2500, "M": 3750, "L": 5000}},
                {"code": "AB02", "en": "Sliced Abalone with Black Mushroom", "zh": "ÂÜ¨ËèáÂÖ•Âè£È≤çÁâá", "prices": {"S": 3000, "M": 4500, "L": 6000}},
                {"code": "AB03", "en": "Diced Abalone with Vegetables", "zh": "Áø°Áø†ÂÖ•Âè£È≤çËßí", "prices": {"S": 3000, "M": 4500, "L": 6000}},
                {"code": "AB04", "en": "Whole 3-Head Abalone with Sea Cucumber", "zh": "ÂéüÂè™È≤çÈ±ºÊâ£Êµ∑ÂèÇ", "price": 2400},
                {"code": "AB05", "en": "Whole 3-Head Abalone with Fish Maw", "zh": "ÂéüÂè™È≤çÈ±ºÊâ£Ëä±ËÉ∂", "price": 2400},
                {"code": "AB06", "en": "Braised Spiky Sea Cucumber with Abalone", "zh": "Á∫¢ÁÉßÂà∫ÂèÇÈ≤çÈ±º", "price": 1300},
            ],
            "Shrimp / Ëôæ": [
                {"code": "SP01", "en": "Hot Prawn Salad", "zh": "ÁÉ≠Ê≤ôÂæãËôæÁêÉ", "prices": {"S": 1500, "M": 2250, "L": 3000}},
                {"code": "SP02", "en": "Saut√©ed Prawns with Broccoli", "zh": "Ë•øÂÖ∞Ëä±ËôæÁêÉ", "prices": {"S": 1500, "M": 2250, "L": 3000}},
                {"code": "SP03", "en": "Saut√©ed Prawns with Pomelo Sauce", "zh": "ÊüöÂ≠êÊòéËôæÁêÉ", "prices": {"S": 1500, "M": 2250, "L": 3000}},
                {"code": "SP04", "en": "Baked Prawns with Black & White Pepper", "zh": "ÈªëÁôΩËÉ°Ê§íÁÑóÂ§ßËôæ", "prices": {"S": 1800, "M": 2700, "L": 3600}},
                {"code": "SP05", "en": "Singaporean Cereal Prawns", "zh": "ÊòüÊ¥≤È∫¶ÁâáÁÑóÊµ∑Ëôæ", "prices": {"S": 1800, "M": 2700, "L": 3600}},
                {"code": "SP06", "en": "Steamed Prawns with Garlic & Vermicelli", "zh": "ËíúËìâÁ≤â‰∏ùËí∏Â§ßËôæ", "prices": {"S": 1800, "M": 2700, "L": 3600}},
                {"code": "SP07", "en": "Saut√©ed Prawns & Scallops with XO Sauce", "zh": "XOÈÖ±Ë•øËäπÁÇíËôæÁêÉÂ∏¶Â≠ê", "prices": {"S": 2000, "M": 3000, "L": 4000}},
                {"code": "SP08", "en": "Fried Shrimp Balls with Lemon Sauce", "zh": "Ê≤ôÂæãÊü†Ê™¨ÈÖ±ÁÇ∏ËôæÁêÉ", "prices": {"S": 1500, "M": 2250, "L": 3000}},
            ],
            "Seafood Dishes / Êµ∑È≤úÁÉπË∞É": [
                {"code": "SF01", "en": "Saut√©ed Fish Fillet with Vegetables", "zh": "Á¢ßÁªøÁÇíÈ±ºÁâá", "prices": {"S": 700, "M": 1050, "L": 1400}},
                {"code": "SF02", "en": "Steamed Fish Fillet with Garlic", "zh": "ËíúËå∏Ëí∏È±ºÊü≥", "prices": {"S": 550, "M": 825, "L": 1100}},
                {"code": "SF03", "en": "Eel & Pork Tendon with Abalone Sauce", "zh": "È≤çÈ±ºÈÖ±È≥ùÁêÉËπÑÁ≠ã", "prices": {"S": 1200, "M": 1800, "L": 2400}},
                {"code": "SF04", "en": "Sizzling Squid Tentacles", "zh": "ÈìÅÊùøÁ†µÈÖíÁÑóÂ¢®È±ºÈ°ª", "prices": {"S": 700, "M": 1050, "L": 1400}},
                {"code": "SF05", "en": "Salt and Pepper Squid", "zh": "ËíúÈ¶ôÊ§íÁõêÈ≤úÈ±øËä±", "prices": {"S": 700, "M": 1050, "L": 1400}},
                {"code": "SF06", "en": "Clam Omelet with Preserved Radish", "zh": "ËèúËÑØËä±Ëõ§ÁÖéËõãÁÉô", "prices": {"S": 800, "M": 1200, "L": 1600}},
                {"code": "SF07", "en": "Seafood Salad Roll", "zh": "Ê≤ôÂæãÊµ∑È≤úÂç∑", "prices": {"S": 900, "M": 1350, "L": 1800}},
                {"code": "SF08", "en": "Diced Scallop with Crab Roe in Taro Ring", "zh": "ÂÜ†ÂÜõËüπÁè†Â∏¶Â≠êÂ¥ß", "prices": {"S": 1400, "M": 2100, "L": 2800}},
                {"code": "SF09", "en": "Saut√©ed Scallops with Broccoli", "zh": "Ë•øÂÖ∞Ëä±ÂÖ•Âè£Â∏¶Â≠ê", "prices": {"S": 2000, "M": 3000, "L": 4000}},
                {"code": "SF10", "en": "Deep-Fried Shrimp Stuffed Crab Claw", "zh": "È¶ôÈÖ•ÁôæËä±ÈÖøËüπÈí≥", "prices": {"S": 1800, "M": 2700, "L": 3600}},
                {"code": "SF11", "en": "Deep-Fried Cheese Stuffed Shrimp Balls", "zh": "ËüπÁ±ΩÈ≤úËôæËäùÂøÉ‰∏∏", "prices": {"S": 1800, "M": 2700, "L": 3600}},
                {"code": "SF12", "en": "Steamed Lobster Meat with Egg White", "zh": "‰∏äÊ±§ËõãÁôΩËí∏ÈæôËôæËÇâ", "price": "Seasonal Price"},
                {"code": "SF13", "en": "Fried Crispy Spiky Sea Cucumber with Black Truffle", "zh": "ÈªëÊùæÈú≤È¶ôËäãËÑÜÂà∫ÂèÇ", "prices": {"S": 1280, "M": 1920, "L": 2560}},
                {"code": "SF14", "en": "Saut√©ed Chinese Yam (Huai Shan) in XO Sauce", "zh": "XOÈÖ±ÁÇíÊ∑ÆÂ±±Áâá", "prices": {"S": 800, "M": 1200, "L": 1600}},
                {"code": "SF15", "en": "Pan-Fried Cuttlefish Cake", "zh": "È¶ôÁÖéÂ¢®È±ºÈ•º", "prices": {"S": 700, "M": 1050, "L": 1400}},
                {"code": "SF16", "en": "Scallop with Scrambled Egg White & Black Truffle", "zh": "ÈªëÊùæÈú≤ÁÇíËõãÁôΩÂ∏¶Â≠ê", "prices": {"S": 800, "M": 1200, "L": 1600}},
            ],
            "Sichuan Spicy Dishes / Â∑ùËèúÁ≥ªÂàó": [
                {"code": "CQ01", "en": "Chong Qing Spicy Fish in Chili Oil", "zh": "ÈáçÂ∫ÜÊ∞¥ÁÖÆÈ±º", "price": "Seasonal Price"},
                {"code": "CQ02", "en": "Sichuan Pickled Fish", "zh": "ÂõõÂ∑ùÈÖ∏ËèúÈ±º", "price": "Seasonal Price"},
                {"code": "CQ03", "en": "Hot & Sour Shredded Potato", "zh": "ÈÖ∏Ëæ£ÂúüË±Ü‰∏ù", "prices": {"S": 650, "M": 975, "L": 1300}},
                {"code": "CQ04", "en": "Sichuan Style Spicy Prawns", "zh": "È¶ôËæ£ÁÇíËôæ", "prices": {"S": 1200, "M": 1800, "L": 2400}},
                {"code": "CQ05", "en": "Home-style Spicy Tofu", "zh": "ÂÆ∂Â∏∏ÁÉßË±ÜËÖê", "prices": {"S": 900, "M": 1350, "L": 1800}},
                {"code": "CQ06", "en": "Spicy Poached Beef in Chili Oil", "zh": "ÂõõÂ∑ùÊ∞¥ÁÖÆÁâõËÇâ", "prices": {"S": 1400, "M": 2100, "L": 2800}},
                {"code": "CQ07", "en": "Saut√©ed Sliced Beef with Green Pepper", "zh": "Êù≠Ê§íÂ´©ÁâõËÇâ", "prices": {"S": 1000, "M": 1500, "L": 2000}},
            ],
            "Pork, Lamb, Chicken, Duck / Áå™ÁæäÈ∏°È∏≠": [
                {"code": "P01", "en": "Braised Dong Po Pork", "zh": "ËãèÊù≠‰∏úÂù°ËÇâ", "price": 350},
                {"code": "P02", "en": "Sweet and Sour Pork", "zh": "Ëè†ËêùÂíïÂôúËÇâ", "prices": {"S": 600, "M": 900, "L": 1200}},
                {"code": "P03", "en": "Salt & Pepper Spare Ribs", "zh": "Ê§íÁõêÁÑóËÇâÊéí", "prices": {"S": 600, "M": 900, "L": 1200}},
                {"code": "P04", "en": "Pan-Fried Kurobuta Pork", "zh": "È¶ôÁÖéÈªëË±öËÇâ", "prices": {"S": 1200, "M": 1800, "L": 2400}},
                {"code": "P05", "en": "Braised Pork Knuckle (Pata Tim)", "zh": "Á∫¢ÁÉßÂ§ßÂÖÉËπÑ", "price": 1800},
                {"code": "P06", "en": "Lamb Brisket Claypot", "zh": "Ê∏ØÂºèÁæäËÖ©ÁÖ≤", "prices": {"S": 1800, "L": 3600}},
                {"code": "P07", "en": "Kung Pao Chicken", "zh": "ÂÆ´‰øùÁÇíÈ∏°‰∏Å", "prices": {"S": 600, "M": 900, "L": 1200}},
                {"code": "P08", "en": "Spare Ribs in Special Vinegar Sauce", "zh": "ÁâπÂà∂È¶ôÈÜãÊéíÈ™®", "prices": {"S": 700, "M": 1050, "L": 1400}},
                {"code": "P09", "en": "Hong Kong Style Mala Chicken Pot", "zh": "Ê∏ØÂºèÈ∫ªËæ£È∏°ÁÖ≤", "prices": {"S": 600, "M": 900, "L": 1200}},
                {"code": "P10", "en": "Stewed Dong Po Pork with Dried Bamboo Shoots", "zh": "Âπ≤Á¨ã‰∏úÂù°ËÇâ", "prices": {"S": 1080, "M": 1620, "L": 2160}},
                {"code": "P11", "en": "Steamed Minced Pork with 3 Kinds of Egg", "zh": "‰∏âËâ≤ËõãËí∏ËÇâÈ•º", "prices": {"S": 700, "M": 1050, "L": 1400}},
            ],
            "Beef / ÁâõËÇâ": [
                {"code": "BF01", "en": "Saut√©ed Beef with Broccoli", "zh": "Ë•øÂÖ∞Ëä±ÁâõËÇâ", "prices": {"S": 800, "M": 1200, "L": 1600}},
                {"code": "BF02", "en": "Beef with Bitter Gourd in Black Bean Sauce", "zh": "Ë±âÊ±ÅÂáâÁìúÁâõËÇâ", "prices": {"S": 700, "M": 1050, "L": 1400}},
                {"code": "BF03", "en": "Chinese Style Beef Tenderloin", "zh": "‰∏≠ÂºèÁÖéÁâõÊü≥", "prices": {"S": 1200, "M": 1800, "L": 2400}},
                {"code": "BF04", "en": "Braised Beef Brisket in Claypot", "zh": "Êü±‰æØÁâõËÖ©ÁÖ≤", "prices": {"S": 1200, "M": 1800, "L": 2400}},
                {"code": "BF05", "en": "Curry Beef Brisket in Claypot", "zh": "È©¨Êù•ÂíñÂñ±ÁâõËÖ©ÁÖ≤", "prices": {"S": 1200, "M": 1800, "L": 2400}},
                {"code": "BF06", "en": "Sizzling Short Ribs in Black Pepper Sauce", "zh": "ÈìÅÊùøÈªëÊ§íÁâõ‰ªîÈ™®", "prices": {"S": 1200, "M": 1800, "L": 2400}},
                {"code": "BF07", "en": "Stir-Fried Beef Cubes with Potato", "zh": "ÂúüË±ÜÁÇíÁâõÊü≥Á≤í", "prices": {"S": 800, "M": 1200, "L": 1600}},
            ],
            "Bean Curd / Ë±ÜËÖê": [
                {"code": "BC01", "en": "Crispy Fried Bean Curd", "zh": "ËÑÜÁöÆÁÇ∏Ë±ÜËÖê", "prices": {"S": 500, "M": 750, "L": 1000}},
                {"code": "BC02", "en": "Mapo Tofu", "zh": "È∫ªÂ©ÜË±ÜËÖê", "prices": {"S": 700, "M": 1050, "L": 1400}},
                {"code": "BC03", "en": "Braised Seafood Bean Curd Claypot", "zh": "Êµ∑È≤úË±ÜËÖêÁÖ≤", "prices": {"S": 700, "M": 1050, "L": 1400}},
                {"code": "BC04", "en": "Spinach Bean Curd with Scallop", "zh": "Áë∂Êü±Áø°Áø†ÈáëÁ†ñ", "prices": {"S": 900, "M": 1350, "L": 1800}},
                {"code": "BC05", "en": "Steamed Bean Curd with Assorted Seafood", "zh": "Áø†Â°òË±ÜËÖê", "prices": {"S": 800, "M": 1200, "L": 1600}},
                {"code": "BC06", "en": "Hakka Style Stuffed Bean Curd", "zh": "ÂÆ¢ÂÆ∂ÈÖøË±ÜËÖê", "prices": {"S": 900, "M": 1350, "L": 1800}},
            ],
            "Vegetables / Ëî¨Ëèú": [
                {"code": "VE01", "en": "Saut√©ed Imported Vegetables with Garlic", "zh": "ËíúËå∏ÁÇíÂÖ•Âè£Êó∂Ëî¨", "price": "Seasonal Price"},
                {"code": "VE02", "en": "Fried Pumpkin with Salted Egg", "zh": "ÈªÑÈáëÂçóÁìúÊù°", "prices": {"S": 500, "M": 750, "L": 1000}},
                {"code": "VE03", "en": "Braised Broccoli with Black Mushroom", "zh": "È¶ôËèáÊâíË•øÂÖ∞Ëä±", "prices": {"S": 700, "M": 1050, "L": 1400}},
                {"code": "VE04", "en": "Vegetables with 3 Kinds of Egg", "zh": "‰∏âÁöáËõãÊó∂Ëî¨", "prices": {"S": 600, "M": 900, "L": 1200}},
                {"code": "VE05", "en": "Assorted Vegetables with Fungus & Beancurd", "zh": "Ê¥™‰∏ÉÂÖ¨ÁÇíÊñã", "prices": {"S": 700, "M": 1050, "L": 1400}},
                {"code": "VE06", "en": "Spicy Eggplant Claypot with Minced Pork", "zh": "È±ºÈ¶ôËåÑÂ≠êÁÖ≤", "prices": {"S": 600, "M": 900, "L": 1200}},
                {"code": "VE07", "en": "Dried Scallop with Golden Mushroom & Vegetables", "zh": "ÈáëÁë∂ÊâíÊó∂Ëî¨", "prices": {"S": 1000, "M": 1500, "L": 2000}},
                {"code": "VE08", "en": "Saut√©ed Chinese Yam (Huai Shan) with Mixed Mushrooms", "zh": "Ê∑ÆÂ±±Ë•øËäπÁÇíÊùÇËèå", "prices": {"S": 700, "M": 1050, "L": 1400}},
                {"code": "VE09", "en": "Golden Bay Special Vegetables", "zh": "ÈáëÊπæÊãõÁâåËèú", "prices": {"S": 780, "M": 1180, "L": 1560}},
                {"code": "VE10", "en": "Deep Fried Minced Shrimp with Taiwan Pechay", "zh": "Âè∞ÂºèÁôΩËèúÁÇ∏ËôæËå∏", "prices": {"S": 700, "M": 1050, "L": 1400}},
            ],
            "Rice & Noodles / È•≠Èù¢": [
                {"code": "RN01", "en": "Stir-Fried Beef Ho Fan", "zh": "‰πæÁÇíÁâõÊ≤≥", "prices": {"S": 650, "M": 980, "L": 1300}},
                {"code": "RN02", "en": "Traditional Fujian Misua", "zh": "Á¶èÂª∫ÁÇíÈù¢Á∫ø", "prices": {"S": 650, "M": 980, "L": 1300}},
                {"code": "RN03", "en": "Pineapple Fried Rice", "zh": "ÂéüÂè™Ëè†ËêùÁÇíÈ•≠", "prices": {"S": 980}},
                {"code": "RN04", "en": "Dried Scallop & Egg White Fried Rice", "zh": "Áë∂Êü±ËõãÁôΩÁÇíÈ•≠", "prices": {"S": 800, "M": 1200, "L": 1600}},
                {"code": "RN05", "en": "Braised E-Fu Noodles with Abalone Sauce", "zh": "È≤çÈ±ºÊ±ÅÁÇÜ‰ºäÈù¢", "prices": {"S": 600, "M": 900, "L": 1200}},
                {"code": "RN06", "en": "Crispy Seafood Chow Mein", "zh": "Ê∏ØÂºèÊµ∑È≤úÁÇ∏Èù¢", "prices": {"S": 650, "M": 980, "L": 1300}},
                {"code": "RN07", "en": "Birthday Noodles", "zh": "ÁîüÊó•‰ºäÈù¢", "prices": {"S": 600, "M": 900, "L": 1200}},
                {"code": "RN08", "en": "Golden Bay Fried Rice", "zh": "ÈáëÊµ∑ÊπæÁÇíÈ•≠", "prices": {"S": 800, "M": 1200, "L": 1600}},
                {"code": "RN09", "en": "Fujian Fried Rice", "zh": "Á¶èÂª∫ÁÇíÈ•≠", "prices": {"S": 650, "M": 980, "L": 1300}},
                {"code": "RN10", "en": "Yang Chow Fried Rice", "zh": "Êù®Â∑ûÁÇíÈ•≠", "prices": {"S": 600, "M": 900, "L": 1200}},
                {"code": "RN11", "en": "Salted Fish & Diced Chicken Fried Rice", "zh": "Âí∏È±ºÈ∏°Á≤íÁÇíÈ•≠", "prices": {"S": 650, "M": 980, "L": 1300}},
                {"code": "RN12", "en": "Saut√©ed Vermicelli with Minced Pork & Dried Shrimp", "zh": "ËôæÁ±≥ËÇâÁ¢éÁÇíÁ≤â‰∏ù", "prices": {"S": 700, "M": 1050, "L": 1400}},
                {"code": "RN13", "en": "Garlic Fried Rice", "zh": "ËíúËìâÁÇíÈ•≠", "prices": {"S": 450, "M": 680, "L": 900}},
                {"code": "RN14", "en": "Saut√©ed Noodles with Black Truffle", "zh": "ÈªëÊùæÈú≤ÁÇíÈù¢", "prices": {"S": 800, "M": 1200, "L": 1600}},
            ],
            "Live Seafood / Ê¥ªÊµ∑È≤ú": [
                {"code": "LS01", "en": "Mantis Shrimp (Baked in Superior Stock)", "zh": "Êµ∑Ëû≥ËûÇÁÑó‰∏äÊ±§", "price": "Seasonal Price"},
                {"code": "LS02", "en": "Mantis Shrimp (Baked with Cheese)", "zh": "ËäùÂ£´ÁÑóÊµ∑Ëû≥ËûÇ", "price": "Seasonal Price"},
                {"code": "LS03", "en": "Mantis Shrimp (Steamed with Garlic)", "zh": "ËíúËìâËí∏Êµ∑Ëû≥ËûÇ", "price": "Seasonal Price"},
                {"code": "LS04", "en": "Mantis Shrimp (with Superior E-FU Noodles)", "zh": "Êµ∑Ëû≥ËûÇ‰∏äÊ±§‰ºäÈù¢", "price": "Seasonal Price"},
                {"code": "LS05", "en": "Mantis Shrimp (Salt & Pepper)", "zh": "Ê§íÁõêÊµ∑Ëû≥ËûÇ", "price": "Seasonal Price"},
                {"code": "LS06", "en": "Mantis Shrimp (Salted Egg Yolk)", "zh": "ÈáëÊ≤ôÊµ∑Ëû≥ËûÇ", "price": "Seasonal Price"},
                {"code": "LS07", "en": "Mantis Shrimp (Typhoon Shelter Style)", "zh": "ÈÅøÈ£éÂ°òÁÇíÊµ∑Ëû≥ËûÇ", "price": "Seasonal Price"},
                {"code": "LS08", "en": "Mantis Shrimp (Stir-Fried Ginger Onion)", "zh": "ÂßúËë±ÁÇíÊµ∑Ëû≥ËûÇ", "price": "Seasonal Price"},
                {"code": "LS09", "en": "Mantis Shrimp (Steamed)", "zh": "Ê∏ÖËí∏Êµ∑Ëû≥ËûÇ", "price": "Seasonal Price"},
                {"code": "LS10", "en": "Live Suahe (Baked in Superior Stock)", "zh": "Ê≤ôËôæÁÑó‰∏äÊ±§", "price": "Seasonal Price"},
                {"code": "LS11", "en": "Live Suahe (Baked with Cheese)", "zh": "ËäùÂ£´ÁÑóÊ≤ôËôæ", "price": "Seasonal Price"},
                {"code": "LS12", "en": "Live Suahe (Steamed with Garlic)", "zh": "ËíúËìâËí∏Ê≤ôËôæ", "price": "Seasonal Price"},
                {"code": "LS13", "en": "Live Suahe (with Superior E-FU Noodles)", "zh": "Ê≤ôËôæ‰∏äÊ±§‰ºäÈù¢", "price": "Seasonal Price"},
                {"code": "LS14", "en": "Live Suahe (Salt & Pepper)", "zh": "Ê§íÁõêÊ≤ôËôæ", "price": "Seasonal Price"},
                {"code": "LS15", "en": "Live Suahe (Salted Egg Yolk)", "zh": "ÈáëÊ≤ôÊ≤ôËôæ", "price": "Seasonal Price"},
                {"code": "LS16", "en": "Live Suahe (Typhoon Shelter Style)", "zh": "ÈÅøÈ£éÂ°òÁÇíÊ≤ôËôæ", "price": "Seasonal Price"},
                {"code": "LS17", "en": "Live Suahe (Stir-Fried Ginger Onion)", "zh": "ÂßúËë±ÁÇíÊ≤ôËôæ", "price": "Seasonal Price"},
                {"code": "LS18", "en": "Live Suahe (Steamed)", "zh": "Ê∏ÖËí∏Ê≤ôËôæ", "price": "Seasonal Price"},
                {"code": "LS19", "en": "Lobster (Baked in Superior Stock)", "zh": "ÈæôËôæÁÑó‰∏äÊ±§", "price": "Seasonal Price"},
                {"code": "LS20", "en": "Lobster (Baked with Cheese)", "zh": "ËäùÂ£´ÁÑóÈæôËôæ", "price": "Seasonal Price"},
                {"code": "LS21", "en": "Lobster (Steamed with Garlic)", "zh": "ËíúËìâËí∏ÈæôËôæ", "price": "Seasonal Price"},
                {"code": "LS22", "en": "Lobster (with Superior E-FU Noodles)", "zh": "ÈæôËôæ‰∏äÊ±§‰ºäÈù¢", "price": "Seasonal Price"},
                {"code": "LS23", "en": "Lobster (Salt & Pepper)", "zh": "Ê§íÁõêÈæôËôæ", "price": "Seasonal Price"},
                {"code": "LS24", "en": "Lobster (Salted Egg Yolk)", "zh": "ÈáëÊ≤ôÈæôËôæ", "price": "Seasonal Price"},
                {"code": "LS25", "en": "Lobster (Typhoon Shelter Style)", "zh": "ÈÅøÈ£éÂ°òÁÇíÈæôËôæ", "price": "Seasonal Price"},
                {"code": "LS26", "en": "Lobster (Stir-Fried Ginger Onion)", "zh": "ÂßúËë±ÁÇíÈæôËôæ", "price": "Seasonal Price"},
                {"code": "LS27", "en": "Lobster (Steamed)", "zh": "Ê∏ÖËí∏ÈæôËôæ", "price": "Seasonal Price"},
                {"code": "LS28", "en": "Lapu-Lapu (Baked in Superior Stock)", "zh": "Áü≥ÊñëÈ±ºÁÑó‰∏äÊ±§", "price": "Seasonal Price"},
                {"code": "LS29", "en": "Lapu-Lapu (Baked with Cheese)", "zh": "ËäùÂ£´ÁÑóÁü≥ÊñëÈ±º", "price": "Seasonal Price"},
                {"code": "LS30", "en": "Lapu-Lapu (Steamed with Garlic)", "zh": "ËíúËìâËí∏Áü≥ÊñëÈ±º", "price": "Seasonal Price"},
                {"code": "LS31", "en": "Lapu-Lapu (with Superior E-FU Noodles)", "zh": "Áü≥ÊñëÈ±º‰∏äÊ±§‰ºäÈù¢", "price": "Seasonal Price"},
                {"code": "LS32", "en": "Lapu-Lapu (Salt & Pepper)", "zh": "Ê§íÁõêÁü≥ÊñëÈ±º", "price": "Seasonal Price"},
                {"code": "LS33", "en": "Lapu-Lapu (Salted Egg Yolk)", "zh": "ÈáëÊ≤ôÁü≥ÊñëÈ±º", "price": "Seasonal Price"},
                {"code": "LS34", "en": "Lapu-Lapu (Typhoon Shelter Style)", "zh": "ÈÅøÈ£éÂ°òÁÇíÁü≥ÊñëÈ±º", "price": "Seasonal Price"},
                {"code": "LS35", "en": "Lapu-Lapu (Stir-Fried Ginger Onion)", "zh": "ÂßúËë±ÁÇíÁü≥ÊñëÈ±º", "price": "Seasonal Price"},
                {"code": "LS36", "en": "Lapu-Lapu (Steamed)", "zh": "Ê∏ÖËí∏Áü≥ÊñëÈ±º", "price": "Seasonal Price"},
                {"code": "LS37", "en": "Rock Lobster (Baked in Superior Stock)", "zh": "Â§ßÈæôËôæÁÑó‰∏äÊ±§", "price": "Seasonal Price"},
                {"code": "LS38", "en": "Rock Lobster (Baked with Cheese)", "zh": "ËäùÂ£´ÁÑóÂ§ßÈæôËôæ", "price": "Seasonal Price"},
                {"code": "LS39", "en": "Rock Lobster (Steamed with Garlic)", "zh": "ËíúËìâËí∏Â§ßÈæôËôæ", "price": "Seasonal Price"},
                {"code": "LS40", "en": "Rock Lobster (with Superior E-FU Noodles)", "zh": "Â§ßÈæôËôæ‰∏äÊ±§‰ºäÈù¢", "price": "Seasonal Price"},
                {"code": "LS41", "en": "Rock Lobster (Salt & Pepper)", "zh": "Ê§íÁõêÂ§ßÈæôËôæ", "price": "Seasonal Price"},
                {"code": "LS42", "en": "Rock Lobster (Salted Egg Yolk)", "zh": "ÈáëÊ≤ôÂ§ßÈæôËôæ", "price": "Seasonal Price"},
                {"code": "LS43", "en": "Rock Lobster (Typhoon Shelter Style)", "zh": "ÈÅøÈ£éÂ°òÁÇíÂ§ßÈæôËôæ", "price": "Seasonal Price"},
                {"code": "LS44", "en": "Rock Lobster (Stir-Fried Ginger Onion)", "zh": "ÂßúËë±ÁÇíÂ§ßÈæôËôæ", "price": "Seasonal Price"},
                {"code": "LS45", "en": "Rock Lobster (Steamed)", "zh": "Ê∏ÖËí∏Â§ßÈæôËôæ", "price": "Seasonal Price"},
                {"code": "LS46", "en": "Mud Crab (Baked in Superior Stock)", "zh": "ËûÉËüπÁÑó‰∏äÊ±§", "price": "Seasonal Price"},
                {"code": "LS47", "en": "Mud Crab (Baked with Cheese)", "zh": "ËäùÂ£´ÁÑóËûÉËüπ", "price": "Seasonal Price"},
                {"code": "LS48", "en": "Mud Crab (Steamed with Garlic)", "zh": "ËíúËìâËí∏ËûÉËüπ", "price": "Seasonal Price"},
                {"code": "LS49", "en": "Mud Crab (with Superior E-FU Noodles)", "zh": "ËûÉËüπ‰∏äÊ±§‰ºäÈù¢", "price": "Seasonal Price"},
                {"code": "LS50", "en": "Mud Crab (Salt & Pepper)", "zh": "Ê§íÁõêËûÉËüπ", "price": "Seasonal Price"},
                {"code": "LS51", "en": "Mud Crab (Salted Egg Yolk)", "zh": "ÈáëÊ≤ôËûÉËüπ", "price": "Seasonal Price"},
                {"code": "LS52", "en": "Mud Crab (Typhoon Shelter Style)", "zh": "ÈÅøÈ£éÂ°òÁÇíËûÉËüπ", "price": "Seasonal Price"},
                {"code": "LS53", "en": "Mud Crab (Stir-Fried Ginger Onion)", "zh": "ÂßúËë±ÁÇíËûÉËüπ", "price": "Seasonal Price"},
                {"code": "LS54", "en": "Mud Crab (Steamed)", "zh": "Ê∏ÖËí∏ËûÉËüπ", "price": "Seasonal Price"},
                {"code": "LS55", "en": "Clams (Baked in Superior Stock)", "zh": "Ëõ§ËúäÁÑó‰∏äÊ±§", "price": "Seasonal Price"},
                {"code": "LS56", "en": "Clams (Baked with Cheese)", "zh": "ËäùÂ£´ÁÑóËõ§Ëúä", "price": "Seasonal Price"},
                {"code": "LS57", "en": "Clams (Steamed with Garlic)", "zh": "ËíúËìâËí∏Ëõ§Ëúä", "price": "Seasonal Price"},
                {"code": "LS58", "en": "Clams (with Superior E-FU Noodles)", "zh": "Ëõ§Ëúä‰∏äÊ±§‰ºäÈù¢", "price": "Seasonal Price"},
                {"code": "LS59", "en": "Clams (Salt & Pepper)", "zh": "Ê§íÁõêËõ§Ëúä", "price": "Seasonal Price"},
                {"code": "LS60", "en": "Clams (Salted Egg Yolk)", "zh": "ÈáëÊ≤ôËõ§Ëúä", "price": "Seasonal Price"},
                {"code": "LS61", "en": "Clams (Typhoon Shelter Style)", "zh": "ÈÅøÈ£éÂ°òÁÇíËõ§Ëúä", "price": "Seasonal Price"},
                {"code": "LS62", "en": "Clams (Stir-Fried Ginger Onion)", "zh": "ÂßúËë±ÁÇíËõ§Ëúä", "price": "Seasonal Price"},
                {"code": "LS63", "en": "Clams (Steamed)", "zh": "Ê∏ÖËí∏Ëõ§Ëúä", "price": "Seasonal Price"},
                {"code": "LS64", "en": "Nylon Clams (Baked in Superior Stock)", "zh": "Ëõ§ËúäÁÑó‰∏äÊ±§", "price": "Seasonal Price"},
                {"code": "LS65", "en": "Nylon Clams (Baked with Cheese)", "zh": "ËäùÂ£´ÁÑóËõ§Ëúä", "price": "Seasonal Price"},
                {"code": "LS66", "en": "Nylon Clams (Steamed with Garlic)", "zh": "ËíúËìâËí∏Ëõ§Ëúä", "price": "Seasonal Price"},
                {"code": "LS67", "en": "Nylon Clams (with Superior E-FU Noodles)", "zh": "Ëõ§Ëúä‰∏äÊ±§‰ºäÈù¢", "price": "Seasonal Price"},
                {"code": "LS68", "en": "Nylon Clams (Salt & Pepper)", "zh": "Ê§íÁõêËõ§Ëúä", "price": "Seasonal Price"},
                {"code": "LS69", "en": "Nylon Clams (Salted Egg Yolk)", "zh": "ÈáëÊ≤ôËõ§Ëúä", "price": "Seasonal Price"},
                {"code": "LS70", "en": "Nylon Clams (Typhoon Shelter Style)", "zh": "ÈÅøÈ£éÂ°òÁÇíËõ§Ëúä", "price": "Seasonal Price"},
                {"code": "LS71", "en": "Nylon Clams (Stir-Fried Ginger Onion)", "zh": "ÂßúËë±ÁÇíËõ§Ëúä", "price": "Seasonal Price"},
                {"code": "LS72", "en": "Nylon Clams (Steamed)", "zh": "Ê∏ÖËí∏Ëõ§Ëúä", "price": "Seasonal Price"},
                {"code": "LS73", "en": "Shark (Baked in Superior Stock)", "zh": "È≤®È±ºÁÑó‰∏äÊ±§", "price": "Seasonal Price"},
                {"code": "LS74", "en": "Shark (Baked with Cheese)", "zh": "ËäùÂ£´ÁÑóÈ≤®È±º", "price": "Seasonal Price"},
                {"code": "LS75", "en": "Shark (Steamed with Garlic)", "zh": "ËíúËìâËí∏È≤®È±º", "price": "Seasonal Price"},
                {"code": "LS76", "en": "Shark (with Superior E-FU Noodles)", "zh": "È≤®È±º‰∏äÊ±§‰ºäÈù¢", "price": "Seasonal Price"},
                {"code": "LS77", "en": "Shark (Salt & Pepper)", "zh": "Ê§íÁõêÈ≤®È±º", "price": "Seasonal Price"},
                {"code": "LS78", "en": "Shark (Salted Egg Yolk)", "zh": "ÈáëÊ≤ôÈ≤®È±º", "price": "Seasonal Price"},
                {"code": "LS79", "en": "Shark (Typhoon Shelter Style)", "zh": "ÈÅøÈ£éÂ°òÁÇíÈ≤®È±º", "price": "Seasonal Price"},
                {"code": "LS80", "en": "Shark (Stir-Fried Ginger Onion)", "zh": "ÂßúËë±ÁÇíÈ≤®È±º", "price": "Seasonal Price"},
                {"code": "LS81", "en": "Shark (Steamed)", "zh": "Ê∏ÖËí∏È≤®È±º", "price": "Seasonal Price"},
            ],
            "Dimsum / ÁÇπÂøÉ": [
                {"code": "DM01", "en": "Hakaw (Shrimp Dumpling)", "zh": "Êô∂ËéπÈ≤úËôæÈ•∫", "price": 328},
                {"code": "DM02", "en": "Chicken Feet", "zh": "Ë±âÊ±ÅËí∏Âá§Áà™", "price": 288},
                {"code": "DM03", "en": "Pork Siomai", "zh": "ËüπÁ±ΩÁÉßÂçñÁöá", "price": 268},
                {"code": "DM04", "en": "Steamed Spare Ribs", "zh": "Ë±âÊ±ÅËí∏ÊéíÈ™®", "price": 258},
                {"code": "DM05", "en": "Chiu Chow Dumpling", "zh": "ÊΩÆÂºèËí∏Á≤âÁ≤ø", "price": 258},
                {"code": "DM06", "en": "Beef Ball with Beancurd Stick", "zh": "È≤úÁ´πÁâõËÇâÁêÉ", "price": 258},
                {"code": "DM07", "en": "Bean Curd Sheet Roll", "zh": "ËöùÊ≤πÈ≤úÁ´πÂç∑", "price": 258},
                {"code": "DM08", "en": "Glutinous Rice Wrap (Machang)", "zh": "Ëç∑Âè∂ÁèçÁè†È∏°", "price": 258},
                {"code": "DM09", "en": "Crystal Spinach Dumpling", "zh": "Ê∞¥Êô∂Ëè†ËèúÈ•∫", "price": 258},
                {"code": "DM10", "en": "Steamed Beef Tripe with Black Pepper", "zh": "ÈªëÊ§íËí∏ÁâõËÇö", "price": 258},
                {"code": "DM11", "en": "Traditional Malay Cake", "zh": "ÊÄÄÊóßÈ©¨ÊãâÁ≥ï", "price": 208},

                {"code": "DM12", "en": "Egg Tart", "zh": "ÈÖ•ÁöÆÁÑóËõãÊåû", "price": 258},
                {"code": "DM13", "en": "Baked BBQ Asado Pork Pie", "zh": "ÊùæÂåñÂèâÁÉßÈÖ•", "price": 258},

                {"code": "DM14", "en": "Pan-Fried Radish Cake", "zh": "È¶ôÁÖéËêùÂçúÁ≥ï", "price": 258},
                {"code": "DM15", "en": "XO Sauce Radish Cake", "zh": "XOÈÖ±ËêùÂçúÁ≥ï", "price": 258},
                {"code": "DM16", "en": "Pan-Fried Rice Roll with XO Sauce", "zh": "XOÈÖ±ÁÖéËÇ†Á≤â", "price": 258},
                {"code": "DM17", "en": "Pan-Fried Pork Bun", "zh": "ÁîüÁÖéÈ≤úËÇâÂåÖ", "price": 258},

                {"code": "DM18", "en": "Century Egg & Pork Congee", "zh": "ÁöÆËõãÁò¶ËÇâÁ≤•", "price": 258},
                {"code": "DM19", "en": "Sliced Fish Congee", "zh": "È≤úÊªëÈ±ºÁâáÁ≤•", "price": 258},

                {"code": "DM20", "en": "Fresh Shrimp Rice Roll", "zh": "ÊâãÊãÜÈ≤úËôæËÇ†Á≤â", "price": 328},
                {"code": "DM21", "en": "BBQ Pork Asado Rice Roll", "zh": "ËúúÊ±ÅÂèâÁÉßËÇ†Á≤â", "price": 258},
                {"code": "DM22", "en": "Minced Beef Rice Roll", "zh": "È¶ôËåúÁâõËÇâËÇ†Á≤â", "price": 258},
                {"code": "DM23", "en": "Plain Rice Roll", "zh": "ÊâãÂ∑•Ëí∏ÊªëËÇ†Á≤â", "price": 228},

                {"code": "DM24", "en": "Salted Egg Yolk Custard Bun", "zh": "ÈáëÈ¶ôÊµÅÊ≤ôÂåÖ", "price": 258},
                {"code": "DM25", "en": "Steamed BBQ Pork Bun (Asado Pao)", "zh": "ËúúÊ±ÅÂèâÁÉßÂåÖ", "price": 258},
                {"code": "DM26", "en": "Birthday Bun (Lotus Paste)", "zh": "Ëé≤ËìâÂØøÊ°ÉÂåÖ", "price": 258},
                {"code": "DM27", "en": "Shanghai Xiao Long Bao", "zh": "‰∏äÊµ∑Â∞èÁ¨ºÂåÖ", "price": 258},
                {"code": "DM28", "en": "Steamed Mantou", "zh": "Ëí∏È¶íÂ§¥", "price": 208},

                {"code": "DM29", "en": "Crispy Cheese Prawn Roll", "zh": "ËäùÂ£´ËôæÊò•Âç∑", "price": 258},
                {"code": "DM30", "en": "Deep Fried Taro Puff", "zh": "ÈÖ•ËÑÜÈ¶ôËäãËßí", "price": 258},
                {"code": "DM31", "en": "Ham Sui Kok (Fried Glutinous Rice Dumpling)", "zh": "ÂÆ∂‰π°Âí∏Ê∞¥Ëßí", "price": 258},
                {"code": "DM32", "en": "Fried Sesame Balls (Buchi)", "zh": "È¶ôÁÇ∏ËäùÈ∫ªÁêÉ", "price": 208},
                {"code": "DM33", "en": "Fried Mantou", "zh": "ÈªÑÈáëÁÇ∏È¶íÂ§¥", "price": 208},

                {"code": "DM34", "en": "Coffee Jelly", "zh": "ÁîüÁ£®ÂíñÂï°Á≥ï", "price": 188},
                {"code": "DM35", "en": "Mango Mochi (Snow Lady)", "zh": "È¶ôËäíÈõ™Â™öÂ®ò", "price": 228},

                {"code": "DM36", "en": "Hot Almond Cream with Glutinous Balls", "zh": "Ê±§ÂúÜÊùè‰ªÅËå∂", "price": 188},
                {"code": "DM37", "en": "Hot Taro Sago", "zh": "È¶ôËäãË•øÁ±≥Èú≤", "price": 188},
                {"code": "DM38", "en": "Hot Black Glutinous Rice with Coconut Milk", "zh": "Ê§∞È¶ôÁ¥´Á±≥Èú≤", "price": 188},
            ],
            "Set Menu / Â•óÈ§ê": [
                {"code": "SET1", "en": "Set Menu 1 (Good for 10)", "zh": "Â•óÈ§ê‰∏Ä", "price": 25800, "desc": "Assorted Cold Cuts, Steamed Live Suahe, Abalone Soup, Saut√©ed Shrimp & Squid, Seafood Salad Roll, Abalone Cubes, Steamed Lapu-Lapu, Roasted Chicken, Free Noodle or Rice, Free 2 Kinds of Dessert"},
                {"code": "SET2", "en": "Set Menu 2 (Good for 10)", "zh": "Â•óÈ§ê‰∫å", "price": 32800, "desc": "Assorted Cold Cuts, Steamed Prawns, Double Boiled Fish Maw Soup, Scallop Salad Roll, Whole 10-Head Abalone, Fried Crispy Pigeon, Steamed Lapu-Lapu, Stir Fried Sea Cucumber, Shark Fin Rice, Free 2 Kinds of Dessert"},
                {"code": "SET3", "en": "Set Menu 3 (Good for 10)", "zh": "Â•óÈ§ê‰∏â", "price": 35800, "desc": "Suckling Pig, Steamed Prawns, Shark Fin Soup, Diced Scallop in Taro Ring, Whole 10-Head Abalone with Sea Cucumber, Steamed Lapu-Lapu, Roasted Goose, Typhoon Shelter Crab, Free Noodles or Rice, Free 2 Kinds of Dessert"},
                {"code": "SET4", "en": "Set Menu 4 (Good for 10)", "zh": "Â•óÈ§êÂõõ", "price": 38800, "desc": "Suckling Pig with Mala Sea Cucumber, Shark Fin Soup, Imported Scallop with Broccoli, Shrimp Stuffed Fried Crab Claw, 8-Head Abalone with Fish Maw, Steamed Tiger Lapu-Lapu, Salt & Pepper Mantis Shrimp, Roasted Duck, Free Noodles or Rice, Free 2 Kinds of Dessert"},
                {"code": "SET5", "en": "Set Menu 5 (Good for 10)", "zh": "Â•óÈ§ê‰∫î", "price": 55800, "desc": "Suckling Pig (Whole), Steamed Rock Lobster, Fried Taro Scallop Pie, Chicken Shark Fin Soup (Individual), Sea Cucumber with Dried Scallop, 8-Head Abalone with Fish Maw, Steamed Red Lapu-Lapu, Roasted Goose, Free Noodles or Rice, Bird's Nest in Mango Pomelo Sweet Soup, Mixed Fruits"},
                {"code": "SET6", "en": "Set Menu 6 (Good for 10)", "zh": "Â•óÈ§êÂÖ≠", "price": 65800, "desc": "Suckling Pig with Foie Gras & Caviar, Braised Shark Fin Soup, Original Lobster with Superior Sauce, Dried Scallop with Winter Melon Ring, Whole Sea Cucumber with Shredded Meat, Whole 6-Head Abalone with Fish Maw, Steamed Double Red Lapu-Lapu, Roasted Goose, Whole Scallop with Black Truffle Noodles, Bird's Nest Soup, Mixed Fruits"},
            ]
        }

        self.stdout.write("Clearing old menu data...")

        # WIPE DATA
        MenuItemPrice.objects.all().delete()
        MenuItem.objects.all().delete()
        Category.objects.all().delete()
        CookingMethod.objects.all().delete()

        # Path to your images folder (inside backend/seed_images/menu/)
        BASE_IMAGE_PATH = os.path.join(settings.BASE_DIR, 'seed_images', 'menu')

        with transaction.atomic():
            cat_order = 1
            for cat_full_name, items in menu_data.items():
                
                # 1. Category Name Parsing
                if " / " in cat_full_name:
                     cat_parts = cat_full_name.split(" / ")
                     cat_raw = cat_parts[0]
                     cat_zh = cat_parts[-1].strip()
                     cat_en = cat_raw.strip()
                else:
                    cat_en = cat_full_name
                    cat_zh = ""

                category, _ = Category.objects.get_or_create(
                    name=cat_en,
                    defaults={'name_zh': cat_zh, 'order': cat_order}
                )
                cat_order += 1
                
                self.stdout.write(f"Processing {category.name}...")

                # 2. Item Processing
                for item_data in items:
                    raw_name = item_data['en']
                    raw_name_zh = item_data.get('zh', '')
                    item_code = item_data.get('code')

                    # --- LOGIC FOR LIVE SEAFOOD GROUPING ---
                    # Matches "Name (Method)"
                    match = re.match(r"^(.*?)\s*\((.*?)\)$", raw_name)
                    
                    if "Live Seafood" in cat_en and match:
                        base_name = match.group(1).strip()
                        method_name = match.group(2).strip()
                        
                        # Use Translation Map for the BASE item name
                        base_name_zh = SEAFOOD_TRANSLATIONS.get(base_name, raw_name_zh)

                        # Create the Parent Item (e.g., "Mantis Shrimp")
                        item, created = MenuItem.objects.get_or_create(
                            name=base_name,
                            category=category,
                            defaults={
                                'code': item_code, # Takes the code of the first parsed variant
                                'name_zh': base_name_zh,
                                'description': "Fresh from our aquariums, cooked to your preference.",
                            }
                        )

                        # --- IMAGE HANDLING LOGIC FOR LIVE SEAFOOD ---
                        if created and base_name in SEAFOOD_IMAGES:
                            filename = SEAFOOD_IMAGES[base_name]
                            file_path = os.path.join(BASE_IMAGE_PATH, 'Live Seafood', filename)
                            
                            if os.path.exists(file_path):
                                self.stdout.write(f"  --> Attaching image: {filename}")
                                with open(file_path, 'rb') as f:
                                    item.image.save(filename, File(f), save=True)
                            else:
                                self.stdout.write(self.style.WARNING(f"  --> Image not found: {file_path}"))

                        # Create/Link Cooking Method
                        cooking_method, _ = CookingMethod.objects.get_or_create(name=method_name)
                        item.cooking_methods.add(cooking_method)

                        # Only add price logic on the first creation
                        if created:
                            MenuItemPrice.objects.create(
                                menu_item=item, size="Regular", is_seasonal=True
                            )

                    else:
                        # --- STANDARD ITEM LOGIC ---
                        item, created = MenuItem.objects.get_or_create(
                            code=item_code,
                            defaults={
                                'category': category,
                                'name': raw_name,
                                'name_zh': raw_name_zh,
                                'description': item_data.get('desc', ''),
                            }
                        )

                        # --- IMAGE HANDLING LOGIC FOR STANDARD ITEMS ---
                        if created and item_code in IMAGE_MAP:
                            rel_path = IMAGE_MAP[item_code]
                            file_path = os.path.join(BASE_IMAGE_PATH, rel_path)
                            
                            if os.path.exists(file_path):
                                self.stdout.write(f"  --> Attaching image: {rel_path}")
                                with open(file_path, 'rb') as f:
                                    # Extract just the filename for saving
                                    filename = os.path.basename(rel_path)
                                    item.image.save(filename, File(f), save=True)
                            else:
                                self.stdout.write(self.style.WARNING(f"  --> Image not found: {file_path}"))
                        
                        # If item existed, wipe old prices to re-seed
                        if not created:
                             item.prices.all().delete()

                        if 'prices' in item_data:
                            for size, price in item_data['prices'].items():
                                val = None
                                is_seasonal = False
                                if isinstance(price, str) and not price.isdigit():
                                    is_seasonal = True
                                else:
                                    val = Decimal(price)
                                MenuItemPrice.objects.create(menu_item=item, size=size, price=val, is_seasonal=is_seasonal)
                        elif 'price' in item_data:
                            price_val = item_data['price']
                            val = None
                            is_seasonal = False
                            if isinstance(price_val, str) and "Seasonal" in price_val:
                                is_seasonal = True
                            else:
                                val = Decimal(price_val)
                            MenuItemPrice.objects.create(menu_item=item, size="Regular", price=val, is_seasonal=is_seasonal)

        self.stdout.write(self.style.SUCCESS('Menu seeded successfully!'))

import os
import re
from decimal import Decimal
from django.core.management.base import BaseCommand
from django.db import transaction
from django.core.files import File
from django.conf import settings
from menu.models import Category, MenuItem, MenuItemPrice, CookingMethod

class Command(BaseCommand):
    help = 'Seeds the database with the GoldenBay menu (Localized Filipino-Chinese & Simplified Chinese) and Images'

    def handle(self, *args, **options):
        # ---------------------------------------------------------
        # 1. TRANSLATION MAP FOR LIVE SEAFOOD
        # ---------------------------------------------------------
        SEAFOOD_TRANSLATIONS = {
            "Mantis Shrimp": "ÂØåË¥µËôæ (Êµ∑Ëû≥ËûÇ)",
            "Live Suahe": "Ê∏∏Ê∞¥Ê≤ôËôæ",
            "Lobster": "ÁîüÁåõÈæôËôæ",
            "Lapu-Lapu": "Ê∏∏Ê∞¥Áü≥ÊñëÈ±º",
            "Rock Lobster": "Â§ßÈæôËôæ",
            "Mud Crab": "ËÇâËüπ",
            "Clams": "Ëõ§Ëúä",
            "Nylon Clams": "Ëä±Ëõ§ (Nylon Shell)",
            "Shark": "È≤®È±º"
        }

        # ---------------------------------------------------------
        # 2. IMAGE MAPPING (Code -> Relative Path from seed_images/menu/)
        # ---------------------------------------------------------
        IMAGE_MAP = {
            # --- Barbecue ---.
            "BA01": "Barbecue/roasted_cold_cuts_combination.webp",
            "BA02": "Barbecue/crispy_roasted_pork_belly.webp",
            "BA03": "Barbecue/honey_glazed_bbq_pork_asado.webp",
            "BA04": "Barbecue/soy_sauce_chicken.webp",
            "BA05": "Barbecue/white_poached_chicken.webp",
            "BA06": "Barbecue/crispy_roasted_chicken.webp",
            "BA07": "Barbecue/crispy_fried_pigeon.webp",
            "BA08": "Barbecue/roasted_suckling_pig.webp",
            "BA09": "Barbecue/roasted_goose.webp",
            "BA10": "Barbecue/peking_duck.webp",
            "BA11": "Barbecue/roasted_rice_duck.webp",
            "BA12": "Barbecue/jellyfish_with_sesame_oil.webp",
            "BA13": "Barbecue/marinated_sliced_beef_shank.webp",
            "BA14": "Barbecue/century_egg_with_pickled_ginger.webp",
            "BA15": "Barbecue/marinated_cucumber.webp",

            # --- Soup ---
            "S01": "Soup/pumpkin_seafood_soup.webp",
            "S02": "Soup/spinach_seafood_soup.webp",
            "S03": "Soup/seafood_corn_soup.webp",
            "S04": "Soup/chicken_&_asparagus_soup.webp",
            "S05": "Soup/west_lake_minced_beef_soup.webp",
            "S06": "Soup/eight_treasure_winter_melon_soup.webp",
            "S07": "Soup/shanghai_hot_&_sour_soup.webp",
            "S08": "Soup/assorted_dried_seafood_soup.webp",

            # --- Sea Cucumber ---
            "SC01": "Sea Cucumber/sea_cucumber_with_zucchini_&_shrimp_roe.webp",
            "SC02": "Sea Cucumber/braised_sea_cucumber_with_scallion.webp",
            "SC03": "Sea Cucumber/crystal_jade_sea_cucumber.webp",
            "SC04": "Sea Cucumber/sea_cucumber_with_pork_tendon_in_pot.webp",
            "SC05": "Sea Cucumber/whole_sea_cucumber_with_shrimp_roe.webp",
            "SC06": "Sea Cucumber/whole_sea_cucumber_with_shredded_pork.webp",
            "SC07": "Sea Cucumber/sea_cucumber_with_fish_maw_&_conpoy.webp",

            # --- Shark's Fin ---
            "SB01": "Sharks Fin/braised_superior_shark_fin_in_stone_pot.webp",
            "SB02": "Sharks Fin/superior_stock_shark_fin_in_stone_pot.webp",
            "SB03": "Sharks Fin/shark_fin_with_crab_meat.webp",
            "SB04": "Sharks Fin/stir_fried_shark_fin_with_egg_&_bean_sprouts.webp",
            "SB05": "Sharks Fin/birds_nest_with_honey.webp",
            "SB06": "Sharks Fin/birds_nest_with_coconut_milk.webp",

            # --- Abalone ---
            "AB01": "Abalone/braised_abalone_&_seafood_pot.webp",
            "AB02": "Abalone/sliced_abalone_with_black_mushroom.webp",
            "AB03": "Abalone/diced_abalone_with_vegetables.webp",
            "AB04": "Abalone/whole_3_head_abalone_with_sea_cucumber.webp",
            "AB05": "Abalone/whole_3_head_abalone_with_fish_maw.webp",
            "AB06": "Abalone/braised_spiky_sea_cucumber_with_abalone.webp",

            # --- Shrimp ---
            "SP01": "Shrimp/hot_prawn_salad.webp",
            "SP02": "Shrimp/sauteed_prawns_with_broccoli.webp",
            "SP03": "Shrimp/sauteed_prawns_with_pomelo_sauce.webp",
            "SP04": "Shrimp/baked_prawns_with_black_&_white_pepper.webp",
            "SP05": "Shrimp/singaporean_cereal_prawns.webp",
            "SP06": "Shrimp/steamed_prawns_with_garlic_&_vermicelli.webp",
            "SP07": "Shrimp/sauteed_prawns_&_scallops_with_xo_sauce.webp",
            "SP08": "Shrimp/fried_shrimp_balls_with_lemon_sauce.webp",

            # --- Seafood Dishes ---
            "SF01": "Seafood/sauteed_fish_fillet_with_vegetables.webp",
            "SF02": "Seafood/steamed_fish_fillet_with_garlic.webp",
            "SF03": "Seafood/eel_&_pork_tendon_with_abalone_paste.webp",
            "SF04": "Seafood/sizzling_squid_tentacles.webp",
            "SF05": "Seafood/salt_and_pepper_squid.webp",
            "SF06": "Seafood/clam_omelet_with_preserved_radish.webp",
            "SF07": "Seafood/seafood_salad_roll.webp",
            "SF08": "Seafood/diced_scallop_with_crab_roe_in_taro_ring.webp",
            "SF09": "Seafood/sauteed_scallops_with_broccoli.webp",
            "SF10": "Seafood/deep_fried_shrimp_stuffed_crab_claw.webp",
            "SF11": "Seafood/deep_fried_cheese_stuffed_shrimp_balls.webp",
            "SF12": "Seafood/steamed_lobster_meat_with_egg_white.webp",
            "SF13": "Seafood/fried_crispy_spiky_sea_cucumber_with_black_truffle.webp",
            "SF14": "Seafood/sauteed_chinese_yam_huai_shan_in_xo_sauce.webp",
            "SF15": "Seafood/pan_fried_cuttlefish_cake.webp",
            "SF16": "Seafood/scallop_with_scrambled_egg_white_and_black_truffle.webp",

            # --- Sichuan ---
            "CQ01": "Sichuan Spicy Dishes/chong_qing_spicy_fish_in_chili_oil.webp",
            "CQ02": "Sichuan Spicy Dishes/sichuan_pickled_fish.webp",
            "CQ03": "Sichuan Spicy Dishes/hot_&_sour_shredded_potato.webp",
            "CQ04": "Sichuan Spicy Dishes/sichuan_style_spicy_prawns.webp",
            "CQ05": "Sichuan Spicy Dishes/home_style_spicy_tofu.webp",
            "CQ06": "Sichuan Spicy Dishes/spicy_poached_beef_in_chili_oil.webp",
            "CQ07": "Sichuan Spicy Dishes/sauteed_sliced_beef_with_green_pepper.webp",

            # --- Pork/Chicken ---
            "P01": "Pork, Lamb, Chicken, Duck/braised_dong_po_pork.webp",
            "P02": "Pork, Lamb, Chicken, Duck/sweet_&_sour_pork.webp",
            "P03": "Pork, Lamb, Chicken, Duck/salt_&_pepper_spare_ribs.webp",
            "P04": "Pork, Lamb, Chicken, Duck/pan_fried_kurobuta_pork.webp",
            "P05": "Pork, Lamb, Chicken, Duck/braised_pork_knuckle_pata_tim.webp",
            "P06": "Pork, Lamb, Chicken, Duck/lamb_brisket_claypot.webp",
            "P07": "Pork, Lamb, Chicken, Duck/kung_pao_chicken.webp",
            "P08": "Pork, Lamb, Chicken, Duck/spare_ribs_in_special_vinegar_sauce.webp",
            "P09": "Pork, Lamb, Chicken, Duck/hong_kong_style_mala_chicken_pot.webp",
            "P10": "Pork, Lamb, Chicken, Duck/stewed_dong_po_pork_with_dried_bamboo_shoots.webp",
            "P11": "Pork, Lamb, Chicken, Duck/steamed_minced_pork_with_3_kinds_of_egg.webp",

            # --- Beef ---
            "BF01": "Beef/sauteed_beef_with_broccoli.webp",
            "BF02": "Beef/beef_with_bitter_gourd_in_black_bean_sauce.webp",
            "BF03": "Beef/chinese_style_beef_tenderloin.webp",
            "BF04": "Beef/braised_beef_brisket_in_claypot.webp",
            "BF05": "Beef/curry_beef_brisket_in_claypot.webp",
            "BF06": "Beef/sizzling_short_ribs_in_black_pepper_sauce.webp",
            "BF07": "Beef/stir_fried_beef_cubes_with_potato.webp",

            # --- Bean Curd ---
            "BC01": "Bean Curd/crispy_fried_bean_curd.webp",
            "BC02": "Bean Curd/mapo_tofu.webp",
            "BC03": "Bean Curd/braised_seafood_bean_curd_claypot.webp",
            "BC04": "Bean Curd/spinach_bean_curd_with_scallop.webp",
            "BC05": "Bean Curd/steamed_bean_curd_with_assorted_seafood.webp",
            "BC06": "Bean Curd/hakka_style_stuffed_bean_curd.webp",

            # --- Veggies ---
            "VE01": "Vegetables/sauteed_imported_vegetables_with_garlic.webp",
            "VE02": "Vegetables/fried_pumpkin_with_salted_egg.webp",
            "VE03": "Vegetables/braised_brocolli_with_black_mushroom.webp",
            "VE04": "Vegetables/vegetables_with_3_kinds_of_egg.webp",
            "VE05": "Vegetables/assorted_vegetables_with_fungus_&_beancurd.webp",
            "VE06": "Vegetables/spicy_eggplant_claypot_with_minced_pork.webp",
            "VE07": "Vegetables/dried_scallop_with_golden_mushroom_&_vegetables.webp",
            "VE08": "Vegetables/sauteed_chinese_yam_huai_shan_with_mixed_mushrooms.webp",
            "VE09": "Vegetables/golden_bay_special_vegetables.webp",
            "VE10": "Vegetables/deep_fried_minced_shrimp_with_taiwan_pechay.webp",

            # --- Rice/Noodles ---
            "RN01": "Rice & Noodles/stir_fried_beef_ho_fan.webp",
            "RN02": "Rice & Noodles/traditional_fujian_misua.webp",
            "RN03": "Rice & Noodles/pineapple_fried_rice.webp",
            "RN04": "Rice & Noodles/dried_scallop_&_egg_white_fried_rice.webp",
            "RN05": "Rice & Noodles/braised_efu_noodles_with_abalone_sauce.webp",
            "RN06": "Rice & Noodles/crispy_seafood_chow_mein.webp",
            "RN07": "Rice & Noodles/birthday_noodles.webp",
            "RN08": "Rice & Noodles/golden_bay_fried_rice.webp",
            "RN09": "Rice & Noodles/fujian_fried_rice.webp",
            "RN10": "Rice & Noodles/yang_chow_fried_rice.webp",
            "RN11": "Rice & Noodles/salted_fish_&_diced_chicken_fried_rice.webp",
            "RN12": "Rice & Noodles/sauteed_vermicelli_with_minced_pork_&_dried_shrimp.webp",
            "RN13": "Rice & Noodles/garlic_fried_rice.webp",
            "RN14": "Rice & Noodles/sauteed_noodles_with_black_truffle.webp",

            # --- Live Seafood ---
            "LS01": "Live Seafood/sea_mantis.webp",
            "LS10": "Live Seafood/suahe.webp",
            "LS19": "Live Seafood/lobster.webp",
            "LS28": "Live Seafood/lapu_lapu.webp",
            "LS37": "Live Seafood/rock_lobster.webp",
            "LS46": "Live Seafood/crab.webp",
            "LS55": "Live Seafood/clams.webp",
            "LS64": "Live Seafood/nylon_shell.webp",
            "LS73": "Live Seafood/shark.webp",

            # --- Dimsum ---
            "DM01": "Dimsum/hakaw_shrimp_dumpling.webp",
            "DM02": "Dimsum/chicken_feet.webp",
            "DM03": "Dimsum/pork_siomai.webp",
            "DM04": "Dimsum/steamed_spare_ribs.webp",
            "DM05": "Dimsum/chiu_chow_dumpling.webp",
            "DM06": "Dimsum/beef_ball_with_beancurd_stick.webp",
            "DM07": "Dimsum/bean curd_sheet_roll.webp",
            "DM08": "Dimsum/glutinous_rice_wrap_machang.webp",
            "DM09": "Dimsum/crystal_spinach_dumpling.webp",
            "DM10": "Dimsum/steamed_beef_tripe_with_black_pepper.webp",
            "DM11": "Dimsum/traditional_malay_cake.webp",
            "DM12": "Dimsum/egg_tart.webp",
            "DM13": "Dimsum/baked_bbq_asado_pie.webp",
            "DM14": "Dimsum/pan_fried_radish_cake.webp",
            "DM15": "Dimsum/xo_sauce_radish_cake.webp",
            "DM16": "Dimsum/pan_fried_rice_roll_with_xo_sauce.webp",
            "DM17": "Dimsum/pan_fried_pork_bun.webp",
            "DM18": "Dimsum/century_egg_&_pork_congee.webp",
            "DM19": "Dimsum/sliced_fish_congee.webp",
            "DM20": "Dimsum/fresh_shrimp_rice_roll.webp",
            "DM21": "Dimsum/bbq_pork_asado_rice_roll.webp",
            "DM22": "Dimsum/minced_beef_rice_roll.webp",
            "DM23": "Dimsum/plain_rice_roll.webp",
            "DM24": "Dimsum/salted_egg_yolk_custard_bun.webp",
            "DM25": "Dimsum/steamed_bbq_pork_bun_asado_pao.webp",
            "DM26": "Dimsum/birthday_bun_lotus_paste.webp",
            "DM27": "Dimsum/shanghai_xiao_long_pao.webp",
            "DM28": "Dimsum/steamed_mantou.webp",
            "DM29": "Dimsum/crispy_cheese_prawn_roll.webp",
            "DM30": "Dimsum/deep_fried_taro_puff.webp",
            "DM31": "Dimsum/ham_shui_kok_fried_glutinous_rice_dumpling.webp",
            "DM32": "Dimsum/fried_sesame_balls_buchi.webp",
            "DM33": "Dimsum/fried_mantou.webp",
            "DM34": "Dimsum/coffee_jelly.webp",
            "DM35": "Dimsum/mango_mochi_snow_lady.webp",
            "DM36": "Dimsum/hot_almond_cream_with_glutinous_balls.webp",
            "DM37": "Dimsum/hot_taro_sago.webp",
            "DM38": "Dimsum/hot_black_glutinous_rice_with_coconut_milk.webp",
        }

        # ---------------------------------------------------------
        # 3. LIVE SEAFOOD IMAGES (Base Name -> Filename)
        # ---------------------------------------------------------
        SEAFOOD_IMAGES = {
            "Mantis Shrimp": "sea_mantis.webp",
            "Live Suahe": "suahe.webp",
            "Lobster": "lobster.webp",
            "Lapu-Lapu": "lapu_lapu.webp",
            "Rock Lobster": "rock_lobster.webp",
            "Mud Crab": "crab.webp",
            "Clams": "clams.webp",
            "Nylon Clams": "nylon_shell.webp",
            "Shark": "shark.webp"
        }

        # ---------------------------------------------------------
        # 4. MENU DATA (Localized English & Simplified Chinese)
        # ---------------------------------------------------------
        menu_data = {
            "Barbecue, Appetizer / ÁÉßÁÉ§Âç§Âë≥": [
                {"code": "BA01", "en": "Roasted Cold Cuts Combination", "zh": "Èî¶Áª£ÁÉßÂë≥ÊãºÁõò", "prices": {"S": 750, "M": 1500, "L": 2250}},
                {"code": "BA02", "en": "Crispy Roasted Pork Belly (Lechon Macau)", "zh": "ÈáëÁâåÁÉßËÖ©‰ªî", "prices": {"S": 680, "M": 1360, "L": 2040}},
                {"code": "BA03", "en": "Honey Glazed BBQ Pork Asado", "zh": "ËúúÊ±ÅÁÉ§ÂèâÁÉß", "prices": {"S": 600, "M": 900, "L": 1200}},
                {"code": "BA04", "en": "Soy Chicken", "zh": "Áé´Áë∞Ë±âÊ≤πÈ∏°", "prices": {"Half": 900, "Whole": 1800}},
                {"code": "BA05", "en": "White Chicken (Hainanese Style)", "zh": "Ê∞¥Êô∂ÁôΩÂàáÈ∏°", "prices": {"Half": 900, "Whole": 1800}},
                {"code": "BA06", "en": "Crispy Roasted Chicken", "zh": "Âçó‰π≥ÂêäÁÉßÈ∏°", "prices": {"Half": 900, "Whole": 1800}},
                {"code": "BA07", "en": "Crispy Fried Pigeon", "zh": "ÈáëÁâåÁÉß‰π≥È∏Ω", "price": 750},
                {"code": "BA08", "en": "Roasted Suckling Pig", "zh": "È∏øËøêÁÉ§‰π≥Áå™", "prices": {"Half": 4000, "Whole": 7500}},
                {"code": "BA09", "en": "Roasted Goose", "zh": "ÈáëÊµ∑ÊπæÁÉßÈπÖ", "prices": {"Half": 3200, "Whole": 6000}},
                {"code": "BA10", "en": "Peking Duck", "zh": "Âåó‰∫¨ÁâáÁöÆÈ∏≠", "prices": {"Half": 1800, "Whole": 3500}},
                {"code": "BA11", "en": "Roasted Rice Duck", "zh": "ÊåÇÁÇâÁÉßÁ±≥È∏≠", "prices": {"Half": 1600, "Whole": 3000}},
                {"code": "BA12", "en": "Jellyfish with Sesame Oil", "zh": "È∫ªÊ≤πÊãåÊµ∑Ëúá", "prices": {"S": 500, "M": 1000, "L": 1500}},
                {"code": "BA13", "en": "Marinated Sliced Beef Shank", "zh": "Âç§Ê∞¥ÁâõËÖ±", "prices": {"S": 500, "M": 1000, "L": 1500}},
                {"code": "BA14", "en": "Century Egg with Pickled Ginger", "zh": "ÁöÆËõãÈÖ∏Âßú", "price": 288},
                {"code": "BA15", "en": "Marinated Cucumber", "zh": "ÂáâÊãåÈùíÁìú", "price": 288},
            ],
            "Soup / Ê±§Áæπ": [
                {"code": "S01", "en": "Pumpkin Seafood Soup", "zh": "ÈáëÁìúÊµ∑ÁöáÁæπ", "prices": {"S": 650, "M": 975, "L": 1300}},
                {"code": "S02", "en": "Spinach Seafood Soup", "zh": "Ëè†ËèúÊµ∑È≤úÁæπ", "prices": {"S": 650, "M": 975, "L": 1300}},
                {"code": "S03", "en": "Seafood Corn Soup", "zh": "Êµ∑È≤úÁ≤üÁ±≥Áæπ", "prices": {"S": 650, "M": 975, "L": 1300}},
                {"code": "S04", "en": "Chicken & Asparagus Soup", "zh": "È≤úÈú≤Á¨ãÈ∏°ÁâáÊ±§", "prices": {"S": 700, "M": 1050, "L": 1400}},
                {"code": "S05", "en": "West Lake Minced Beef Soup", "zh": "Ë•øÊπñÁâõËÇâÁæπ", "prices": {"S": 650, "M": 975, "L": 1300}},
                {"code": "S06", "en": "Eight Treasure Winter Melon Soup", "zh": "ÂÖ´ÂÆùÂÜ¨ÁìúÁ≤íÊ±§", "prices": {"S": 750, "M": 1125, "L": 1500}},
                {"code": "S07", "en": "Hot & Sour Soup", "zh": "‰∏äÊµ∑ÈÖ∏Ëæ£Áæπ", "prices": {"S": 750, "M": 1125, "L": 1500}},
                {"code": "S08", "en": "Assorted Dried Seafood Soup", "zh": "‰∏â‰∏ùÊµ∑Âë≥Áæπ", "prices": {"S": 980, "M": 1470, "L": 1960}},
            ],
            "Sea Cucumber / Êµ∑ÂèÇ": [
                {"code": "SC01", "en": "Sea Cucumber with Zucchini & Shrimp Roe", "zh": "ÁªøÁéâÁìúËôæÂ≠êÁßÉÂèÇ", "prices": {"S": 1800, "M": 2700, "L": 3600}},
                {"code": "SC02", "en": "Braised Sea Cucumber with Scallion", "zh": "Ëë±ÁÉßËôæÂ≠êÊµ∑ÂèÇ", "prices": {"S": 1800, "M": 2700, "L": 3600}},
                {"code": "SC03", "en": "Crystal Jade Sea Cucumber", "zh": "ÁôΩÁéâÁßÉÂèÇ‰º¥Áø°Áø†", "prices": {"S": 2400, "M": 3600, "L": 4800}},
                {"code": "SC04", "en": "Sea Cucumber with Pork Tendon in Pot", "zh": "Êµ∑ÂèÇËπÑÁ≠ãÁÖ≤", "prices": {"S": 2200, "M": 3300, "L": 4400}},
                {"code": "SC05", "en": "Whole Sea Cucumber with Shrimp Roe", "zh": "ËôæÂ≠êÊâ£ÂéüÊù°Êµ∑ÂèÇ", "prices": {"M": 4500, "L": 6000}},
                {"code": "SC06", "en": "Whole Sea Cucumber with Shredded Pork", "zh": "È±ºÈ¶ôËÇâ‰∏ùÊâ£ÂéüÊù°Êµ∑ÂèÇ", "prices": {"M": 4500, "L": 6000}},
                {"code": "SC07", "en": "Sea Cucumber with Fish Maw & Conpoy", "zh": "Èáë‰∏ùÊâíËä±ËÉ∂Êµ∑ÂèÇ", "prices": {"S": 3000, "M": 4500, "L": 6000}},
            ],
            "Shark Fin, Bird‚Äôs Nest / È±ºÁøÖÁáïÁ™ù": [
                {"code": "SB01", "en": "Braised Superior Shark Fin in Stone Pot", "zh": "Á∫¢ÁÉßÁü≥Á™ùÈ≤çÁøÖ", "price": 2200},
                {"code": "SB02", "en": "Superior Stock Shark Fin in Stone Pot", "zh": "ÊµìÊ±§Áü≥Á™ùÈ≤çÁøÖ", "price": 2200},
                {"code": "SB03", "en": "Shark Fin with Crab Meat", "zh": "Á∫¢ÁÉßËüπËÇâÁøÖ", "prices": {"S": 3000, "M": 4500, "L": 6000}},
                {"code": "SB04", "en": "Stir-Fried Shark Fin with Egg & Bean Sprouts", "zh": "ÊµìÁÇíÊ°ÇËä±ÁøÖ", "prices": {"S": 3000, "M": 4500, "L": 6000}},
                {"code": "SB05", "en": "Bird‚Äôs Nest with Honey", "zh": "ËúÇËúúÁÇñÁáïÁ™ù", "price": 2400},
                {"code": "SB06", "en": "Bird‚Äôs Nest with Coconut Milk", "zh": "Ê§∞Ê±ÅÁÇñÁáïÁ™ù", "price": 2400},
            ],
            "Abalone / È≤çÈ±º": [
                {"code": "AB01", "en": "Braised Abalone & Seafood Pot", "zh": "È≤çÈ±º‰∏ÄÂìÅÁÖ≤", "prices": {"S": 2500, "M": 3750, "L": 5000}},
                {"code": "AB02", "en": "Sliced Abalone with Black Mushroom", "zh": "ÂÜ¨ËèáÂÖ•Âè£È≤çÁâá", "prices": {"S": 3000, "M": 4500, "L": 6000}},
                {"code": "AB03", "en": "Diced Abalone with Vegetables", "zh": "Áø°Áø†ÂÖ•Âè£È≤çËßí", "prices": {"S": 3000, "M": 4500, "L": 6000}},
                {"code": "AB04", "en": "Whole 3-Head Abalone with Sea Cucumber", "zh": "ÂéüÂè™È≤çÈ±ºÊâ£Êµ∑ÂèÇ", "price": 2400},
                {"code": "AB05", "en": "Whole 3-Head Abalone with Fish Maw", "zh": "ÂéüÂè™È≤çÈ±ºÊâ£Ëä±ËÉ∂", "price": 2400},
                {"code": "AB06", "en": "Braised Spiky Sea Cucumber with Abalone", "zh": "Á∫¢ÁÉßÂà∫ÂèÇÈ≤çÈ±º", "price": 1300},
            ],
            "Shrimp / Ëôæ": [
                {"code": "SP01", "en": "Hot Prawn Salad", "zh": "ÁÉ≠Ê≤ôÂæãËôæÁêÉ", "prices": {"S": 1500, "M": 2250, "L": 3000}},
                {"code": "SP02", "en": "Saut√©ed Prawns with Broccoli", "zh": "Ë•øÂÖ∞Ëä±ËôæÁêÉ", "prices": {"S": 1500, "M": 2250, "L": 3000}},
                {"code": "SP03", "en": "Saut√©ed Prawns with Pomelo Sauce", "zh": "ÊüöÂ≠êÊòéËôæÁêÉ", "prices": {"S": 1500, "M": 2250, "L": 3000}},
                {"code": "SP04", "en": "Baked Prawns with Black & White Pepper", "zh": "ÈªëÁôΩËÉ°Ê§íÁÑóÂ§ßËôæ", "prices": {"S": 1800, "M": 2700, "L": 3600}},
                {"code": "SP05", "en": "Singaporean Cereal Prawns", "zh": "ÊòüÊ¥≤È∫¶ÁâáÁÑóÊµ∑Ëôæ", "prices": {"S": 1800, "M": 2700, "L": 3600}},
                {"code": "SP06", "en": "Steamed Prawns with Garlic & Vermicelli", "zh": "ËíúËìâÁ≤â‰∏ùËí∏Â§ßËôæ", "prices": {"S": 1800, "M": 2700, "L": 3600}},
                {"code": "SP07", "en": "Saut√©ed Prawns & Scallops with XO Sauce", "zh": "XOÈÖ±Ë•øËäπÁÇíËôæÁêÉÂ∏¶Â≠ê", "prices": {"S": 2000, "M": 3000, "L": 4000}},
                {"code": "SP08", "en": "Fried Shrimp Balls with Lemon Sauce", "zh": "Ê≤ôÂæãÊü†Ê™¨ÈÖ±ÁÇ∏ËôæÁêÉ", "prices": {"S": 1500, "M": 2250, "L": 3000}},
            ],
            "Seafood Dishes / Êµ∑È≤úÁÉπË∞É": [
                {"code": "SF01", "en": "Saut√©ed Fish Fillet with Vegetables", "zh": "Á¢ßÁªøÁÇíÈ±ºÁâá", "prices": {"S": 700, "M": 1050, "L": 1400}},
                {"code": "SF02", "en": "Steamed Fish Fillet with Garlic", "zh": "ËíúËå∏Ëí∏È±ºÊü≥", "prices": {"S": 550, "M": 825, "L": 1100}},
                {"code": "SF03", "en": "Eel & Pork Tendon with Abalone Sauce", "zh": "È≤çÈ±ºÈÖ±È≥ùÁêÉËπÑÁ≠ã", "prices": {"S": 1200, "M": 1800, "L": 2400}},
                {"code": "SF04", "en": "Sizzling Squid Tentacles", "zh": "ÈìÅÊùøÁ†µÈÖíÁÑóÂ¢®È±ºÈ°ª", "prices": {"S": 700, "M": 1050, "L": 1400}},
                {"code": "SF05", "en": "Salt and Pepper Squid", "zh": "ËíúÈ¶ôÊ§íÁõêÈ≤úÈ±øËä±", "prices": {"S": 700, "M": 1050, "L": 1400}},
                {"code": "SF06", "en": "Clam Omelet with Preserved Radish", "zh": "ËèúËÑØËä±Ëõ§ÁÖéËõãÁÉô", "prices": {"S": 800, "M": 1200, "L": 1600}},
                {"code": "SF07", "en": "Seafood Salad Roll", "zh": "Ê≤ôÂæãÊµ∑È≤úÂç∑", "prices": {"S": 900, "M": 1350, "L": 1800}},
                {"code": "SF08", "en": "Diced Scallop with Crab Roe in Taro Ring", "zh": "ÂÜ†ÂÜõËüπÁè†Â∏¶Â≠êÂ¥ß", "prices": {"S": 1400, "M": 2100, "L": 2800}},
                {"code": "SF09", "en": "Saut√©ed Scallops with Broccoli", "zh": "Ë•øÂÖ∞Ëä±ÂÖ•Âè£Â∏¶Â≠ê", "prices": {"S": 2000, "M": 3000, "L": 4000}},
                {"code": "SF10", "en": "Deep-Fried Shrimp Stuffed Crab Claw", "zh": "È¶ôÈÖ•ÁôæËä±ÈÖøËüπÈí≥", "prices": {"S": 1800, "M": 2700, "L": 3600}},
                {"code": "SF11", "en": "Deep-Fried Cheese Stuffed Shrimp Balls", "zh": "ËüπÁ±ΩÈ≤úËôæËäùÂøÉ‰∏∏", "prices": {"S": 1800, "M": 2700, "L": 3600}},
                {"code": "SF12", "en": "Steamed Lobster Meat with Egg White", "zh": "‰∏äÊ±§ËõãÁôΩËí∏ÈæôËôæËÇâ", "price": "Seasonal Price"},
                {"code": "SF13", "en": "Fried Crispy Spiky Sea Cucumber with Black Truffle", "zh": "ÈªëÊùæÈú≤È¶ôËäãËÑÜÂà∫ÂèÇ", "prices": {"S": 1280, "M": 1920, "L": 2560}},
                {"code": "SF14", "en": "Saut√©ed Chinese Yam (Huai Shan) in XO Sauce", "zh": "XOÈÖ±ÁÇíÊ∑ÆÂ±±Áâá", "prices": {"S": 800, "M": 1200, "L": 1600}},
                {"code": "SF15", "en": "Pan-Fried Cuttlefish Cake", "zh": "È¶ôÁÖéÂ¢®È±ºÈ•º", "prices": {"S": 700, "M": 1050, "L": 1400}},
                {"code": "SF16", "en": "Scallop with Scrambled Egg White & Black Truffle", "zh": "ÈªëÊùæÈú≤ÁÇíËõãÁôΩÂ∏¶Â≠ê", "prices": {"S": 800, "M": 1200, "L": 1600}},
            ],
            "Sichuan Spicy Dishes / Â∑ùËèúÁ≥ªÂàó": [
                {"code": "CQ01", "en": "Chong Qing Spicy Fish in Chili Oil", "zh": "ÈáçÂ∫ÜÊ∞¥ÁÖÆÈ±º", "price": "Seasonal Price"},
                {"code": "CQ02", "en": "Sichuan Pickled Fish", "zh": "ÂõõÂ∑ùÈÖ∏ËèúÈ±º", "price": "Seasonal Price"},
                {"code": "CQ03", "en": "Hot & Sour Shredded Potato", "zh": "ÈÖ∏Ëæ£ÂúüË±Ü‰∏ù", "prices": {"S": 650, "M": 975, "L": 1300}},
                {"code": "CQ04", "en": "Sichuan Style Spicy Prawns", "zh": "È¶ôËæ£ÁÇíËôæ", "prices": {"S": 1200, "M": 1800, "L": 2400}},
                {"code": "CQ05", "en": "Home-style Spicy Tofu", "zh": "ÂÆ∂Â∏∏ÁÉßË±ÜËÖê", "prices": {"S": 900, "M": 1350, "L": 1800}},
                {"code": "CQ06", "en": "Spicy Poached Beef in Chili Oil", "zh": "ÂõõÂ∑ùÊ∞¥ÁÖÆÁâõËÇâ", "prices": {"S": 1400, "M": 2100, "L": 2800}},
                {"code": "CQ07", "en": "Saut√©ed Sliced Beef with Green Pepper", "zh": "Êù≠Ê§íÂ´©ÁâõËÇâ", "prices": {"S": 1000, "M": 1500, "L": 2000}},
            ],
            "Pork, Lamb, Chicken, Duck / Áå™ÁæäÈ∏°È∏≠": [
                {"code": "P01", "en": "Braised Dong Po Pork", "zh": "ËãèÊù≠‰∏úÂù°ËÇâ", "price": 350},
                {"code": "P02", "en": "Sweet and Sour Pork", "zh": "Ëè†ËêùÂíïÂôúËÇâ", "prices": {"S": 600, "M": 900, "L": 1200}},
                {"code": "P03", "en": "Salt & Pepper Spare Ribs", "zh": "Ê§íÁõêÁÑóËÇâÊéí", "prices": {"S": 600, "M": 900, "L": 1200}},
                {"code": "P04", "en": "Pan-Fried Kurobuta Pork", "zh": "È¶ôÁÖéÈªëË±öËÇâ", "prices": {"S": 1200, "M": 1800, "L": 2400}},
                {"code": "P05", "en": "Braised Pork Knuckle (Pata Tim)", "zh": "Á∫¢ÁÉßÂ§ßÂÖÉËπÑ", "price": 1800},
                {"code": "P06", "en": "Lamb Brisket Claypot", "zh": "Ê∏ØÂºèÁæäËÖ©ÁÖ≤", "prices": {"S": 1800, "L": 3600}},
                {"code": "P07", "en": "Kung Pao Chicken", "zh": "ÂÆ´‰øùÁÇíÈ∏°‰∏Å", "prices": {"S": 600, "M": 900, "L": 1200}},
                {"code": "P08", "en": "Spare Ribs in Special Vinegar Sauce", "zh": "ÁâπÂà∂È¶ôÈÜãÊéíÈ™®", "prices": {"S": 700, "M": 1050, "L": 1400}},
                {"code": "P09", "en": "Hong Kong Style Mala Chicken Pot", "zh": "Ê∏ØÂºèÈ∫ªËæ£È∏°ÁÖ≤", "prices": {"S": 600, "M": 900, "L": 1200}},
                {"code": "P10", "en": "Stewed Dong Po Pork with Dried Bamboo Shoots", "zh": "Âπ≤Á¨ã‰∏úÂù°ËÇâ", "prices": {"S": 1080, "M": 1620, "L": 2160}},
                {"code": "P11", "en": "Steamed Minced Pork with 3 Kinds of Egg", "zh": "‰∏âËâ≤ËõãËí∏ËÇâÈ•º", "prices": {"S": 700, "M": 1050, "L": 1400}},
            ],
            "Beef / ÁâõËÇâ": [
                {"code": "BF01", "en": "Saut√©ed Beef with Broccoli", "zh": "Ë•øÂÖ∞Ëä±ÁâõËÇâ", "prices": {"S": 800, "M": 1200, "L": 1600}},
                {"code": "BF02", "en": "Beef with Bitter Gourd in Black Bean Sauce", "zh": "Ë±âÊ±ÅÂáâÁìúÁâõËÇâ", "prices": {"S": 700, "M": 1050, "L": 1400}},
                {"code": "BF03", "en": "Chinese Style Beef Tenderloin", "zh": "‰∏≠ÂºèÁÖéÁâõÊü≥", "prices": {"S": 1200, "M": 1800, "L": 2400}},
                {"code": "BF04", "en": "Braised Beef Brisket in Claypot", "zh": "Êü±‰æØÁâõËÖ©ÁÖ≤", "prices": {"S": 1200, "M": 1800, "L": 2400}},
                {"code": "BF05", "en": "Curry Beef Brisket in Claypot", "zh": "È©¨Êù•ÂíñÂñ±ÁâõËÖ©ÁÖ≤", "prices": {"S": 1200, "M": 1800, "L": 2400}},
                {"code": "BF06", "en": "Sizzling Short Ribs in Black Pepper Sauce", "zh": "ÈìÅÊùøÈªëÊ§íÁâõ‰ªîÈ™®", "prices": {"S": 1200, "M": 1800, "L": 2400}},
                {"code": "BF07", "en": "Stir-Fried Beef Cubes with Potato", "zh": "ÂúüË±ÜÁÇíÁâõÊü≥Á≤í", "prices": {"S": 800, "M": 1200, "L": 1600}},
            ],
            "Bean Curd / Ë±ÜËÖê": [
                {"code": "BC01", "en": "Crispy Fried Bean Curd", "zh": "ËÑÜÁöÆÁÇ∏Ë±ÜËÖê", "prices": {"S": 500, "M": 750, "L": 1000}},
                {"code": "BC02", "en": "Mapo Tofu", "zh": "È∫ªÂ©ÜË±ÜËÖê", "prices": {"S": 700, "M": 1050, "L": 1400}},
                {"code": "BC03", "en": "Braised Seafood Bean Curd Claypot", "zh": "Êµ∑È≤úË±ÜËÖêÁÖ≤", "prices": {"S": 700, "M": 1050, "L": 1400}},
                {"code": "BC04", "en": "Spinach Bean Curd with Scallop", "zh": "Áë∂Êü±Áø°Áø†ÈáëÁ†ñ", "prices": {"S": 900, "M": 1350, "L": 1800}},
                {"code": "BC05", "en": "Steamed Bean Curd with Assorted Seafood", "zh": "Áø†Â°òË±ÜËÖê", "prices": {"S": 800, "M": 1200, "L": 1600}},
                {"code": "BC06", "en": "Hakka Style Stuffed Bean Curd", "zh": "ÂÆ¢ÂÆ∂ÈÖøË±ÜËÖê", "prices": {"S": 900, "M": 1350, "L": 1800}},
            ],
            "Vegetables / Ëî¨Ëèú": [
                {"code": "VE01", "en": "Saut√©ed Imported Vegetables with Garlic", "zh": "ËíúËå∏ÁÇíÂÖ•Âè£Êó∂Ëî¨", "price": "Seasonal Price"},
                {"code": "VE02", "en": "Fried Pumpkin with Salted Egg", "zh": "ÈªÑÈáëÂçóÁìúÊù°", "prices": {"S": 500, "M": 750, "L": 1000}},
                {"code": "VE03", "en": "Braised Broccoli with Black Mushroom", "zh": "È¶ôËèáÊâíË•øÂÖ∞Ëä±", "prices": {"S": 700, "M": 1050, "L": 1400}},
                {"code": "VE04", "en": "Vegetables with 3 Kinds of Egg", "zh": "‰∏âÁöáËõãÊó∂Ëî¨", "prices": {"S": 600, "M": 900, "L": 1200}},
                {"code": "VE05", "en": "Assorted Vegetables with Fungus & Beancurd", "zh": "Ê¥™‰∏ÉÂÖ¨ÁÇíÊñã", "prices": {"S": 700, "M": 1050, "L": 1400}},
                {"code": "VE06", "en": "Spicy Eggplant Claypot with Minced Pork", "zh": "È±ºÈ¶ôËåÑÂ≠êÁÖ≤", "prices": {"S": 600, "M": 900, "L": 1200}},
                {"code": "VE07", "en": "Dried Scallop with Golden Mushroom & Vegetables", "zh": "ÈáëÁë∂ÊâíÊó∂Ëî¨", "prices": {"S": 1000, "M": 1500, "L": 2000}},
                {"code": "VE08", "en": "Saut√©ed Chinese Yam (Huai Shan) with Mixed Mushrooms", "zh": "Ê∑ÆÂ±±Ë•øËäπÁÇíÊùÇËèå", "prices": {"S": 700, "M": 1050, "L": 1400}},
                {"code": "VE09", "en": "Golden Bay Special Vegetables", "zh": "ÈáëÊπæÊãõÁâåËèú", "prices": {"S": 780, "M": 1180, "L": 1560}},
                {"code": "VE10", "en": "Deep Fried Minced Shrimp with Taiwan Pechay", "zh": "Âè∞ÂºèÁôΩËèúÁÇ∏ËôæËå∏", "prices": {"S": 700, "M": 1050, "L": 1400}},
            ],
            "Rice & Noodles / È•≠Èù¢": [
                {"code": "RN01", "en": "Stir-Fried Beef Ho Fan", "zh": "‰πæÁÇíÁâõÊ≤≥", "prices": {"S": 650, "M": 980, "L": 1300}},
                {"code": "RN02", "en": "Traditional Fujian Misua", "zh": "Á¶èÂª∫ÁÇíÈù¢Á∫ø", "prices": {"S": 650, "M": 980, "L": 1300}},
                {"code": "RN03", "en": "Pineapple Fried Rice", "zh": "ÂéüÂè™Ëè†ËêùÁÇíÈ•≠", "prices": {"S": 980}},
                {"code": "RN04", "en": "Dried Scallop & Egg White Fried Rice", "zh": "Áë∂Êü±ËõãÁôΩÁÇíÈ•≠", "prices": {"S": 800, "M": 1200, "L": 1600}},
                {"code": "RN05", "en": "Braised E-Fu Noodles with Abalone Sauce", "zh": "È≤çÈ±ºÊ±ÅÁÇÜ‰ºäÈù¢", "prices": {"S": 600, "M": 900, "L": 1200}},
                {"code": "RN06", "en": "Crispy Seafood Chow Mein", "zh": "Ê∏ØÂºèÊµ∑È≤úÁÇ∏Èù¢", "prices": {"S": 650, "M": 980, "L": 1300}},
                {"code": "RN07", "en": "Birthday Noodles", "zh": "ÁîüÊó•‰ºäÈù¢", "prices": {"S": 600, "M": 900, "L": 1200}},
                {"code": "RN08", "en": "Golden Bay Fried Rice", "zh": "ÈáëÊµ∑ÊπæÁÇíÈ•≠", "prices": {"S": 800, "M": 1200, "L": 1600}},
                {"code": "RN09", "en": "Fujian Fried Rice", "zh": "Á¶èÂª∫ÁÇíÈ•≠", "prices": {"S": 650, "M": 980, "L": 1300}},
                {"code": "RN10", "en": "Yang Chow Fried Rice", "zh": "Êù®Â∑ûÁÇíÈ•≠", "prices": {"S": 600, "M": 900, "L": 1200}},
                {"code": "RN11", "en": "Salted Fish & Diced Chicken Fried Rice", "zh": "Âí∏È±ºÈ∏°Á≤íÁÇíÈ•≠", "prices": {"S": 650, "M": 980, "L": 1300}},
                {"code": "RN12", "en": "Saut√©ed Vermicelli with Minced Pork & Dried Shrimp", "zh": "ËôæÁ±≥ËÇâÁ¢éÁÇíÁ≤â‰∏ù", "prices": {"S": 700, "M": 1050, "L": 1400}},
                {"code": "RN13", "en": "Garlic Fried Rice", "zh": "ËíúËìâÁÇíÈ•≠", "prices": {"S": 450, "M": 680, "L": 900}},
                {"code": "RN14", "en": "Saut√©ed Noodles with Black Truffle", "zh": "ÈªëÊùæÈú≤ÁÇíÈù¢", "prices": {"S": 800, "M": 1200, "L": 1600}},
            ],
            "Live Seafood / Ê¥ªÊµ∑È≤ú": [
                {"code": "LS01", "en": "Mantis Shrimp (Baked in Superior Stock)", "zh": "Êµ∑Ëû≥ËûÇÁÑó‰∏äÊ±§", "price": "Seasonal Price"},
                {"code": "LS02", "en": "Mantis Shrimp (Baked with Cheese)", "zh": "ËäùÂ£´ÁÑóÊµ∑Ëû≥ËûÇ", "price": "Seasonal Price"},
                {"code": "LS03", "en": "Mantis Shrimp (Steamed with Garlic)", "zh": "ËíúËìâËí∏Êµ∑Ëû≥ËûÇ", "price": "Seasonal Price"},
                {"code": "LS04", "en": "Mantis Shrimp (with Superior E-FU Noodles)", "zh": "Êµ∑Ëû≥ËûÇ‰∏äÊ±§‰ºäÈù¢", "price": "Seasonal Price"},
                {"code": "LS05", "en": "Mantis Shrimp (Salt & Pepper)", "zh": "Ê§íÁõêÊµ∑Ëû≥ËûÇ", "price": "Seasonal Price"},
                {"code": "LS06", "en": "Mantis Shrimp (Salted Egg Yolk)", "zh": "ÈáëÊ≤ôÊµ∑Ëû≥ËûÇ", "price": "Seasonal Price"},
                {"code": "LS07", "en": "Mantis Shrimp (Typhoon Shelter Style)", "zh": "ÈÅøÈ£éÂ°òÁÇíÊµ∑Ëû≥ËûÇ", "price": "Seasonal Price"},
                {"code": "LS08", "en": "Mantis Shrimp (Stir-Fried Ginger Onion)", "zh": "ÂßúËë±ÁÇíÊµ∑Ëû≥ËûÇ", "price": "Seasonal Price"},
                {"code": "LS09", "en": "Mantis Shrimp (Steamed)", "zh": "Ê∏ÖËí∏Êµ∑Ëû≥ËûÇ", "price": "Seasonal Price"},
                {"code": "LS10", "en": "Live Suahe (Baked in Superior Stock)", "zh": "Ê≤ôËôæÁÑó‰∏äÊ±§", "price": "Seasonal Price"},
                {"code": "LS11", "en": "Live Suahe (Baked with Cheese)", "zh": "ËäùÂ£´ÁÑóÊ≤ôËôæ", "price": "Seasonal Price"},
                {"code": "LS12", "en": "Live Suahe (Steamed with Garlic)", "zh": "ËíúËìâËí∏Ê≤ôËôæ", "price": "Seasonal Price"},
                {"code": "LS13", "en": "Live Suahe (with Superior E-FU Noodles)", "zh": "Ê≤ôËôæ‰∏äÊ±§‰ºäÈù¢", "price": "Seasonal Price"},
                {"code": "LS14", "en": "Live Suahe (Salt & Pepper)", "zh": "Ê§íÁõêÊ≤ôËôæ", "price": "Seasonal Price"},
                {"code": "LS15", "en": "Live Suahe (Salted Egg Yolk)", "zh": "ÈáëÊ≤ôÊ≤ôËôæ", "price": "Seasonal Price"},
                {"code": "LS16", "en": "Live Suahe (Typhoon Shelter Style)", "zh": "ÈÅøÈ£éÂ°òÁÇíÊ≤ôËôæ", "price": "Seasonal Price"},
                {"code": "LS17", "en": "Live Suahe (Stir-Fried Ginger Onion)", "zh": "ÂßúËë±ÁÇíÊ≤ôËôæ", "price": "Seasonal Price"},
                {"code": "LS18", "en": "Live Suahe (Steamed)", "zh": "Ê∏ÖËí∏Ê≤ôËôæ", "price": "Seasonal Price"},
                {"code": "LS19", "en": "Lobster (Baked in Superior Stock)", "zh": "ÈæôËôæÁÑó‰∏äÊ±§", "price": "Seasonal Price"},
                {"code": "LS20", "en": "Lobster (Baked with Cheese)", "zh": "ËäùÂ£´ÁÑóÈæôËôæ", "price": "Seasonal Price"},
                {"code": "LS21", "en": "Lobster (Steamed with Garlic)", "zh": "ËíúËìâËí∏ÈæôËôæ", "price": "Seasonal Price"},
                {"code": "LS22", "en": "Lobster (with Superior E-FU Noodles)", "zh": "ÈæôËôæ‰∏äÊ±§‰ºäÈù¢", "price": "Seasonal Price"},
                {"code": "LS23", "en": "Lobster (Salt & Pepper)", "zh": "Ê§íÁõêÈæôËôæ", "price": "Seasonal Price"},
                {"code": "LS24", "en": "Lobster (Salted Egg Yolk)", "zh": "ÈáëÊ≤ôÈæôËôæ", "price": "Seasonal Price"},
                {"code": "LS25", "en": "Lobster (Typhoon Shelter Style)", "zh": "ÈÅøÈ£éÂ°òÁÇíÈæôËôæ", "price": "Seasonal Price"},
                {"code": "LS26", "en": "Lobster (Stir-Fried Ginger Onion)", "zh": "ÂßúËë±ÁÇíÈæôËôæ", "price": "Seasonal Price"},
                {"code": "LS27", "en": "Lobster (Steamed)", "zh": "Ê∏ÖËí∏ÈæôËôæ", "price": "Seasonal Price"},
                {"code": "LS28", "en": "Lapu-Lapu (Baked in Superior Stock)", "zh": "Áü≥ÊñëÈ±ºÁÑó‰∏äÊ±§", "price": "Seasonal Price"},
                {"code": "LS29", "en": "Lapu-Lapu (Baked with Cheese)", "zh": "ËäùÂ£´ÁÑóÁü≥ÊñëÈ±º", "price": "Seasonal Price"},
                {"code": "LS30", "en": "Lapu-Lapu (Steamed with Garlic)", "zh": "ËíúËìâËí∏Áü≥ÊñëÈ±º", "price": "Seasonal Price"},
                {"code": "LS31", "en": "Lapu-Lapu (with Superior E-FU Noodles)", "zh": "Áü≥ÊñëÈ±º‰∏äÊ±§‰ºäÈù¢", "price": "Seasonal Price"},
                {"code": "LS32", "en": "Lapu-Lapu (Salt & Pepper)", "zh": "Ê§íÁõêÁü≥ÊñëÈ±º", "price": "Seasonal Price"},
                {"code": "LS33", "en": "Lapu-Lapu (Salted Egg Yolk)", "zh": "ÈáëÊ≤ôÁü≥ÊñëÈ±º", "price": "Seasonal Price"},
                {"code": "LS34", "en": "Lapu-Lapu (Typhoon Shelter Style)", "zh": "ÈÅøÈ£éÂ°òÁÇíÁü≥ÊñëÈ±º", "price": "Seasonal Price"},
                {"code": "LS35", "en": "Lapu-Lapu (Stir-Fried Ginger Onion)", "zh": "ÂßúËë±ÁÇíÁü≥ÊñëÈ±º", "price": "Seasonal Price"},
                {"code": "LS36", "en": "Lapu-Lapu (Steamed)", "zh": "Ê∏ÖËí∏Áü≥ÊñëÈ±º", "price": "Seasonal Price"},
                {"code": "LS37", "en": "Rock Lobster (Baked in Superior Stock)", "zh": "Â§ßÈæôËôæÁÑó‰∏äÊ±§", "price": "Seasonal Price"},
                {"code": "LS38", "en": "Rock Lobster (Baked with Cheese)", "zh": "ËäùÂ£´ÁÑóÂ§ßÈæôËôæ", "price": "Seasonal Price"},
                {"code": "LS39", "en": "Rock Lobster (Steamed with Garlic)", "zh": "ËíúËìâËí∏Â§ßÈæôËôæ", "price": "Seasonal Price"},
                {"code": "LS40", "en": "Rock Lobster (with Superior E-FU Noodles)", "zh": "Â§ßÈæôËôæ‰∏äÊ±§‰ºäÈù¢", "price": "Seasonal Price"},
                {"code": "LS41", "en": "Rock Lobster (Salt & Pepper)", "zh": "Ê§íÁõêÂ§ßÈæôËôæ", "price": "Seasonal Price"},
                {"code": "LS42", "en": "Rock Lobster (Salted Egg Yolk)", "zh": "ÈáëÊ≤ôÂ§ßÈæôËôæ", "price": "Seasonal Price"},
                {"code": "LS43", "en": "Rock Lobster (Typhoon Shelter Style)", "zh": "ÈÅøÈ£éÂ°òÁÇíÂ§ßÈæôËôæ", "price": "Seasonal Price"},
                {"code": "LS44", "en": "Rock Lobster (Stir-Fried Ginger Onion)", "zh": "ÂßúËë±ÁÇíÂ§ßÈæôËôæ", "price": "Seasonal Price"},
                {"code": "LS45", "en": "Rock Lobster (Steamed)", "zh": "Ê∏ÖËí∏Â§ßÈæôËôæ", "price": "Seasonal Price"},
                {"code": "LS46", "en": "Mud Crab (Baked in Superior Stock)", "zh": "ËûÉËüπÁÑó‰∏äÊ±§", "price": "Seasonal Price"},
                {"code": "LS47", "en": "Mud Crab (Baked with Cheese)", "zh": "ËäùÂ£´ÁÑóËûÉËüπ", "price": "Seasonal Price"},
                {"code": "LS48", "en": "Mud Crab (Steamed with Garlic)", "zh": "ËíúËìâËí∏ËûÉËüπ", "price": "Seasonal Price"},
                {"code": "LS49", "en": "Mud Crab (with Superior E-FU Noodles)", "zh": "ËûÉËüπ‰∏äÊ±§‰ºäÈù¢", "price": "Seasonal Price"},
                {"code": "LS50", "en": "Mud Crab (Salt & Pepper)", "zh": "Ê§íÁõêËûÉËüπ", "price": "Seasonal Price"},
                {"code": "LS51", "en": "Mud Crab (Salted Egg Yolk)", "zh": "ÈáëÊ≤ôËûÉËüπ", "price": "Seasonal Price"},
                {"code": "LS52", "en": "Mud Crab (Typhoon Shelter Style)", "zh": "ÈÅøÈ£éÂ°òÁÇíËûÉËüπ", "price": "Seasonal Price"},
                {"code": "LS53", "en": "Mud Crab (Stir-Fried Ginger Onion)", "zh": "ÂßúËë±ÁÇíËûÉËüπ", "price": "Seasonal Price"},
                {"code": "LS54", "en": "Mud Crab (Steamed)", "zh": "Ê∏ÖËí∏ËûÉËüπ", "price": "Seasonal Price"},
                {"code": "LS55", "en": "Clams (Baked in Superior Stock)", "zh": "Ëõ§ËúäÁÑó‰∏äÊ±§", "price": "Seasonal Price"},
                {"code": "LS56", "en": "Clams (Baked with Cheese)", "zh": "ËäùÂ£´ÁÑóËõ§Ëúä", "price": "Seasonal Price"},
                {"code": "LS57", "en": "Clams (Steamed with Garlic)", "zh": "ËíúËìâËí∏Ëõ§Ëúä", "price": "Seasonal Price"},
                {"code": "LS58", "en": "Clams (with Superior E-FU Noodles)", "zh": "Ëõ§Ëúä‰∏äÊ±§‰ºäÈù¢", "price": "Seasonal Price"},
                {"code": "LS59", "en": "Clams (Salt & Pepper)", "zh": "Ê§íÁõêËõ§Ëúä", "price": "Seasonal Price"},
                {"code": "LS60", "en": "Clams (Salted Egg Yolk)", "zh": "ÈáëÊ≤ôËõ§Ëúä", "price": "Seasonal Price"},
                {"code": "LS61", "en": "Clams (Typhoon Shelter Style)", "zh": "ÈÅøÈ£éÂ°òÁÇíËõ§Ëúä", "price": "Seasonal Price"},
                {"code": "LS62", "en": "Clams (Stir-Fried Ginger Onion)", "zh": "ÂßúËë±ÁÇíËõ§Ëúä", "price": "Seasonal Price"},
                {"code": "LS63", "en": "Clams (Steamed)", "zh": "Ê∏ÖËí∏Ëõ§Ëúä", "price": "Seasonal Price"},
                {"code": "LS64", "en": "Nylon Clams (Baked in Superior Stock)", "zh": "Ëõ§ËúäÁÑó‰∏äÊ±§", "price": "Seasonal Price"},
                {"code": "LS65", "en": "Nylon Clams (Baked with Cheese)", "zh": "ËäùÂ£´ÁÑóËõ§Ëúä", "price": "Seasonal Price"},
                {"code": "LS66", "en": "Nylon Clams (Steamed with Garlic)", "zh": "ËíúËìâËí∏Ëõ§Ëúä", "price": "Seasonal Price"},
                {"code": "LS67", "en": "Nylon Clams (with Superior E-FU Noodles)", "zh": "Ëõ§Ëúä‰∏äÊ±§‰ºäÈù¢", "price": "Seasonal Price"},
                {"code": "LS68", "en": "Nylon Clams (Salt & Pepper)", "zh": "Ê§íÁõêËõ§Ëúä", "price": "Seasonal Price"},
                {"code": "LS69", "en": "Nylon Clams (Salted Egg Yolk)", "zh": "ÈáëÊ≤ôËõ§Ëúä", "price": "Seasonal Price"},
                {"code": "LS70", "en": "Nylon Clams (Typhoon Shelter Style)", "zh": "ÈÅøÈ£éÂ°òÁÇíËõ§Ëúä", "price": "Seasonal Price"},
                {"code": "LS71", "en": "Nylon Clams (Stir-Fried Ginger Onion)", "zh": "ÂßúËë±ÁÇíËõ§Ëúä", "price": "Seasonal Price"},
                {"code": "LS72", "en": "Nylon Clams (Steamed)", "zh": "Ê∏ÖËí∏Ëõ§Ëúä", "price": "Seasonal Price"},
                {"code": "LS73", "en": "Shark (Baked in Superior Stock)", "zh": "È≤®È±ºÁÑó‰∏äÊ±§", "price": "Seasonal Price"},
                {"code": "LS74", "en": "Shark (Baked with Cheese)", "zh": "ËäùÂ£´ÁÑóÈ≤®È±º", "price": "Seasonal Price"},
                {"code": "LS75", "en": "Shark (Steamed with Garlic)", "zh": "ËíúËìâËí∏È≤®È±º", "price": "Seasonal Price"},
                {"code": "LS76", "en": "Shark (with Superior E-FU Noodles)", "zh": "È≤®È±º‰∏äÊ±§‰ºäÈù¢", "price": "Seasonal Price"},
                {"code": "LS77", "en": "Shark (Salt & Pepper)", "zh": "Ê§íÁõêÈ≤®È±º", "price": "Seasonal Price"},
                {"code": "LS78", "en": "Shark (Salted Egg Yolk)", "zh": "ÈáëÊ≤ôÈ≤®È±º", "price": "Seasonal Price"},
                {"code": "LS79", "en": "Shark (Typhoon Shelter Style)", "zh": "ÈÅøÈ£éÂ°òÁÇíÈ≤®È±º", "price": "Seasonal Price"},
                {"code": "LS80", "en": "Shark (Stir-Fried Ginger Onion)", "zh": "ÂßúËë±ÁÇíÈ≤®È±º", "price": "Seasonal Price"},
                {"code": "LS81", "en": "Shark (Steamed)", "zh": "Ê∏ÖËí∏È≤®È±º", "price": "Seasonal Price"},
            ],
            "Dimsum / ÁÇπÂøÉ": [
                {"code": "DM01", "en": "Hakaw (Shrimp Dumpling)", "zh": "Êô∂ËéπÈ≤úËôæÈ•∫", "price": 328},
                {"code": "DM02", "en": "Chicken Feet", "zh": "Ë±âÊ±ÅËí∏Âá§Áà™", "price": 288},
                {"code": "DM03", "en": "Pork Siomai", "zh": "ËüπÁ±ΩÁÉßÂçñÁöá", "price": 268},
                {"code": "DM04", "en": "Steamed Spare Ribs", "zh": "Ë±âÊ±ÅËí∏ÊéíÈ™®", "price": 258},
                {"code": "DM05", "en": "Chiu Chow Dumpling", "zh": "ÊΩÆÂºèËí∏Á≤âÁ≤ø", "price": 258},
                {"code": "DM06", "en": "Beef Ball with Beancurd Stick", "zh": "È≤úÁ´πÁâõËÇâÁêÉ", "price": 258},
                {"code": "DM07", "en": "Bean Curd Sheet Roll", "zh": "ËöùÊ≤πÈ≤úÁ´πÂç∑", "price": 258},
                {"code": "DM08", "en": "Glutinous Rice Wrap (Machang)", "zh": "Ëç∑Âè∂ÁèçÁè†È∏°", "price": 258},
                {"code": "DM09", "en": "Crystal Spinach Dumpling", "zh": "Ê∞¥Êô∂Ëè†ËèúÈ•∫", "price": 258},
                {"code": "DM10", "en": "Steamed Beef Tripe with Black Pepper", "zh": "ÈªëÊ§íËí∏ÁâõËÇö", "price": 258},
                {"code": "DM11", "en": "Traditional Malay Cake", "zh": "ÊÄÄÊóßÈ©¨ÊãâÁ≥ï", "price": 208},

                {"code": "DM12", "en": "Egg Tart", "zh": "ÈÖ•ÁöÆÁÑóËõãÊåû", "price": 258},
                {"code": "DM13", "en": "Baked BBQ Asado Pork Pie", "zh": "ÊùæÂåñÂèâÁÉßÈÖ•", "price": 258},

                {"code": "DM14", "en": "Pan-Fried Radish Cake", "zh": "È¶ôÁÖéËêùÂçúÁ≥ï", "price": 258},
                {"code": "DM15", "en": "XO Sauce Radish Cake", "zh": "XOÈÖ±ËêùÂçúÁ≥ï", "price": 258},
                {"code": "DM16", "en": "Pan-Fried Rice Roll with XO Sauce", "zh": "XOÈÖ±ÁÖéËÇ†Á≤â", "price": 258},
                {"code": "DM17", "en": "Pan-Fried Pork Bun", "zh": "ÁîüÁÖéÈ≤úËÇâÂåÖ", "price": 258},

                {"code": "DM18", "en": "Century Egg & Pork Congee", "zh": "ÁöÆËõãÁò¶ËÇâÁ≤•", "price": 258},
                {"code": "DM19", "en": "Sliced Fish Congee", "zh": "È≤úÊªëÈ±ºÁâáÁ≤•", "price": 258},

                {"code": "DM20", "en": "Fresh Shrimp Rice Roll", "zh": "ÊâãÊãÜÈ≤úËôæËÇ†Á≤â", "price": 328},
                {"code": "DM21", "en": "BBQ Pork Asado Rice Roll", "zh": "ËúúÊ±ÅÂèâÁÉßËÇ†Á≤â", "price": 258},
                {"code": "DM22", "en": "Minced Beef Rice Roll", "zh": "È¶ôËåúÁâõËÇâËÇ†Á≤â", "price": 258},
                {"code": "DM23", "en": "Plain Rice Roll", "zh": "ÊâãÂ∑•Ëí∏ÊªëËÇ†Á≤â", "price": 228},

                {"code": "DM24", "en": "Salted Egg Yolk Custard Bun", "zh": "ÈáëÈ¶ôÊµÅÊ≤ôÂåÖ", "price": 258},
                {"code": "DM25", "en": "Steamed BBQ Pork Bun (Asado Pao)", "zh": "ËúúÊ±ÅÂèâÁÉßÂåÖ", "price": 258},
                {"code": "DM26", "en": "Birthday Bun (Lotus Paste)", "zh": "Ëé≤ËìâÂØøÊ°ÉÂåÖ", "price": 258},
                {"code": "DM27", "en": "Shanghai Xiao Long Bao", "zh": "‰∏äÊµ∑Â∞èÁ¨ºÂåÖ", "price": 258},
                {"code": "DM28", "en": "Steamed Mantou", "zh": "Ëí∏È¶íÂ§¥", "price": 208},

                {"code": "DM29", "en": "Crispy Cheese Prawn Roll", "zh": "ËäùÂ£´ËôæÊò•Âç∑", "price": 258},
                {"code": "DM30", "en": "Deep Fried Taro Puff", "zh": "ÈÖ•ËÑÜÈ¶ôËäãËßí", "price": 258},
                {"code": "DM31", "en": "Ham Sui Kok (Fried Glutinous Rice Dumpling)", "zh": "ÂÆ∂‰π°Âí∏Ê∞¥Ëßí", "price": 258},
                {"code": "DM32", "en": "Fried Sesame Balls (Buchi)", "zh": "È¶ôÁÇ∏ËäùÈ∫ªÁêÉ", "price": 208},
                {"code": "DM33", "en": "Fried Mantou", "zh": "ÈªÑÈáëÁÇ∏È¶íÂ§¥", "price": 208},

                {"code": "DM34", "en": "Coffee Jelly", "zh": "ÁîüÁ£®ÂíñÂï°Á≥ï", "price": 188},
                {"code": "DM35", "en": "Mango Mochi (Snow Lady)", "zh": "È¶ôËäíÈõ™Â™öÂ®ò", "price": 228},

                {"code": "DM36", "en": "Hot Almond Cream with Glutinous Balls", "zh": "Ê±§ÂúÜÊùè‰ªÅËå∂", "price": 188},
                {"code": "DM37", "en": "Hot Taro Sago", "zh": "È¶ôËäãË•øÁ±≥Èú≤", "price": 188},
                {"code": "DM38", "en": "Hot Black Glutinous Rice with Coconut Milk", "zh": "Ê§∞È¶ôÁ¥´Á±≥Èú≤", "price": 188},
            ],
            "Set Menu / Â•óÈ§ê": [
                {"code": "SET1", "en": "Set Menu 1 (Good for 10)", "zh": "Â•óÈ§ê‰∏Ä", "price": 25800, "desc": "Assorted Cold Cuts, Steamed Live Suahe, Abalone Soup, Saut√©ed Shrimp & Squid, Seafood Salad Roll, Abalone Cubes, Steamed Lapu-Lapu, Roasted Chicken, Free Noodle or Rice, Free 2 Kinds of Dessert"},
                {"code": "SET2", "en": "Set Menu 2 (Good for 10)", "zh": "Â•óÈ§ê‰∫å", "price": 32800, "desc": "Assorted Cold Cuts, Steamed Prawns, Double Boiled Fish Maw Soup, Scallop Salad Roll, Whole 10-Head Abalone, Fried Crispy Pigeon, Steamed Lapu-Lapu, Stir Fried Sea Cucumber, Shark Fin Rice, Free 2 Kinds of Dessert"},
                {"code": "SET3", "en": "Set Menu 3 (Good for 10)", "zh": "Â•óÈ§ê‰∏â", "price": 35800, "desc": "Suckling Pig, Steamed Prawns, Shark Fin Soup, Diced Scallop in Taro Ring, Whole 10-Head Abalone with Sea Cucumber, Steamed Lapu-Lapu, Roasted Goose, Typhoon Shelter Crab, Free Noodles or Rice, Free 2 Kinds of Dessert"},
                {"code": "SET4", "en": "Set Menu 4 (Good for 10)", "zh": "Â•óÈ§êÂõõ", "price": 38800, "desc": "Suckling Pig with Mala Sea Cucumber, Shark Fin Soup, Imported Scallop with Broccoli, Shrimp Stuffed Fried Crab Claw, 8-Head Abalone with Fish Maw, Steamed Tiger Lapu-Lapu, Salt & Pepper Mantis Shrimp, Roasted Duck, Free Noodles or Rice, Free 2 Kinds of Dessert"},
                {"code": "SET5", "en": "Set Menu 5 (Good for 10)", "zh": "Â•óÈ§ê‰∫î", "price": 55800, "desc": "Suckling Pig (Whole), Steamed Rock Lobster, Fried Taro Scallop Pie, Chicken Shark Fin Soup (Individual), Sea Cucumber with Dried Scallop, 8-Head Abalone with Fish Maw, Steamed Red Lapu-Lapu, Roasted Goose, Free Noodles or Rice, Bird's Nest in Mango Pomelo Sweet Soup, Mixed Fruits"},
                {"code": "SET6", "en": "Set Menu 6 (Good for 10)", "zh": "Â•óÈ§êÂÖ≠", "price": 65800, "desc": "Suckling Pig with Foie Gras & Caviar, Braised Shark Fin Soup, Original Lobster with Superior Sauce, Dried Scallop with Winter Melon Ring, Whole Sea Cucumber with Shredded Meat, Whole 6-Head Abalone with Fish Maw, Steamed Double Red Lapu-Lapu, Roasted Goose, Whole Scallop with Black Truffle Noodles, Bird's Nest Soup, Mixed Fruits"},
            ]
        }

        self.stdout.write("Clearing old menu data...")

        # WIPE DATA
        MenuItemPrice.objects.all().delete()
        MenuItem.objects.all().delete()
        Category.objects.all().delete()
        CookingMethod.objects.all().delete()

        # Path to your images folder (inside backend/seed_images/menu/)
        BASE_IMAGE_PATH = os.path.join(settings.BASE_DIR, 'seed_images', 'menu')

        with transaction.atomic():
            cat_order = 1
            for cat_full_name, items in menu_data.items():
                
                # 1. Category Name Parsing
                if " / " in cat_full_name:
                     cat_parts = cat_full_name.split(" / ")
                     cat_raw = cat_parts[0]
                     cat_zh = cat_parts[-1].strip()
                     cat_en = cat_raw.strip()
                else:
                    cat_en = cat_full_name
                    cat_zh = ""

                category, _ = Category.objects.get_or_create(
                    name=cat_en,
                    defaults={'name_zh': cat_zh, 'order': cat_order}
                )
                cat_order += 1
                
                self.stdout.write(f"Processing {category.name}...")

                # 2. Item Processing
                for item_data in items:
                    raw_name = item_data['en']
                    raw_name_zh = item_data.get('zh', '')
                    item_code = item_data.get('code')

                    # --- LOGIC FOR LIVE SEAFOOD GROUPING ---
                    # Matches "Name (Method)"
                    match = re.match(r"^(.*?)\s*\((.*?)\)$", raw_name)
                    
                    if "Live Seafood" in cat_en and match:
                        base_name = match.group(1).strip()
                        method_name = match.group(2).strip()
                        
                        # Use Translation Map for the BASE item name
                        base_name_zh = SEAFOOD_TRANSLATIONS.get(base_name, raw_name_zh)

                        # Create the Parent Item (e.g., "Mantis Shrimp")
                        item, created = MenuItem.objects.get_or_create(
                            name=base_name,
                            category=category,
                            defaults={
                                'code': item_code, # Takes the code of the first parsed variant
                                'name_zh': base_name_zh,
                                'description': "Fresh from our aquariums, cooked to your preference.",
                            }
                        )

                        # --- IMAGE HANDLING LOGIC FOR LIVE SEAFOOD ---
                        if created and base_name in SEAFOOD_IMAGES:
                            filename = SEAFOOD_IMAGES[base_name]
                            file_path = os.path.join(BASE_IMAGE_PATH, 'Live Seafood', filename)
                            
                            if os.path.exists(file_path):
                                self.stdout.write(f"  --> Attaching image: {filename}")
                                with open(file_path, 'rb') as f:
                                    item.image.save(filename, File(f), save=True)
                            else:
                                self.stdout.write(self.style.WARNING(f"  --> Image not found: {file_path}"))

                        # Create/Link Cooking Method
                        cooking_method, _ = CookingMethod.objects.get_or_create(name=method_name)
                        item.cooking_methods.add(cooking_method)

                        # Only add price logic on the first creation
                        if created:
                            MenuItemPrice.objects.create(
                                menu_item=item, size="Regular", is_seasonal=True
                            )

                    else:
                        # --- STANDARD ITEM LOGIC ---
                        item, created = MenuItem.objects.get_or_create(
                            code=item_code,
                            defaults={
                                'category': category,
                                'name': raw_name,
                                'name_zh': raw_name_zh,
                                'description': item_data.get('desc', ''),
                            }
                        )

                        # --- IMAGE HANDLING LOGIC FOR STANDARD ITEMS ---
                        if created and item_code in IMAGE_MAP:
                            rel_path = IMAGE_MAP[item_code]
                            file_path = os.path.join(BASE_IMAGE_PATH, rel_path)
                            
                            if os.path.exists(file_path):
                                self.stdout.write(f"  --> Attaching image: {rel_path}")
                                with open(file_path, 'rb') as f:
                                    # Extract just the filename for saving
                                    filename = os.path.basename(rel_path)
                                    item.image.save(filename, File(f), save=True)
                            else:
                                self.stdout.write(self.style.WARNING(f"  --> Image not found: {file_path}"))
                        
                        # If item existed, wipe old prices to re-seed
                        if not created:
                             item.prices.all().delete()

                        if 'prices' in item_data:
                            for size, price in item_data['prices'].items():
                                val = None
                                is_seasonal = False
                                if isinstance(price, str) and not price.isdigit():
                                    is_seasonal = True
                                else:
                                    val = Decimal(price)
                                MenuItemPrice.objects.create(menu_item=item, size=size, price=val, is_seasonal=is_seasonal)
                        elif 'price' in item_data:
                            price_val = item_data['price']
                            val = None
                            is_seasonal = False
                            if isinstance(price_val, str) and "Seasonal" in price_val:
                                is_seasonal = True
                            else:
                                val = Decimal(price_val)
                            MenuItemPrice.objects.create(menu_item=item, size="Regular", price=val, is_seasonal=is_seasonal)

        self.stdout.write(self.style.SUCCESS('Menu seeded successfully!'))

import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import logo from '../../../assets/images/goldenbaylogo.svg';

const LoginPage = () => {
  const [username, setUsername] = useState('');
  const [password, setPassword] = useState('');
  const [error, setError] = useState('');
  const navigate = useNavigate();

  const handleLogin = async (e) => {
    e.preventDefault();
    setError('');

    try {
      const response = await fetch('http://127.0.0.1:8000/api/token/', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ username, password })
      });

      const data = await response.json();

      if (response.ok) {
        localStorage.setItem('accessToken', data.access);
        localStorage.setItem('refreshToken', data.refresh);
        navigate('/admin');
      } else {
        setError('Invalid Username or Password');
      }
    } catch (err) {
      setError('Server error. Please try again.');
    }
  };

  return (
    <div className="min-h-screen bg-gray-50 flex flex-col items-center justify-center p-4">
      {/* Logo Container with background for visibility if logo is gold/white */}
      <div className="bg-black/5 p-4 rounded-full mb-8">
        <img src={logo} className="h-20 w-auto" alt="Logo" />
      </div>

      <div className="bg-white p-10 rounded-sm border border-gray-200 w-full max-w-sm text-center shadow-xl">
        <h2 className="text-2xl font-serif text-gray-900 mb-2">Staff Access</h2>
        <p className="text-xs text-gray-500 uppercase tracking-widest mb-8">Authorized Personnel Only</p>
        
        {error && <div className="text-red-500 text-sm mb-4 bg-red-50 p-2 border border-red-200">{error}</div>}

        <form onSubmit={handleLogin} className="space-y-4">
          <input 
            type="text" 
            placeholder="Username"
            className="w-full bg-gray-50 border border-gray-200 p-3 text-gray-900 focus:border-gold-600 outline-none text-center rounded-sm transition-all"
            onChange={(e) => setUsername(e.target.value)}
          />
          <input 
            type="password" 
            placeholder="Password"
            className="w-full bg-gray-50 border border-gray-200 p-3 text-gray-900 focus:border-gold-600 outline-none text-center rounded-sm transition-all"
            onChange={(e) => setPassword(e.target.value)}
          />
          <button className="w-full bg-gold-600 text-white font-bold py-3 uppercase tracking-widest hover:bg-black transition-colors rounded-sm shadow-md">
            Login
          </button>
        </form>
      </div>
    </div>
  );
};

export default LoginPage;

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# üîê SECURITY
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
SECRET_KEY=django-insecure-d2_(mr&0a49w-$6l6lh(7)dwk83@#s0+r-b0sgrm!xa(w3#v1#
DEBUG=True
SESSION_COOKIE_SECURE=False
CSRF_COOKIE_SECURE=False
SECURE_SSL_REDIRECT=False


# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# üåê ALLOWED HOSTS
# (Set this manually in settings.py or extend to read via env list)
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
ALLOWED_HOSTS=goldenbay.com.ph,www.goldenbay.com.ph,58.97.186.131,localhost,127.0.0.1

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# üóÑÔ∏è DATABASE CONFIGURATION
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
DB_NAME=goldenbay_db
DB_USER=goldenbay_user
DB_PASSWORD=Sweetpotato27!
DB_HOST=localhost
DB_PORT=5432
DATABASE_URL=postgres://goldenbay_user:Sweetpotato27!@localhost:5432/goldenbay_db

# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# üì¨ EMAIL SETTINGS
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=goldenbay.marketing@gmail.com
EMAIL_HOST_PASSWORD=yncszabslxarkqol

SEMAPHORE_API_KEY=3f24fedb0254c9d682f90994b0263c14

# # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# # üßµ CELERY + REDIS
# # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# CELERY_BROKER_URL=redis://localhost:6379/0
# CELERY_RESULT_BACKEND=redis://localhost:6379/0

# # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# # üåê CORS / CSRF CONFIGURATION
# # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# CORS_ALLOWED_ORIGINS=http://localhost:5173,http://127.0.0.1:5173,http://192.168.27.24:5173
# CSRF_TRUSTED_ORIGINS=http://localhost:5173,http://127.0.0.1:5173,http://192.168.27.24:5173


import React from 'react';
import { useNavigate } from 'react-router-dom';
import { LogOut } from 'lucide-react';

const LogoutButton = () => {
  const navigate = useNavigate();

  const handleLogout = () => {
    localStorage.removeItem('accessToken');
    localStorage.removeItem('refreshToken');
    localStorage.removeItem('isAdmin'); 
    navigate('/login');
  };

  return (
    <button 
      onClick={handleLogout}
      className="w-full flex items-center gap-3 px-4 py-3 text-sm font-medium text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-md transition-all duration-200 group"
    >
      <LogOut size={18} className="text-gray-400 group-hover:text-red-500" />
      Sign Out
    </button>
  );
};

export default LogoutButton;

// src/components/layout/ProtectedRoute.jsx
import React from 'react';
import { Navigate } from 'react-router-dom';

const ProtectedRoute = ({ children }) => {
  // Check if the JWT access token exists
  const token = localStorage.getItem('accessToken');
  
  if (!token) {
    return <Navigate to="/login" replace />;
  }

  return children;
};

export default ProtectedRoute;

import React, { useState, useEffect } from 'react';
import { motion } from 'framer-motion';
import { Calendar } from 'lucide-react';
import { Link } from 'react-router-dom';
import heroimage from '../../../assets/images/heroimage2.webp'; // Or a dedicated news banner

const BACKEND_URL = "http://127.0.0.1:8000";

const NewsPage = () => {
  const [posts, setPosts] = useState([]);
  const [filter, setFilter] = useState('ALL');

  useEffect(() => {
    const fetchPosts = async () => {
      let url = `${BACKEND_URL}/api/marketing/`;
      if (filter !== 'ALL') url += `?type=${filter}`;
      
      try {
        const res = await fetch(url);
        if (res.ok) {
            const data = await res.json();
            setPosts(data);
        }
      } catch (err) {
        console.error("Failed to load news", err);
      }
    };
    fetchPosts();
  }, [filter]);

  const getExcerpt = (htmlContent) => {
    const tempDiv = document.createElement("div");
    tempDiv.innerHTML = htmlContent;
    const text = tempDiv.textContent || tempDiv.innerText || "";
    return text.length > 120 ? text.substring(0, 120) + "..." : text;
  };

  return (
    <div className="min-h-screen bg-cream-50 text-gray-900 transition-colors duration-300">
      
      {/* --- STANDARDIZED HERO BANNER --- */}
      <div className="relative h-[40vh] w-full flex items-center justify-center pt-24 bg-black">
        <div className="absolute inset-0 opacity-60">
          <img src={heroimage} className="w-full h-full object-cover" alt="Golden Bay Events" />
          <div className="absolute inset-0 bg-gradient-to-b from-black/60 via-transparent to-cream-50"></div>
        </div>
        <div className="relative z-10 text-center">
          <Link to="/" className="text-xs tracking-[0.4em] uppercase mb-6 text-white hover:text-gold-400 transition-colors block">‚Üê Back to Experience</Link>
          <h1 className="text-5xl md:text-5xl font-serif tracking-widest uppercase text-white drop-shadow-md">News & Promos</h1>
          <div className="h-[1px] w-24 bg-gold-400 mt-8 mx-auto"></div>
        </div>
      </div>

      <div className="px-6 md:px-24 py-16">
        {/* Filter Tabs */}
        <div className="flex justify-center gap-8 text-xs uppercase tracking-widest text-gray-500 mb-16">
            <button 
                onClick={() => setFilter('ALL')} 
                className={filter === 'ALL' 
                    ? 'text-black border-b border-gold-600 font-bold' 
                    : 'hover:text-gold-600'}
            >
                All Updates
            </button>
            <button 
                onClick={() => setFilter('PROMO')} 
                className={filter === 'PROMO' 
                    ? 'text-black border-b border-gold-600 font-bold' 
                    : 'hover:text-gold-600'}
            >
                Promotions
            </button>
            <button 
                onClick={() => setFilter('BLOG')} 
                className={filter === 'BLOG' 
                    ? 'text-black border-b border-gold-600 font-bold' 
                    : 'hover:text-gold-600'}
            >
                Events & Stories
            </button>
        </div>

        {/* Posts Grid */}
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
            {posts.map((post) => (
            <motion.div 
                key={post.id}
                initial={{ opacity: 0, y: 20 }}
                whileInView={{ opacity: 1, y: 0 }}
                className="group flex flex-col h-full bg-white border border-gray-200 rounded-sm overflow-hidden hover:border-gold-600/30 transition-all duration-300 shadow-sm hover:shadow-md"
            >
                <Link to={`/news/${post.slug}`} className="block h-64 overflow-hidden relative">
                    {post.image ? (
                    <img 
                        src={post.image.startsWith('http') ? post.image : `${BACKEND_URL}${post.image}`} 
                        alt={post.title} 
                        className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" 
                    />
                    ) : (
                    <div className="w-full h-full bg-gray-100 flex items-center justify-center text-gray-400">No Image</div>
                    )}
                    
                    <div className="absolute top-4 left-4 bg-white/90 px-3 py-1 text-[10px] font-bold uppercase tracking-widest text-gold-600 border border-gold-600/30 backdrop-blur-sm">
                        {post.type === 'PROMO' ? 'Limited Offer' : 'Event'}
                    </div>
                </Link>

                <div className="p-6 flex flex-col flex-grow">
                    <div className="flex items-center gap-2 text-gray-500 text-[10px] uppercase tracking-widest mb-3">
                        <Calendar size={12} />
                        {new Date(post.created_at).toLocaleDateString()}
                    </div>

                    <Link to={`/news/${post.slug}`} className="block mb-3">
                        <h3 className="text-xl font-serif text-gray-900 group-hover:text-gold-600 transition-colors">
                            {post.title}
                        </h3>
                    </Link>

                    <p className="text-gray-600 text-sm leading-relaxed mb-6 flex-grow">
                        {getExcerpt(post.content)}
                    </p>

                    <Link 
                        to={`/news/${post.slug}`} 
                        className="inline-block text-xs font-bold uppercase tracking-widest text-gold-600 border-b border-gold-600/30 pb-1 hover:text-black transition-all w-max"
                    >
                        Read More
                    </Link>
                </div>
            </motion.div>
            ))}
        </div>
      </div>
    </div>
  );
};

export default NewsPage;

import React, { useState, useEffect } from 'react';
import { useParams, Link } from 'react-router-dom';
import { Calendar, ArrowLeft } from 'lucide-react';

const BACKEND_URL = "http://127.0.0.1:8000";

const SinglePostPage = () => {
  const { slug } = useParams();
  const [post, setPost] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const fetchPost = async () => {
      try {
        const res = await fetch(`${BACKEND_URL}/api/marketing/${slug}/`);
        if (res.ok) {
            const data = await res.json();
            setPost(data);
        }
      } catch (err) {
        console.error("Error fetching post", err);
      } finally {
        setLoading(false);
      }
    };
    fetchPost();
  }, [slug]);

  if (loading) return <div className="min-h-screen bg-cream-50 dark:bg-black text-gold-600 dark:text-white flex items-center justify-center pt-24 transition-colors duration-300">Loading...</div>;
  if (!post) return <div className="min-h-screen bg-cream-50 dark:bg-black text-gray-900 dark:text-white flex items-center justify-center pt-24 transition-colors duration-300">Post not found.</div>;

  return (
    <div className="min-h-screen bg-cream-50 dark:bg-neutral-950 text-gray-900 dark:text-white pt-32 pb-20 px-6 md:px-24 transition-colors duration-300">
      <div className="max-w-3xl mx-auto">
        
        <Link to="/news" className="inline-flex items-center text-gold-600 dark:text-gold-400 hover:text-black dark:hover:text-white mb-8 transition-colors text-xs uppercase tracking-widest">
            <ArrowLeft size={14} className="mr-2" /> Back to News
        </Link>

        <div className="mb-10">
            <div className="flex items-center gap-4 text-xs text-gray-500 uppercase tracking-widest mb-4">
                <span className="px-2 py-1 border border-gold-600/30 dark:border-gold-400/30 text-gold-600 dark:text-gold-400 rounded-sm">
                    {post.type === 'PROMO' ? 'Promotion' : 'Event'}
                </span>
                <span className="flex items-center gap-2">
                    <Calendar size={14} />
                    {new Date(post.created_at).toLocaleDateString()}
                </span>
            </div>
            <h1 className="text-4xl md:text-5xl font-serif text-gray-900 dark:text-white leading-tight">{post.title}</h1>
        </div>

        {post.image && (
            <div className="w-full h-[300px] md:h-[500px] mb-12 overflow-hidden rounded-sm border border-gray-200 dark:border-white/10 shadow-lg dark:shadow-none">
                <img 
                    src={post.image.startsWith('http') ? post.image : `${BACKEND_URL}${post.image}`} 
                    alt={post.title} 
                    className="w-full h-full object-cover"
                />
            </div>
        )}

        {/* RICH TEXT RENDERER */}
        <div 
            className="prose prose-lg max-w-none 
            text-gray-600 dark:text-gray-300 font-light leading-relaxed 
            prose-headings:text-gold-600 dark:prose-headings:text-gold-400 prose-headings:font-serif 
            prose-a:text-gold-600 dark:prose-a:text-gold-400 hover:prose-a:text-black dark:hover:prose-a:text-white
            prose-strong:text-gray-900 dark:prose-strong:text-white"
            dangerouslySetInnerHTML={{ __html: post.content }} 
        />

      </div>
    </div>
  );
};

export default SinglePostPage;

import React, { useState, useEffect } from 'react';
import { Plus, Edit2, Trash2 } from 'lucide-react';
import { Link } from 'react-router-dom';

const BACKEND_URL = "http://127.0.0.1:8000";

const MarketingManager = () => {
  const [posts, setPosts] = useState([]);
  const [loading, setLoading] = useState(true);

  const fetchPosts = async () => {
    const token = localStorage.getItem('accessToken');
    const res = await fetch(`${BACKEND_URL}/api/marketing/manage/all/`, {
        headers: { 'Authorization': `Bearer ${token}` }
    });
    if (res.ok) {
        const data = await res.json();
        setPosts(data);
    }
    setLoading(false);
  };

  useEffect(() => { fetchPosts(); }, []);

  const handleDelete = async (id) => {
    if(!window.confirm("Delete this post?")) return;
    const token = localStorage.getItem('accessToken');
    await fetch(`${BACKEND_URL}/api/marketing/manage/${id}/`, {
        method: 'DELETE',
        headers: { 'Authorization': `Bearer ${token}` }
    });
    fetchPosts();
  };

  return (
    <div className="space-y-8">
      
      {/* 1. UNIFIED HEADER */}
      <div className="flex justify-between items-end border-b border-gray-200 pb-6">
        <div>
            <h1 className="text-3xl font-bold text-gray-900 font-serif">Marketing & Blog</h1>
            <p className="text-gray-500 mt-1 text-sm">Manage news, events, and promotional content.</p>
        </div>
        <Link to="/admin/marketing/create" className="bg-gold-600 text-white px-6 py-2.5 font-bold uppercase tracking-widest text-xs rounded shadow-md hover:bg-gold-700 transition-colors flex items-center gap-2">
           <Plus size={16} /> New Post
        </Link>
      </div>

      {/* 2. CONTENT TABLE */}
      <div className="bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm">
        <table className="w-full text-left">
            <thead className="bg-gray-50 border-b border-gray-200 text-gray-500 uppercase tracking-widest text-xs font-semibold">
                <tr>
                    <th className="p-5 font-bold">Title</th>
                    <th className="p-5 font-bold">Type</th>
                    <th className="p-5 font-bold">Status</th>
                    <th className="p-5 font-bold text-right">Actions</th>
                </tr>
            </thead>
            <tbody className="divide-y divide-gray-100">
                {loading ? (
                    <tr><td colSpan="4" className="p-8 text-center text-gray-400 text-sm animate-pulse">Loading posts...</td></tr>
                ) : posts.length === 0 ? (
                    <tr><td colSpan="4" className="p-8 text-center text-gray-400 text-sm">No posts found.</td></tr>
                ) : (
                    posts.map(post => (
                        <tr key={post.id} className="hover:bg-gray-50 transition-colors">
                            <td className="p-5 font-bold text-gray-900 text-sm">{post.title}</td>
                            <td className="p-5">
                                <span className={`px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wide border
                                    ${post.type === 'PROMO' ? 'bg-purple-50 text-purple-700 border-purple-200' : 'bg-blue-50 text-blue-700 border-blue-200'}`}>
                                    {post.type === 'PROMO' ? 'Promotion' : 'News'}
                                </span>
                            </td>
                            <td className="p-5">
                                {post.is_active 
                                    ? <span className="text-green-600 text-xs font-bold uppercase tracking-wide flex items-center gap-1"><span className="w-1.5 h-1.5 bg-green-500 rounded-full"></span> Published</span> 
                                    : <span className="text-gray-400 text-xs font-bold uppercase tracking-wide">Draft</span>}
                            </td>
                            <td className="p-5 text-right flex justify-end gap-2">
                                <Link to={`/admin/marketing/edit/${post.id}`} className="bg-white border border-gray-200 p-2 rounded hover:bg-blue-50 hover:text-blue-600 hover:border-blue-200 transition-all shadow-sm">
                                    <Edit2 size={16} />
                                </Link>
                                <button onClick={() => handleDelete(post.id)} className="bg-white border border-gray-200 p-2 rounded hover:bg-red-50 hover:text-red-600 hover:border-red-200 transition-all shadow-sm">
                                    <Trash2 size={16} />
                                </button>
                            </td>
                        </tr>
                    ))
                )}
            </tbody>
        </table>
      </div>
    </div>
  );
};

export default MarketingManager;

import React, { useState, useEffect } from 'react';
import ReactQuill from 'react-quill-new';
import 'react-quill-new/dist/quill.snow.css';
import { useNavigate, useParams } from 'react-router-dom';
import axiosInstance from '../../../utils/axiosInstance';
import { Save, X, Image as ImageIcon, Layout, Type } from 'lucide-react';

const BACKEND_URL = "http://127.0.0.1:8000";

const PostEditor = () => {
  const { id } = useParams();
  const navigate = useNavigate();
  const isEditMode = !!id;

  const [previewImage, setPreviewImage] = useState(null);
  const [loading, setLoading] = useState(false);

  const [formData, setFormData] = useState({
    title: '',
    slug: '',
    type: 'BLOG',
    content: '',
    is_active: true,
    image: null
  });

  useEffect(() => {
    if (isEditMode) {
        const fetchData = async () => {
            try {
                const res = await axiosInstance.get(`/api/marketing/manage/${id}/`);
                const data = res.data;
                if (data.image) {
                    setPreviewImage(data.image.startsWith('http') ? data.image : `${BACKEND_URL}${data.image}`);
                }
                setFormData({ ...data, image: null });
            } catch (err) {
                console.error("Failed to fetch post", err);
                alert("Error loading post details.");
            }
        };
        fetchData();
    }
  }, [id]);

  const handleSubmit = async (e) => {
    e.preventDefault();
    setLoading(true);
    
    const data = new FormData();
    data.append('title', formData.title);
    data.append('slug', formData.slug);
    data.append('type', formData.type);
    data.append('content', formData.content);
    data.append('is_active', formData.is_active ? 'true' : 'false');
    
    if (formData.image instanceof File) {
        data.append('image', formData.image);
    }

    const url = isEditMode ? `/api/marketing/manage/${id}/` : `/api/marketing/manage/all/`;
    const method = isEditMode ? 'patch' : 'post';

    try {
        await axiosInstance({
            method: method,
            url: url,
            data: data,
            headers: { "Content-Type": "multipart/form-data" }
        });
        navigate('/admin/marketing');
    } catch (err) {
        console.error(err);
        alert(`Failed to save: ${err.message}`);
    } finally {
        setLoading(false);
    }
  };

  const handleTitleChange = (e) => {
    const title = e.target.value;
    const slug = title.toLowerCase().replace(/ /g, '-').replace(/[^\w-]+/g, '');
    setFormData({ ...formData, title: title, slug: slug });
  };

  return (
    <div className="bg-gray-50 min-h-screen text-gray-900 pb-20">
       {/* HEADER */}
       <div className="bg-white border-b border-gray-200 sticky top-0 z-20 px-8 py-4 flex justify-between items-center shadow-sm">
           <div>
               <h1 className="text-2xl font-serif text-gray-900 font-bold">{isEditMode ? 'Edit Post' : 'Create New Post'}</h1>
               <p className="text-gray-500 text-xs mt-1">Marketing Content Manager</p>
           </div>
           <div className="flex gap-3">
               <button 
                  type="button" 
                  onClick={() => navigate('/admin/marketing')} 
                  className="flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-md transition-colors"
                >
                  <X size={16} /> Cancel
               </button>
               <button 
                  onClick={handleSubmit} 
                  disabled={loading}
                  className="flex items-center gap-2 px-6 py-2 bg-gold-600 text-white text-sm font-bold uppercase tracking-wide rounded-md hover:bg-gold-700 transition-all shadow-md disabled:opacity-50"
                >
                  <Save size={16} /> {loading ? 'Saving...' : 'Save Post'}
               </button>
           </div>
       </div>

       <div className="max-w-7xl mx-auto p-8 grid grid-cols-1 lg:grid-cols-3 gap-8">
            
            {/* LEFT COLUMN - MAIN EDITOR */}
            <div className="lg:col-span-2 space-y-6">
                
                {/* Title Section */}
                <div className="bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
                    <div className="mb-4">
                        <label className="flex items-center gap-2 text-xs font-bold uppercase text-gray-500 mb-2">
                           <Type size={14} /> Title
                        </label>
                        <input 
                            type="text" 
                            required 
                            className="w-full text-3xl font-serif font-bold text-gray-900 placeholder-gray-300 border-b border-gray-200 pb-2 focus:border-gold-500 outline-none transition-colors"
                            placeholder="Enter post title here..."
                            value={formData.title} 
                            onChange={handleTitleChange} 
                        />
                    </div>
                    <div>
                        <label className="block text-xs font-bold uppercase text-gray-400 mb-1">Slug (URL)</label>
                        <div className="flex items-center gap-2 text-gray-500 bg-gray-50 p-2 rounded border border-gray-200">
                             <span className="text-xs">goldenbay.com.ph/news/</span>
                             <input 
                                type="text" 
                                required 
                                className="flex-1 bg-transparent text-sm font-medium text-gray-900 focus:outline-none"
                                value={formData.slug} 
                                onChange={(e) => setFormData({...formData, slug: e.target.value})} 
                             />
                        </div>
                    </div>
                </div>

                {/* Rich Text Editor */}
                <div className="bg-white p-6 rounded-lg border border-gray-200 shadow-sm min-h-[500px] flex flex-col">
                    <label className="flex items-center gap-2 text-xs font-bold uppercase text-gray-500 mb-4">
                       <Layout size={14} /> Content Body
                    </label>
                    <div className="flex-grow">
                        {/* Custom Quill Styles */}
                        <style>{`
                            .ql-toolbar.ql-snow { border: none !important; border-bottom: 1px solid #e5e7eb !important; background: #fff; padding: 12px 0; }
                            .ql-container.ql-snow { border: none !important; font-family: 'Quicksand', sans-serif; font-size: 16px; }
                            .ql-editor { min-height: 400px; padding: 20px 0; }
                        `}</style>
                        <ReactQuill 
                            theme="snow" 
                            value={formData.content} 
                            onChange={(val) => setFormData({...formData, content: val})} 
                            placeholder="Write your story here..."
                        />
                    </div>
                </div>
            </div>

            {/* RIGHT COLUMN - SIDEBAR SETTINGS */}
            <div className="space-y-6">
                
                {/* Publish Status */}
                <div className="bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
                    <h3 className="text-sm font-bold text-gray-900 mb-4 uppercase tracking-wider">Publishing</h3>
                    <div className="flex items-center justify-between p-3 bg-gray-50 rounded-md border border-gray-200">
                        <span className="text-sm font-medium text-gray-700">Visibility</span>
                        <label className="relative inline-flex items-center cursor-pointer">
                            <input 
                                type="checkbox" 
                                className="sr-only peer" 
                                checked={formData.is_active} 
                                onChange={(e) => setFormData({...formData, is_active: e.target.checked})} 
                            />
                            <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-500"></div>
                        </label>
                    </div>
                    <div className="mt-4">
                         <label className="block text-xs font-bold uppercase text-gray-500 mb-2">Category</label>
                         <select 
                            className="w-full bg-white border border-gray-300 text-gray-900 text-sm rounded-md p-2.5 focus:ring-gold-500 focus:border-gold-500 outline-none"
                            value={formData.type} 
                            onChange={(e) => setFormData({...formData, type: e.target.value})}
                         >
                            <option value="BLOG">News & Events</option>
                            <option value="PROMO">Promotion</option>
                        </select>
                    </div>
                </div>

                {/* Featured Image */}
                <div className="bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
                    <h3 className="flex items-center gap-2 text-sm font-bold text-gray-900 mb-4 uppercase tracking-wider">
                        <ImageIcon size={16} /> Featured Image
                    </h3>
                    
                    <div className="relative w-full h-48 bg-gray-100 rounded-md border-2 border-dashed border-gray-300 flex items-center justify-center overflow-hidden hover:bg-gray-50 transition-colors group cursor-pointer">
                        {previewImage ? (
                            <img src={previewImage} alt="Preview" className="w-full h-full object-cover" />
                        ) : (
                            <div className="text-center p-4">
                                <ImageIcon className="mx-auto h-8 w-8 text-gray-400" />
                                <p className="mt-1 text-xs text-gray-500">Click to upload image</p>
                            </div>
                        )}
                        <input 
                            type="file" 
                            className="absolute inset-0 w-full h-full opacity-0 cursor-pointer"
                            onChange={(e) => {
                                if (e.target.files[0]) {
                                    setFormData({...formData, image: e.target.files[0]});
                                    setPreviewImage(URL.createObjectURL(e.target.files[0]));
                                }
                            }} 
                        />
                         {previewImage && (
                            <div className="absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none">
                                <p className="text-white text-xs font-bold uppercase">Change Image</p>
                            </div>
                        )}
                    </div>
                    <p className="text-xs text-gray-400 mt-2 text-center">Recommended size: 1200x630px</p>
                </div>
            </div>
       </div>
    </div>
  );
};

export default PostEditor;

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Reservation - Golden Bay</title>
</head>
<body style="margin: 0; padding: 0; background-color: #f4f4f5; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased;">
    
    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="background-color: #f4f4f5; padding: 40px 0;">
        <tr>
            <td align="center">
                <table border="0" cellpadding="0" cellspacing="0" width="600" style="background-color: #ffffff; border-radius: 4px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); overflow: hidden;">
                    
                    <tr>
                        <td align="center" style="padding: 40px 0 30px 0; border-bottom: 4px solid #D4AF37;">
                            <h1 style="color: #1a1a1a; font-size: 26px; letter-spacing: 2px; text-transform: uppercase; margin: 0; font-weight: 300;">Golden Bay</h1>
                            <p style="color: #D4AF37; font-size: 10px; text-transform: uppercase; letter-spacing: 3px; margin-top: 8px; font-weight: bold;">Fresh Seafood Restaurant</p>
                        </td>
                    </tr>

                    <tr>
                        <td style="padding: 40px 50px;">
                            <h2 style="color: #1a1a1a; font-size: 22px; margin: 0 0 20px 0; font-weight: normal;">
                                Hello {{ name }},
                            </h2>
                            
                            <p style="color: #555555; font-size: 15px; line-height: 26px; margin-bottom: 30px;">
                                {% if status == 'CONFIRMED' %}
                                    We are pleased to confirm your reservation. We look forward to welcoming you.
                                {% elif status == 'PENDING' %}
                                    We have received your request. Our team is currently reviewing availability for your chosen date and time. You will receive a final confirmation shortly.
                                {% elif status == 'CANCELLED' %}
                                    We regret to inform you that your reservation request has been cancelled. Please contact us if you wish to reschedule.
                                {% endif %}
                            </p>

                            <table border="0" cellpadding="15" cellspacing="0" width="100%" style="background-color: #fafafa; border: 1px solid #eeeeee; border-radius: 4px; margin-bottom: 30px;">
                                <tr>
                                    <td width="30%" style="color: #888888; font-size: 11px; text-transform: uppercase; letter-spacing: 1px; border-bottom: 1px solid #eeeeee;">Date</td>
                                    <td style="color: #1a1a1a; font-weight: bold; font-size: 14px; border-bottom: 1px solid #eeeeee;">{{ date }}</td>
                                </tr>
                                <tr>
                                    <td style="color: #888888; font-size: 11px; text-transform: uppercase; letter-spacing: 1px; border-bottom: 1px solid #eeeeee;">Time</td>
                                    <td style="color: #1a1a1a; font-weight: bold; font-size: 14px; border-bottom: 1px solid #eeeeee;">{{ time }}</td>
                                </tr>
                                <tr>
                                    <td style="color: #888888; font-size: 11px; text-transform: uppercase; letter-spacing: 1px; border-bottom: 1px solid #eeeeee;">Guests</td>
                                    <td style="color: #1a1a1a; font-weight: bold; font-size: 14px; border-bottom: 1px solid #eeeeee;">{{ pax }} People</td>
                                </tr>
                                <tr>
                                    <td style="color: #888888; font-size: 11px; text-transform: uppercase; letter-spacing: 1px; border-bottom: 1px solid #eeeeee;">Area</td>
                                    <td style="color: #1a1a1a; font-weight: bold; font-size: 14px; border-bottom: 1px solid #eeeeee;">{{ area }}</td>
                                </tr>
                                <tr>
                                    <td style="color: #888888; font-size: 11px; text-transform: uppercase; letter-spacing: 1px;">Ref ID</td>
                                    <td style="color: #888888; font-size: 14px;">#{{ id }}</td>
                                </tr>
                            </table>

                            <table border="0" cellpadding="0" cellspacing="0" width="100%">
                                <tr>
                                    <td align="center">
                                        <a href="https://goldenbay.com.ph/menu" style="display: inline-block; padding: 14px 40px; background-color: #1a1a1a; color: #ffffff; text-decoration: none; font-weight: bold; text-transform: uppercase; font-size: 12px; letter-spacing: 1px; border-radius: 2px;">
                                            View Menu
                                        </a>
                                    </td>
                                </tr>
                            </table>

                        </td>
                    </tr>

                    <tr>
                        <td style="background-color: #f9f9f9; padding: 30px; text-align: center; border-top: 1px solid #eeeeee;">
                            <p style="color: #1a1a1a; font-size: 12px; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; margin: 0 0 10px 0;">Golden Bay Fresh Seafood Restaurant</p>
                            <p style="color: #999999; font-size: 11px; margin: 0 0 5px 0;">Lot 3&4 Block A2, Diosdado Macapagal Blvd, Pasay City</p>
                            <p style="color: #999999; font-size: 11px; margin: 0;">(02) 8804-0332 | marketing@goldenbay.com.ph</p>
                        </td>
                    </tr>

                </table>
                
                <p style="color: #bbbbbb; font-size: 11px; margin-top: 20px;">&copy; 2026 Golden Bay. All rights reserved.</p>
            </td>
        </tr>
    </table>
</body>
</html>

// src/components/layout/Footer.jsx
import React from 'react';
import { Link } from 'react-router-dom';
import { FaFacebookF, FaInstagram, FaYoutube, FaTiktok, FaWeixin } from 'react-icons/fa';
import { SiXiaohongshu } from 'react-icons/si'; // RedNote icon
import logo from '../../assets/images/goldenbaylogo.svg'; 
import logo2 from '../../assets/images/goldenbayland.svg'; 

const Footer = () => {
  return (
    <footer className="bg-neutral-950 text-white pt-24 pb-12 border-t border-gold-600/20 font-sans">
      <div className="max-w-7xl mx-auto px-6 md:px-12">
        
        {/* Main Grid */}
        <div className="grid grid-cols-1 md:grid-cols-12 gap-12 mb-20">
          
          {/* Column 1: Brand & Address */}
          <div className="md:col-span-5 space-y-8">
             <img src={logo} alt="Golden Bay Logo" className="h-20 w-auto opacity-90" />
             <div className="space-y-2 text-gray-400 text-sm font-light tracking-wide leading-relaxed">
               <p className="uppercase tracking-widest text-gold-500 text-xs font-bold mb-4">Golden Bay Fresh Seafood Restaurant</p>
               <p>Lot 3&4 Block A2, Diosdado Macapagal Blvd,</p>
               <p>CBP, Pasay City, Metro Manila</p>
             </div>
          </div>

          {/* Column 2: Navigation */}
          <div className="md:col-span-3">
             <h4 className="font-serif text-xl text-gold-500 mb-6">Explore</h4>
             <div className="flex flex-col space-y-4 text-sm uppercase tracking-[0.2em] font-light text-gray-400">
                <Link to="/menu" className="hover:text-white transition-colors duration-300 w-max">Dining Menu</Link>
                <Link to="/reservations" className="hover:text-white transition-colors duration-300 w-max">Reservations</Link>
                <Link to="/news" className="hover:text-white transition-colors duration-300 w-max">News & Promotions</Link>
                <Link to="/about" className="hover:text-white transition-colors duration-300 w-max">About Us</Link>
                <Link to="/vip-rooms" className="hover:text-white transition-colors duration-300 w-max">Private Rooms</Link>
             </div>
          </div>

          {/* Column 3: Contact & Hours */}
          <div className="md:col-span-4 md:text-right space-y-10">
             <div className="space-y-4">
                <h4 className="font-serif text-xl text-gold-500">Contact</h4>
                <div className="flex flex-col md:items-end space-y-2 text-gray-400 text-sm font-light tracking-wide">
                  <a href="tel:+63288040332" className="hover:text-white transition-colors">+63 (02) 8804-0332</a>
                  <a href="tel:+639175807166" className="hover:text-white transition-colors">+63 917 580 7166</a>
                  <a href="mailto:marketing@goldenbay.com.ph" className="hover:text-white transition-colors">marketing@goldenbay.com.ph</a>
                </div>
             </div>

             <div className="space-y-4">
                <h4 className="font-serif text-xl text-gold-500">Hours</h4>
                <div className="flex flex-col md:items-end space-y-1 text-gray-400 text-sm font-light">
                  <p><span className="text-gray-600 uppercase text-[10px] tracking-widest mr-2">Lunch</span> 11:00 AM ‚Äì 02:30 PM</p>
                  <p><span className="text-gray-600 uppercase text-[10px] tracking-widest mr-2">Dinner</span> 05:00 PM ‚Äì 09:30 PM</p>
                </div>
             </div>
          </div>
        </div>

        {/* Divider */}
        <div className="h-px w-full bg-white/5 mb-8"></div>

        {/* Bottom Bar */}
        <div className="flex flex-col md:flex-row justify-between items-center gap-6">
          <div className="text-[10px] text-gray-600 uppercase tracking-widest flex items-center gap-4">
            <span>¬© {new Date().getFullYear()} Golden Bay Restaurant. All Rights Reserved.</span>
            
            {/* --- SUBTLE ADMIN LINK HERE --- */}
            <Link to="/login" className="opacity-0 hover:opacity-50 transition-opacity duration-300">Staff Access</Link>
          </div>

          <div className="flex items-center gap-6">
            {/* Facebook */}
            <a href="https://facebook.com" target="_blank" rel="noreferrer" className="text-gold-500/60 hover:text-gold-500 transition-colors">
            <FaFacebookF size={14} />
            </a>

            {/* Instagram */}
            <a href="https://instagram.com/goldenbayseafoods" target="_blank" rel="noreferrer" className="text-gold-500/60 hover:text-gold-500 transition-colors">
            <FaInstagram size={16} />
            </a>

            {/* TikTok */}
            <a href="https://tiktok.com/@goldenbayseafoods" target="_blank" rel="noreferrer" className="text-gold-500/60 hover:text-gold-500 transition-colors">
            <FaTiktok size={15} />
            </a>

            {/* RedNote (Xiaohongshu) */}
            {/* Replace '#' with your actual RedNote profile URL */}
            <a href="https://rednotee.com/login" target="_blank" rel="noreferrer" className="text-gold-500/60 hover:text-gold-500 transition-colors" title="RedNote">
            <SiXiaohongshu size={25} />
            </a>

            {/* WeChat */}
            {/* WeChat usually requires scanning a QR code, so we use a title tooltip or link to a contact page */}
            <a href="https://weixin.qq.com/" target="_blank" className="text-gold-500/60 hover:text-gold-500 transition-colors" title="WeChat ID: goldenbay888">
            <FaWeixin size={17} />
            </a>

            {/* YouTube */}
            <a href="https://youtube.com" target="_blank" rel="noreferrer" className="text-gold-500/60 hover:text-gold-500 transition-colors">
            <FaYoutube size={16} />
            </a>
        </div>

          <div className="flex items-center gap-4 opacity-30 hover:opacity-60 transition-all duration-500 grayscale">
             <Link to="https://goldenbayland.com/" target="_blank">
                <img src={logo2} alt="Golden Bay Land" className="h-4 w-auto" />
             </Link>
          </div>
        </div>

      </div>
    </footer>
  );
};

export default Footer;

import React, { useState, useEffect } from 'react';
import { 
    Search, 
    Plus, 
    Phone, 
    Mail, 
    Edit2, 
    Trash2, 
    ArrowUpDown, 
    X,
    User,
    StickyNote
} from 'lucide-react';
import { FaWeixin, FaViber, FaWhatsapp, FaTelegram } from 'react-icons/fa';

const BACKEND_URL = "http://127.0.0.1:8000";

const PhoneBookPage = () => {
  const [customers, setCustomers] = useState([]);
  const [loading, setLoading] = useState(true);
  const [search, setSearch] = useState('');
  const [sortAsc, setSortAsc] = useState(true);
  
  const [showModal, setShowModal] = useState(false);
  const [editingCustomer, setEditingCustomer] = useState(null);
  const [isSubmitting, setIsSubmitting] = useState(false);

  const [formData, setFormData] = useState({
    name: '', phone: '', email: '', wechat: '', viber: '', whatsapp: '', telegram: '', notes: ''
  });

  const fetchCustomers = async () => {
    setLoading(true);
    try {
        const token = localStorage.getItem('accessToken');
        const res = await fetch(`${BACKEND_URL}/api/reservations/customers/`, {
            headers: { 'Authorization': `Bearer ${token}` }
        });
        if (res.ok) {
            const data = await res.json();
            setCustomers(data);
        }
    } catch (err) {
        console.error("Error loading customers", err);
    } finally {
        setLoading(false);
    }
  };

  useEffect(() => { fetchCustomers(); }, []);

  const handleSubmit = async (e) => {
    e.preventDefault();
    setIsSubmitting(true);
    const token = localStorage.getItem('accessToken');
    
    const url = editingCustomer 
        ? `${BACKEND_URL}/api/reservations/customers/${editingCustomer.id}/`
        : `${BACKEND_URL}/api/reservations/customers/`;
    
    const method = editingCustomer ? 'PATCH' : 'POST';

    try {
        const res = await fetch(url, {
            method: method,
            headers: { 
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${token}` 
            },
            body: JSON.stringify(formData)
        });

        if (res.ok) {
            fetchCustomers();
            closeModal();
        } else {
            const errorData = await res.json();
            if (errorData.phone) {
                alert("This phone number is already registered.");
            } else {
                alert("Failed to save customer.");
            }
        }
    } catch (err) {
        alert("Network error.");
    } finally {
        setIsSubmitting(false);
    }
  };

  const handleDelete = async (id) => {
      if(!window.confirm("Are you sure you want to delete this customer?")) return;
      const token = localStorage.getItem('accessToken');
      try {
        await fetch(`${BACKEND_URL}/api/reservations/customers/${id}/`, {
            method: 'DELETE',
            headers: { 'Authorization': `Bearer ${token}` }
        });
        fetchCustomers();
      } catch (err) {
          alert("Error deleting customer.");
      }
  };

  const openEdit = (customer) => {
      setEditingCustomer(customer);
      setFormData({
          name: customer.name,
          phone: customer.phone,
          email: customer.email || '',
          wechat: customer.wechat || '',
          viber: customer.viber || '',
          whatsapp: customer.whatsapp || '',
          telegram: customer.telegram || '',
          notes: customer.notes || ''
      });
      setShowModal(true);
  };

  const openCreate = () => {
      setEditingCustomer(null);
      setFormData({ name: '', phone: '', email: '', wechat: '', viber: '', whatsapp: '', telegram: '', notes: '' });
      setShowModal(true);
  };

  const closeModal = () => {
      setShowModal(false);
      setEditingCustomer(null);
  };

  const filtered = customers
    .filter(c => c.name.toLowerCase().includes(search.toLowerCase()) || c.phone.includes(search))
    .sort((a, b) => sortAsc ? a.name.localeCompare(b.name) : b.name.localeCompare(a.name));

  const inputClass = "w-full bg-white border border-gray-300 p-2.5 text-gray-900 text-sm focus:border-gold-500 focus:ring-1 focus:ring-gold-500 outline-none rounded-md transition-all shadow-sm";
  const labelClass = "block text-[10px] font-bold uppercase tracking-widest text-gray-500 mb-1";

  return (
    <div className="space-y-8">
      
      {/* 1. UNIFIED HEADER */}
      <div className="flex justify-between items-end border-b border-gray-200 pb-6">
        <div>
            <h1 className="text-3xl font-bold text-gray-900 font-serif">Clientele</h1>
            <p className="text-gray-500 mt-1 text-sm">Manage customer profiles and contact details.</p>
        </div>
        <div className="flex gap-2">
             {/* Search */}
             <div className="relative">
                <Search className="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400" size={16} />
                <input 
                    type="text" 
                    placeholder="Search name or phone..." 
                    className="pl-10 pr-4 py-2.5 bg-white border border-gray-200 rounded-md text-sm outline-none focus:border-gold-500 w-64 shadow-sm"
                    value={search}
                    onChange={(e) => setSearch(e.target.value)}
                />
            </div>
            {/* Sort */}
            <button 
                onClick={() => setSortAsc(!sortAsc)} 
                className="bg-white border border-gray-200 p-2.5 rounded-md hover:bg-gray-50 text-gray-600 shadow-sm"
                title={sortAsc ? "Sort Z-A" : "Sort A-Z"}
            >
                <ArrowUpDown size={18}/>
            </button>
            {/* Add */}
            <button 
                onClick={openCreate} 
                className="bg-gold-600 text-white px-6 py-2.5 font-bold uppercase tracking-widest text-xs rounded shadow-md hover:bg-gold-700 transition-all flex items-center gap-2"
            >
               <Plus size={16} /> Add New
            </button>
        </div>
      </div>

      {/* 2. CUSTOMER GRID */}
      {loading ? (
          <div className="p-8 text-center text-gray-400 animate-pulse text-sm">Loading contacts...</div>
      ) : (
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {filtered.length === 0 ? (
                <div className="col-span-full text-center py-20 text-gray-400 text-sm">
                    No customers found matching your criteria.
                </div>
            ) : (
                filtered.map(c => (
                    <div key={c.id} className="bg-white p-6 rounded-lg border border-gray-200 shadow-sm hover:shadow-md hover:border-gold-300 transition-all group relative flex flex-col h-full">
                        
                        {/* Header */}
                        <div className="flex justify-between items-start mb-4">
                            <div>
                                <div className="flex items-center gap-2">
                                    <h3 className="font-bold text-lg text-gray-900 line-clamp-1">{c.name}</h3>
                                    {c.notes && c.notes.toLowerCase().includes('vip') && (
                                        <span className="bg-gold-100 text-gold-700 text-[10px] font-bold px-2 py-0.5 rounded border border-gold-200">VIP</span>
                                    )}
                                </div>
                                <p className="text-xs text-gray-400 mt-0.5 font-medium">Added: {new Date(c.created_at).toLocaleDateString()}</p>
                            </div>
                            
                            <div className="flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
                                <button onClick={() => openEdit(c)} className="p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded">
                                    <Edit2 size={14}/>
                                </button>
                                <button onClick={() => handleDelete(c.id)} className="p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded">
                                    <Trash2 size={14}/>
                                </button>
                            </div>
                        </div>

                        {/* Contact Details */}
                        <div className="space-y-3 mb-6 flex-grow">
                            <div className="flex items-center gap-3 text-sm text-gray-700">
                                <div className="w-8 h-8 rounded-full bg-gray-50 flex items-center justify-center text-gray-400 flex-shrink-0">
                                    <Phone size={14} />
                                </div>
                                <span className="font-medium font-mono text-gray-600">{c.phone}</span>
                            </div>
                            
                            {c.email ? (
                                <div className="flex items-center gap-3 text-sm text-gray-700">
                                    <div className="w-8 h-8 rounded-full bg-gray-50 flex items-center justify-center text-gray-400 flex-shrink-0">
                                        <Mail size={14} />
                                    </div>
                                    <span className="truncate text-gray-600">{c.email}</span>
                                </div>
                            ) : null}
                        </div>

                        <div className="h-px bg-gray-100 w-full mb-4"></div>

                        {/* Social Apps */}
                        <div className="flex justify-between items-center">
                            <div className="flex gap-2">
                                <div className={`p-2 rounded-full transition-colors ${c.wechat ? 'text-green-600 bg-green-50' : 'text-gray-200 bg-gray-50'}`} title={c.wechat || "No WeChat"}>
                                    <FaWeixin size={16}/>
                                </div>
                                <div className={`p-2 rounded-full transition-colors ${c.viber ? 'text-purple-600 bg-purple-50' : 'text-gray-200 bg-gray-50'}`} title={c.viber || "No Viber"}>
                                    <FaViber size={16}/>
                                </div>
                                <div className={`p-2 rounded-full transition-colors ${c.whatsapp ? 'text-green-500 bg-green-50' : 'text-gray-200 bg-gray-50'}`} title={c.whatsapp || "No WhatsApp"}>
                                    <FaWhatsapp size={16}/>
                                </div>
                                <div className={`p-2 rounded-full transition-colors ${c.telegram ? 'text-blue-500 bg-blue-50' : 'text-gray-200 bg-gray-50'}`} title={c.telegram || "No Telegram"}>
                                    <FaTelegram size={16}/>
                                </div>
                            </div>
                        </div>
                    </div>
                ))
            )}
          </div>
      )}

      {/* --- ADD / EDIT MODAL --- */}
      {showModal && (
        <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-in fade-in duration-200">
            <div className="bg-white w-full max-w-2xl rounded-lg shadow-2xl overflow-hidden flex flex-col max-h-[90vh]">
                
                {/* Modal Header */}
                <div className="px-8 py-6 border-b border-gray-100 flex justify-between items-center bg-white">
                    <div>
                        <h2 className="text-2xl font-serif text-gray-900 font-bold">{editingCustomer ? 'Edit Profile' : 'New Client'}</h2>
                        <p className="text-gray-400 text-xs uppercase tracking-widest mt-1">Customer Database</p>
                    </div>
                    <button onClick={closeModal} className="p-2 hover:bg-gray-100 rounded-full transition-colors text-gray-500">
                        <X size={20}/>
                    </button>
                </div>
                
                {/* Modal Body */}
                <div className="p-8 overflow-y-auto bg-gray-50/50">
                    <form id="contactForm" onSubmit={handleSubmit} className="space-y-6">
                        
                        {/* Primary Info */}
                        <div className="bg-white p-6 rounded-lg border border-gray-200 shadow-sm space-y-4">
                            <h3 className="text-xs font-bold text-gold-600 uppercase tracking-widest border-b border-gray-100 pb-2 mb-4 flex items-center gap-2">
                                <User size={14}/> Primary Details
                            </h3>
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label className={labelClass}>Full Name <span className="text-red-500">*</span></label>
                                    <input required type="text" className={inputClass} 
                                        placeholder="e.g. John Doe"
                                        value={formData.name} onChange={e => setFormData({...formData, name: e.target.value})} />
                                </div>
                                <div>
                                    <label className={labelClass}>Phone Number <span className="text-red-500">*</span></label>
                                    <input required type="text" className={inputClass} 
                                        placeholder="e.g. 0917 123 4567"
                                        value={formData.phone} onChange={e => setFormData({...formData, phone: e.target.value})} />
                                </div>
                            </div>
                            <div>
                                <label className={labelClass}>Email Address</label>
                                <input type="email" className={inputClass} 
                                    placeholder="client@example.com"
                                    value={formData.email} onChange={e => setFormData({...formData, email: e.target.value})} />
                            </div>
                        </div>

                        {/* Social Media */}
                        <div className="bg-white p-6 rounded-lg border border-gray-200 shadow-sm space-y-4">
                            <h3 className="text-xs font-bold text-gold-600 uppercase tracking-widest border-b border-gray-100 pb-2 mb-4 flex items-center gap-2">
                                <Phone size={14}/> Social IDs
                            </h3>
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label className={`${labelClass} flex items-center gap-2`}><FaWeixin className="text-green-600"/> WeChat ID</label>
                                    <input type="text" className={inputClass} 
                                        value={formData.wechat} onChange={e => setFormData({...formData, wechat: e.target.value})} />
                                </div>
                                <div>
                                    <label className={`${labelClass} flex items-center gap-2`}><FaViber className="text-purple-600"/> Viber Number</label>
                                    <input type="text" className={inputClass} 
                                        value={formData.viber} onChange={e => setFormData({...formData, viber: e.target.value})} />
                                </div>
                                <div>
                                    <label className={`${labelClass} flex items-center gap-2`}><FaWhatsapp className="text-green-500"/> WhatsApp</label>
                                    <input type="text" className={inputClass} 
                                        value={formData.whatsapp} onChange={e => setFormData({...formData, whatsapp: e.target.value})} />
                                </div>
                                <div>
                                    <label className={`${labelClass} flex items-center gap-2`}><FaTelegram className="text-blue-500"/> Telegram</label>
                                    <input type="text" className={inputClass} 
                                        value={formData.telegram} onChange={e => setFormData({...formData, telegram: e.target.value})} />
                                </div>
                            </div>
                        </div>

                        {/* Notes */}
                        <div className="bg-white p-6 rounded-lg border border-gray-200 shadow-sm space-y-4">
                            <h3 className="text-xs font-bold text-gold-600 uppercase tracking-widest border-b border-gray-100 pb-2 mb-4 flex items-center gap-2">
                                <StickyNote size={14}/> Internal Notes
                            </h3>
                            <textarea className={`${inputClass} h-24 resize-none`} 
                                placeholder="E.g. VIP, prefers window seat, allergic to shrimp..."
                                value={formData.notes} onChange={e => setFormData({...formData, notes: e.target.value})} />
                        </div>

                    </form>
                </div>

                {/* Modal Footer */}
                <div className="p-6 bg-white border-t border-gray-100 flex justify-end gap-3">
                    <button onClick={closeModal} className="px-6 py-2.5 text-xs font-bold uppercase tracking-widest text-gray-500 hover:bg-gray-100 rounded-md transition-colors">
                        Cancel
                    </button>
                    <button form="contactForm" type="submit" disabled={isSubmitting} className="bg-gold-600 text-white px-8 py-2.5 font-bold uppercase tracking-widest text-xs rounded-md shadow-md hover:bg-gold-700 transition-colors disabled:opacity-50">
                        {isSubmitting ? 'Saving...' : 'Save Profile'}
                    </button>
                </div>
            </div>
        </div>
      )}
    </div>
  );
};

export default PhoneBookPage;

import React from 'react';
import { Link, useLocation, Outlet } from 'react-router-dom';
import { 
  LayoutDashboard, 
  CalendarDays, 
  Users, 
  Megaphone, 
  LogOut
} from 'lucide-react';
import LogoutButton from '../auth/LogoutButton';
import logo from '../../assets/images/goldenbaylogo.svg'; 

const AdminLayout = () => {
  const location = useLocation();

  const navItems = [
    { path: '/admin', label: 'Overview', icon: LayoutDashboard },
    { path: '/admin/bookings', label: 'Reservations', icon: CalendarDays },
    { path: '/admin/customers', label: 'Phone Book', icon: Users },
    { path: '/admin/marketing', label: 'Marketing', icon: Megaphone },
  ];

  return (
    // FIX: Ensure this is bg-gray-50 (Light) not dark.
    <div className="flex h-screen bg-gray-50 text-gray-900 font-sans">
      
      {/* SIDEBAR */}
      <aside className="w-64 bg-white border-r border-gray-200 flex flex-col flex-shrink-0 z-20 shadow-[4px_0_24px_rgba(0,0,0,0.02)]">
        
        {/* Logo Area */}
        <div className="h-20 flex items-center justify-center border-b border-gray-100">
             {/* Ensure logo is visible on white background */}
             <img src={logo} alt="Golden Bay" className="h-12 w-auto opacity-100" />
        </div>

        {/* Navigation */}
        <nav className="flex-1 py-8 px-4 space-y-1 overflow-y-auto">
          <p className="px-4 text-xs font-bold text-gray-400 uppercase tracking-widest mb-4">Management</p>
          
          {navItems.map((item) => {
            const isActive = location.pathname === item.path;
            const Icon = item.icon;
            
            return (
              <Link 
                key={item.path} 
                to={item.path}
                className={`flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-md transition-all duration-200 group
                  ${isActive 
                    ? 'bg-gold-50 text-gold-700 shadow-sm border border-gold-200/50' 
                    : 'text-gray-500 hover:bg-gray-50 hover:text-gray-900'
                  }`}
              >
                <Icon size={18} className={isActive ? 'text-gold-600' : 'text-gray-400 group-hover:text-gray-600'} />
                {item.label}
              </Link>
            );
          })}
        </nav>

        {/* Sidebar Footer */}
        <div className="p-4 border-t border-gray-100">
           <LogoutButton />
        </div>
      </aside>

      {/* MAIN CONTENT AREA */}
      <main className="flex-1 overflow-y-auto relative bg-gray-50">
        {/* Top Header (Contextual) */}
        <header className="sticky top-0 bg-white/80 backdrop-blur-md border-b border-gray-200 px-8 py-4 z-10 flex justify-between items-center">
           <div>
              <h2 className="text-sm font-bold text-gray-400 uppercase tracking-widest">
                {location.pathname.split('/')[2] || 'Dashboard'}
              </h2>
           </div>
           <div className="flex items-center gap-4">
              <span className="text-xs font-medium text-gray-500">Admin Session</span>
              <div className="w-8 h-8 rounded-full bg-gold-100 flex items-center justify-center text-gold-700 font-bold text-xs border border-gold-200">
                 GB
              </div>
           </div>
        </header>

        {/* Page Content */}
        <div className="p-8 max-w-7xl mx-auto">
           <Outlet />
        </div>
      </main>
    </div>
  );
};

export default AdminLayout;

import React from 'react';
import { motion } from 'framer-motion';
import { Link } from 'react-router-dom';
import { Star, Shield, Anchor, Zap, Heart } from 'lucide-react';

// Images
import exteriorImg from '../../../assets/images/golden_bay_cover.webp';
import diningImg from '../../../assets/images/dining_area.webp';
import aquariumImg from '../../../assets/images/aquarium.webp';
import heroimage from '../../../assets/images/heroimage3.webp'; // Using standard hero for consistency, or swap with exteriorImg

const Section = ({ children, className = "" }) => (
  <section className={`px-6 md:px-12 py-20 ${className}`}>
    <div className="max-w-5xl mx-auto">
      {children}
    </div>
  </section>
);

const AboutPage = () => {
  const fadeUp = {
    hidden: { opacity: 0, y: 20 },
    visible: { opacity: 1, y: 0, transition: { duration: 0.8, ease: "easeOut" } }
  };

  const values = [
    { title: "Excellence", desc: "Perfection in every detail.", icon: Star },
    { title: "Integrity", desc: "Honest sourcing & standards.", icon: Shield },
    { title: "Sustainability", desc: "Stewards of the sea.", icon: Anchor },
    { title: "Innovation", desc: "Redefining tradition.", icon: Zap },
    { title: "Hospitality", desc: "Every guest is royalty.", icon: Heart },
  ];

  return (
    <div className="min-h-screen bg-cream-50 text-gray-900 font-sans selection:bg-gold-500 selection:text-white">
      
      {/* --- STANDARDIZED HERO BANNER --- */}
      <div className="relative h-[40vh] w-full flex items-center justify-center pt-24 bg-black">
        <div className="absolute inset-0 opacity-60">
          <img src={exteriorImg} className="w-full h-full object-cover" alt="Golden Bay Exterior" />
          <div className="absolute inset-0 bg-gradient-to-b from-black/60 via-transparent to-cream-50"></div>
        </div>
        <div className="relative z-10 text-center">
          <Link to="/" className="text-xs tracking-[0.4em] uppercase mb-6 text-white hover:text-gold-400 transition-colors block">‚Üê Back to Experience</Link>
          <h1 className="text-5xl md:text-5xl font-serif tracking-widest uppercase text-white drop-shadow-md">Our Story</h1>
          <div className="h-[1px] w-24 bg-gold-400 mt-8 mx-auto"></div>
        </div>
      </div>

      {/* 2. INTRODUCTION */}
      <Section className="bg-white text-center">
        <motion.div 
            initial="hidden" whileInView="visible" viewport={{ once: true }} variants={fadeUp}
            className="max-w-3xl mx-auto space-y-6"
        >
            <h2 className="text-gold-600 text-xs font-bold uppercase tracking-[0.2em] mb-2">Since 2009</h2>
            <p className="text-xl md:text-2xl font-serif text-gray-900 leading-relaxed">
              Golden Bay Fresh Seafoods Restaurant is a landmark culinary destination in Pasay City, dedicated to the art of fine Chinese dining.
            </p>
            <p className="text-gray-500 font-light leading-loose text-sm md:text-base">
               We blend traditional techniques with modern innovation to provide an unparalleled experience centered around the freshest seafood delights. Every dish tells a story of heritage, quality, and passion.
            </p>
        </motion.div>
      </Section>

      {/* 3. VISUAL SPLIT */}
      <div className="grid grid-cols-1 md:grid-cols-2 bg-gray-50">
          <div className="h-64 md:h-auto overflow-hidden relative group">
               <img src={aquariumImg} alt="Fresh Seafood" className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105" />
               <div className="absolute inset-0 bg-black/10 group-hover:bg-transparent transition-colors duration-500"></div>
          </div>
          <div className="p-12 md:p-20 flex flex-col justify-center space-y-10">
              <motion.div initial="hidden" whileInView="visible" viewport={{ once: true }} variants={fadeUp}>
                  <h3 className="text-2xl font-serif text-gray-900 mb-3">Our Vision</h3>
                  <p className="text-gray-500 text-sm leading-relaxed">
                      To be the premier destination for seafood lovers, celebrating the bounty of the sea through innovative dishes and memorable experiences.
                  </p>
              </motion.div>
              <motion.div initial="hidden" whileInView="visible" viewport={{ once: true }} variants={fadeUp}>
                  <h3 className="text-2xl font-serif text-gray-900 mb-3">Our Mission</h3>
                  <p className="text-gray-500 text-sm leading-relaxed">
                      To deliver excellence in every aspect‚Äîfrom sourcing sustainable ingredients to providing attentive, personalized service that exceeds expectations.
                  </p>
              </motion.div>
          </div>
      </div>

      {/* 4. CORE VALUES */}
      <Section className="bg-white">
         <div className="text-center mb-12">
            <h2 className="text-3xl font-serif text-gray-900">Core Values</h2>
            <div className="h-px w-16 bg-gold-400 mx-auto mt-4 opacity-50"></div>
         </div>
         
         <div className="grid grid-cols-2 md:grid-cols-5 gap-8">
            {values.map((val, index) => (
                <motion.div 
                    key={index}
                    initial={{ opacity: 0, y: 20 }}
                    whileInView={{ opacity: 1, y: 0 }}
                    viewport={{ once: true }}
                    transition={{ delay: index * 0.1 }}
                    className="text-center group p-4"
                >
                    <div className="mb-4 inline-flex items-center justify-center w-12 h-12 rounded-full bg-cream-100 text-gold-600 group-hover:bg-gold-600 group-hover:text-white transition-colors duration-300">
                        <val.icon size={20} />
                    </div>
                    <h4 className="text-sm font-bold uppercase tracking-wider text-gray-900 mb-2">{val.title}</h4>
                    <p className="text-xs text-gray-500 font-light leading-relaxed">
                        {val.desc}
                    </p>
                </motion.div>
            ))}
         </div>
      </Section>

      {/* 5. SERVICES */}
      <div className="grid grid-cols-1 md:grid-cols-2 bg-neutral-900 text-white">
         <div className="p-12 md:p-20 flex flex-col justify-center order-2 md:order-1">
            <motion.div initial="hidden" whileInView="visible" viewport={{ once: true }} variants={fadeUp}>
                <span className="text-gold-500 text-xs font-bold uppercase tracking-widest mb-2 block">Services</span>
                <h2 className="text-3xl md:text-4xl font-serif mb-6 text-white">World-Class Experiences</h2>
                <p className="text-gray-400 text-sm leading-loose mb-8">
                    From intimate gatherings to grand celebrations, we offer versatile spaces and services tailored to your needs.
                </p>
                <ul className="grid grid-cols-1 gap-3 text-sm font-light text-gray-300 mb-10">
                    <li className="flex items-center gap-3"><span className="w-1 h-1 bg-gold-500 rounded-full"></span> Signature Seafood Menu</li>
                    <li className="flex items-center gap-3"><span className="w-1 h-1 bg-gold-500 rounded-full"></span> Private VIP Rooms</li>
                    <li className="flex items-center gap-3"><span className="w-1 h-1 bg-gold-500 rounded-full"></span> Grand Event Spaces</li>
                    <li className="flex items-center gap-3"><span className="w-1 h-1 bg-gold-500 rounded-full"></span> Premium Delivery</li>
                </ul>
                <Link to="/reservations">
                    <button className="border border-gold-500 text-gold-500 px-8 py-3 text-xs font-bold uppercase tracking-widest hover:bg-gold-500 hover:text-white transition-all">
                        Book Your Event
                    </button>
                </Link>
            </motion.div>
         </div>
         <div className="h-64 md:h-auto overflow-hidden order-1 md:order-2">
            <img src={diningImg} alt="Dining Hall" className="w-full h-full object-cover" />
         </div>
      </div>

    </div>
  );
};

export default AboutPage;

import React, { useState, useEffect } from 'react';
import { motion } from 'framer-motion';
import { Link } from 'react-router-dom';
import { Users, Mic2, Tv, Armchair, Star } from 'lucide-react'; 
import heroimage from '../../../assets/images/heroimage4.webp'; // Using same hero as Menu for consistency

const BACKEND_URL = "http://127.0.0.1:8000";

const VIPRoomsPage = () => {
  const [rooms, setRooms] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const fetchRooms = async () => {
      try {
        const res = await fetch(`${BACKEND_URL}/api/reservations/rooms/`);
        if (res.ok) {
          const data = await res.json();
          
          // FIX: Sort rooms naturally (so Room 2 comes before Room 10)
          const sortedData = data.sort((a, b) => {
             return a.name.localeCompare(b.name, undefined, { numeric: true, sensitivity: 'base' });
          });

          setRooms(sortedData);
        }
      } catch (err) {
        console.error("Failed to fetch rooms", err);
      } finally {
        setLoading(false);
      }
    };
    fetchRooms();
  }, []);

  if (loading) {
    return (
      <div className="min-h-screen bg-cream-50 flex items-center justify-center text-gold-600 font-serif tracking-widest uppercase animate-pulse">
        Loading Private Rooms...
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-cream-50 text-gray-900 overflow-x-hidden font-sans">
      
      {/* --- HERO SECTION (Matches MenuPage) --- */}
      <div className="relative h-[40vh] w-full flex items-center justify-center pt-24 bg-black">
        <div className="absolute inset-0 opacity-60">
          <img src={heroimage} className="w-full h-full object-cover" alt="Interior" />
          <div className="absolute inset-0 bg-gradient-to-b from-black/60 via-transparent to-cream-50"></div>
        </div>
        <div className="relative z-10 text-center">
          <Link to="/" className="text-xs tracking-[0.4em] uppercase mb-6 text-white hover:text-gold-400 transition-colors block">‚Üê Back to Experience</Link>
          <h1 className="text-5xl md:text-5xl font-serif tracking-widest uppercase text-white drop-shadow-md">Private Dining</h1>
          <div className="h-[1px] w-24 bg-gold-400 mt-8 mx-auto"></div>
        </div>
      </div>

      <div className="px-6 py-12 md:px-24">
        
        {/* --- ROOMS GRID (Matches Menu Grid) --- */}
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {rooms.map((room) => (
            <motion.div
                key={room.id}
                initial={{ opacity: 0, y: 20 }}
                whileInView={{ opacity: 1, y: 0 }}
                viewport={{ once: true }}
                className="group bg-white border border-gray-200 hover:border-gold-400/50 transition-all duration-500 rounded-sm overflow-hidden flex flex-col shadow-sm hover:shadow-lg"
            >
                {/* Image Area - 4:3 Ratio Standard */}
                <div className="aspect-[4/3] overflow-hidden relative bg-gray-100 border-b border-gray-100">
                {room.image ? (
                    <img 
                        // üëá FIX IS HERE: Check if it starts with http, otherwise add backend URL
                        src={room.image.startsWith('http') ? room.image : `${BACKEND_URL}${room.image}`}
                        className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105" 
                        alt={room.name} 
                    />
                ) : (
                    <div className="w-full h-full flex flex-col items-center justify-center opacity-20 text-gray-400 uppercase text-xs tracking-widest">
                        No Image
                    </div>
                )}
                
                {/* Capacity Badge */}
                <div className="absolute top-0 right-0 bg-white/95 px-4 py-2 text-xs font-bold text-gray-900 border-l border-b border-gray-100 shadow-sm z-10 tracking-widest flex items-center gap-2">
                    <Users size={12} className="text-gold-600"/> {room.capacity} PAX
                </div>
                </div>

                {/* Content Area */}
                <div className="p-6 flex-1 flex flex-col">
                <div className="mb-4">
                    <h3 className="text-xl font-bold text-gray-900 uppercase tracking-wider group-hover:text-gold-600 transition-colors leading-tight">
                        {room.name}
                    </h3>
                    <p className="text-xs text-gray-400 mt-1 uppercase tracking-widest">{room.area_type === 'VIP' ? 'Exclusive Room' : 'Dining Hall'}</p>
                </div>

                {/* Description */}
                <p className="text-sm text-gray-500 font-light mb-6 line-clamp-3 leading-relaxed">
                    {room.description || "An elegant space designed for privacy and comfort."}
                </p>

                {/* Amenities Icons */}
                <div className="mt-auto pt-4 border-t border-gray-100 flex flex-wrap gap-4 text-xs text-gray-400">
                    {room.has_ktv && (
                        <span className="flex items-center gap-1" title="KTV Available">
                            <Mic2 size={14} className="text-gold-600"/> KTV
                        </span>
                    )}
                    {room.has_restroom && (
                        <span className="flex items-center gap-1" title="Private Restroom">
                            <Star size={14} className="text-gold-600"/> CR
                        </span>
                    )}
                    {room.has_tv && (
                        <span className="flex items-center gap-1" title="Smart TV">
                            <Tv size={14} className="text-gold-600"/> TV
                        </span>
                    )}
                    {room.has_couch && (
                        <span className="flex items-center gap-1" title="Lounge Area">
                            <Armchair size={14} className="text-gold-600"/> Lounge
                        </span>
                    )}
                    {/* Fallback if no amenities selected */}
                    {!room.has_ktv && !room.has_restroom && !room.has_tv && !room.has_couch && (
                        <span className="italic opacity-50">Standard Setup</span>
                    )}
                </div>
                </div>
            </motion.div>
            ))}
        </div>
      </div>

      {/* FOOTER CTA */}
      <div className="py-20 text-center bg-white border-t border-gray-100">
          <h2 className="text-2xl font-serif text-gray-900 mb-6">Ready to reserve a private room?</h2>
          <Link to="/reservations">
             <button className="bg-gold-600 text-white px-10 py-4 text-xs font-bold uppercase tracking-widest hover:bg-black transition-all rounded-sm shadow-md">
                Book Reservation
             </button>
          </Link>
      </div>

    </div>
  );
};

export default VIPRoomsPage;

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>New Reservation Alert</title>
</head>
<body style="margin: 0; padding: 0; background-color: #f4f4f5; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">
    
    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="padding: 40px 0;">
        <tr>
            <td align="center">
                <table border="0" cellpadding="0" cellspacing="0" width="600" style="background-color: #ffffff; border-radius: 4px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); overflow: hidden;">
                    
                    <tr>
                        <td align="center" style="background-color: #1a1a1a; padding: 30px 0;">
                            <h1 style="color: #ffffff; font-size: 20px; letter-spacing: 2px; text-transform: uppercase; margin: 0;">New Action Required</h1>
                            <p style="color: #D4AF37; font-size: 11px; text-transform: uppercase; letter-spacing: 3px; margin-top: 8px;">Golden Bay Dashboard</p>
                        </td>
                    </tr>

                    <tr>
                        <td style="padding: 40px 50px;">
                            <h2 style="color: #1a1a1a; font-size: 22px; margin: 0 0 20px 0;">
                                New Booking Request
                            </h2>
                            
                            <table border="0" cellpadding="15" cellspacing="0" width="100%" style="background-color: #fafafa; border: 1px solid #eeeeee; border-radius: 4px; margin-bottom: 20px;">
                                <tr>
                                    <td width="30%" style="color: #888888; font-size: 11px; text-transform: uppercase;">Customer</td>
                                    <td style="color: #1a1a1a; font-weight: bold; font-size: 14px;">{{ name }}</td>
                                </tr>
                                <tr>
                                    <td style="color: #888888; font-size: 11px; text-transform: uppercase;">Contact</td>
                                    <td style="color: #1a1a1a; font-weight: bold; font-size: 14px;">{{ contact }}</td>
                                </tr>
                                <tr>
                                    <td style="color: #888888; font-size: 11px; text-transform: uppercase;">Date & Time</td>
                                    <td style="color: #1a1a1a; font-weight: bold; font-size: 14px;">{{ date }} at {{ time }}</td>
                                </tr>
                                <tr>
                                    <td style="color: #888888; font-size: 11px; text-transform: uppercase;">Area & Pax</td>
                                    <td style="color: #1a1a1a; font-weight: bold; font-size: 14px;">{{ area }} ({{ pax }} Guests)</td>
                                </tr>
                            </table>

                            <div style="background-color: #fff9e6; border-left: 4px solid #D4AF37; padding: 15px; margin-bottom: 30px;">
                                <p style="margin: 0; color: #888888; font-size: 11px; text-transform: uppercase; margin-bottom: 5px;">Special Requests / Notes:</p>
                                <p style="margin: 0; color: #1a1a1a; font-size: 14px;">{{ notes }}</p>
                            </div>

                            <table border="0" cellpadding="0" cellspacing="0" width="100%">
                                <tr>
                                    <td align="center">
                                        <a href="https://goldenbay.com.ph/admin/bookings" style="display: inline-block; padding: 14px 40px; background-color: #D4AF37; color: #ffffff; text-decoration: none; font-weight: bold; text-transform: uppercase; font-size: 12px; letter-spacing: 1px; border-radius: 2px;">
                                            Confirm in Dashboard
                                        </a>
                                    </td>
                                </tr>
                            </table>

                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>

import datetime
from django.core.management.base import BaseCommand
from django.utils import timezone
from reservations.models import Reservation
from reservations.utils import send_sms
from django.core.mail import send_mail
from django.conf import settings
from django.template.loader import render_to_string
from django.utils.html import strip_tags

class Command(BaseCommand):
    help = 'Sends a reminder SMS and Email 4 hours before a confirmed reservation.'

    def handle(self, *args, **kwargs):
        now = timezone.localtime()
        
        # Get reservations for today and tomorrow that are CONFIRMED and haven't had a reminder sent
        reservations = Reservation.objects.filter(
            status='CONFIRMED',
            reminder_sent=False,
            date__in=[now.date(), (now + datetime.timedelta(days=1)).date()]
        )

        for res in reservations:
            # Combine the date and time fields into a timezone-aware datetime object
            res_datetime = timezone.make_aware(
                datetime.datetime.combine(res.date, res.time),
                timezone.get_current_timezone()
            )
            
            time_diff = res_datetime - now
            
            # Check if the reservation is between 3h 45m and 4h 15m away
            if datetime.timedelta(hours=3, minutes=45) <= time_diff <= datetime.timedelta(hours=4, minutes=15):
                
                self.stdout.write(f"Sending reminder to {res.customer_name} for {res.time}...")
                area_name = res.dining_area.name if res.dining_area else "Main Dining Hall"

                # 1. SEND SMS REMINDER
                contact_digits = ''.join(filter(str.isdigit, str(res.customer_contact)))
                if len(contact_digits) >= 10:
                    sms_body = f"Golden Bay Reminder: Hi {res.customer_name}, we look forward to seeing you today at {res.time.strftime('%I:%M %p')}! Please reply to this SMS or call (02) 8804-0332 for any changes."
                    send_sms(res.customer_contact, sms_body)

                # 2. SEND EMAIL REMINDER (Optional, but a nice touch)
                if res.customer_email and '@' in res.customer_email:
                    context = {
                        'name': res.customer_name,
                        'status': 'REMINDER', # We can reuse the confirmation template
                        'date': res.date.strftime('%B %d, %Y'),
                        'time': res.time.strftime('%I:%M %p'),
                        'pax': res.pax,
                        'area': area_name,
                        'id': res.id
                    }
                    html_message = render_to_string('emails/confirmation.html', context)
                    plain_message = strip_tags(html_message)

                    send_mail(
                        subject='Table Reminder - Golden Bay',
                        message=plain_message,
                        from_email=settings.EMAIL_HOST_USER,
                        recipient_list=[res.customer_email],
                        fail_silently=True,
                        html_message=html_message
                    )

                # Mark as sent so we don't message them again!
                res.reminder_sent = True
                res.save()

        self.stdout.write(self.style.SUCCESS('Successfully checked and sent reminders.'))

name: Lazy Deploy

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    name: Deploy to Linode
    runs-on: ubuntu-latest
    
    steps:
    - name: Executing remote ssh commands
      uses: appleboy/ssh-action@v1.0.3
      with:
        host: ${{ secrets.SSH_HOST }}
        username: ${{ secrets.SSH_USER }}
        key: ${{ secrets.SSH_KEY }}
        port: ${{ secrets.SSH_PORT }}
        script: |
          echo "üöÄ Starting Deployment..."
          
          # 1. Navigate to Project
          cd ~/goldenbay
          
          # 2. Pull Latest Code
          git pull origin main
          
          # 3. Update Backend
          echo "‚öôÔ∏è Updating Backend..."
          cd backend
          source ../env/bin/activate
          pip install -r requirements.txt
          python manage.py migrate
          python manage.py collectstatic --noinput
          
          # 4. Rebuild Frontend
          echo "üé® Building Frontend..."
          cd ../frontend
          npm install
          npm run build
          
          # 5. Restart Servers (Using Password for Sudo)
          echo "üîÑ Restarting Services..."
          echo "${{ secrets.SUDO_PASSWORD }}" | sudo -S systemctl restart gunicorn
          
          echo "‚úÖ Deployment Complete! Site is live."